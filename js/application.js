!function(){}("undefined"==typeof appConfig?this.appConfig={}:appConfig),angular.module("app",["ui.router","hljs","tg.common","tg.extensions","tg.components"]),angular.module("tg.common",[]),angular.module("tg.extensions",[]),angular.module("tg.components",[]),angular.module("app").config(["$logProvider",function(e){"use strict";e.debugEnabled(!0)}]),angular.module("app").config(["$stateProvider","$urlRouterProvider",function(e,t){"use strict";t.otherwise("/"),e.state("home",{url:"/",templateUrl:"./view/home/index.html",controller:"HomeController"}).state("extensions",{url:"/extensions",templateUrl:"./view/extensions/index.html"}).state("extensions.tgComponents",{url:"/tgComponents",templateUrl:"./view/extensions/tgComponents.html",controller:"ComponentsController"}).state("components",{url:"/components",templateUrl:"./view/components/index.html"}).state("components.tgTypeahead",{url:"/tgTypeahead",templateUrl:"./view/components/tgTypeahead.html",controller:"TypeaheadController"}).state("components.tgDropdown",{url:"/tgDropdown",templateUrl:"./view/components/tgDropdown.html",controller:"DropdownController"}).state("components.tgTabset",{url:"/tgTabset",templateUrl:"./view/components/tgTabset.html",controller:"TabsetController"})}]),angular.module("app").factory("utilities",[function(){"use strict";function e(e,t){var a;if(angular.isArray(e)){for(var n=0,r=e.length;r>n;n++)if(a=t(e[n],n,e),void 0!==a)return a}else if(angular.isObject(e))for(var o in e)if(a=t(e[o],o,e),void 0!==a)return a}function t(e,t,a){var n=[];return this.each(e,function(r,o){var i=t(r,o,e);void 0!==i&&(a&&-1!==n.indexOf(i)||n.push(i))}),n}function a(e){return!e||0===e.length}function n(e,t){return e&&e.indexOf(t)>-1}return{each:e,select:t,empty:a,has:n}}]),function(){"use strict";function e(){}angular.module("tg.common").controller("AppController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e){return function(t){return e.trustAsHtml(t)}}angular.module("tg.common").filter("tgTrustedHtml",e),e.$inject=["$sce"]}(),function(){"use strict";angular.module("tg.common").directive("codeHighlight",["$compile",function(e){return{restrict:"A",scope:!1,priority:9999,compile:function(t,a){function n(t){if(o){var a=t.$new();a.source=d;var n=$(o);n.attr("hljs",""),n.attr("source","source"),n.attr("language",i||""),e(n)(a)}}for(var r,o=a.codeHighlightSelector,i=a.codeHighlight,d=t.get(0).innerHTML,l="",s=0,p=d.length,c=0,u=0;p>s;s++)if(r=d.charCodeAt(s),10===r)l+="\n",c=0;else{if(32!==r){if(c>0)for(0===u?u=c:c-=u;c-->0;)l+=" ";c=-1}else-1!==c&&c++;-1===c&&(l+=d[s])}return d=l.trim(),{pre:n,post:null}}}}])}(),function(){"use strict";function e(e){function t(){var t=e.defer();return t.resolve(a),t.promise}var a=[{id:4,code:"AF",name:"Afghanistan"},{id:8,code:"AL",name:"Albania"},{id:12,code:"DZ",name:"Algeria"},{id:20,code:"AD",name:"Andorra"},{id:24,code:"AO",name:"Angola"},{id:28,code:"AG",name:"Antigua and Barbuda"},{id:31,code:"AZ",name:"Azerbaijan"},{id:32,code:"AR",name:"Argentina"},{id:36,code:"AU",name:"Australia"},{id:40,code:"AT",name:"Austria"},{id:44,code:"BS",name:"Bahamas"},{id:48,code:"BH",name:"Bahrain"},{id:50,code:"BD",name:"Bangladesh"},{id:51,code:"AM",name:"Armenia"},{id:52,code:"BB",name:"Barbados"},{id:56,code:"BE",name:"Belgium"},{id:64,code:"BT",name:"Bhutan"},{id:68,code:"BO",name:"Bolivia"},{id:70,code:"BA",name:"Bosnia and Herzegovina"},{id:72,code:"BW",name:"Botswana"},{id:76,code:"BR",name:"Brazil"},{id:84,code:"BZ",name:"Belize"},{id:90,code:"SB",name:"Solomon Islands"},{id:96,code:"BN",name:"Brunei Darussalam"},{id:100,code:"BG",name:"Bulgaria"},{id:104,code:"MM",name:"Myanmar"},{id:108,code:"BI",name:"Burundi"},{id:112,code:"BY",name:"Belarus"},{id:116,code:"KH",name:"Cambodia"},{id:120,code:"CM",name:"Cameroon"},{id:124,code:"CA",name:"Canada"},{id:132,code:"CV",name:"Cape Verde"},{id:140,code:"CF",name:"Central African Republic"},{id:144,code:"LK",name:"Sri Lanka"},{id:148,code:"TD",name:"Chad"},{id:152,code:"CL",name:"Chile"},{id:156,code:"CN",name:"China"},{id:158,code:"TW",name:"Taiwan"},{id:170,code:"CO",name:"Colombia"},{id:174,code:"KM",name:"Comoros"},{id:178,code:"CG",name:"Congo"},{id:180,code:"CD",name:"Democratic Republic of the Congo"},{id:188,code:"CR",name:"Costa Rica"},{id:191,code:"HR",name:"Croatia"},{id:192,code:"CU",name:"Cuba"},{id:196,code:"CY",name:"Cyprus"},{id:203,code:"CZ",name:"Czech Republic"},{id:204,code:"BJ",name:"Benin"},{id:208,code:"DK",name:"Denmark"},{id:212,code:"DM",name:"Dominica"},{id:214,code:"DO",name:"Dominican Republic"},{id:218,code:"EC",name:"Ecuador"},{id:222,code:"SV",name:"El Salvador"},{id:226,code:"GQ",name:"Equatorial Guinea"},{id:231,code:"ET",name:"Ethiopia"},{id:232,code:"ER",name:"Eritrea"},{id:233,code:"EE",name:"Estonia"},{id:242,code:"FJ",name:"Fiji"},{id:246,code:"FI",name:"Finland"},{id:250,code:"FR",name:"France"},{id:258,code:"PF",name:"French Polynesia"},{id:262,code:"DJ",name:"Djibouti"},{id:266,code:"GA",name:"Gabon"},{id:268,code:"GE",name:"Georgia"},{id:270,code:"GM",name:"Gambia"},{id:276,code:"DE",name:"Germany"},{id:288,code:"GH",name:"Ghana"},{id:296,code:"KI",name:"Kiribati"},{id:300,code:"GR",name:"Greece"},{id:308,code:"GD",name:"Grenada"},{id:320,code:"GT",name:"Guatemala"},{id:324,code:"GN",name:"Guinea"},{id:328,code:"GY",name:"Guyana"},{id:332,code:"HT",name:"Haiti"},{id:336,code:"VA",name:"Holy See (Vatican City State)"},{id:340,code:"HN",name:"Honduras"},{id:344,code:"HK",name:"Hong Kong"},{id:348,code:"HU",name:"Hungary"},{id:352,code:"IS",name:"Iceland"},{id:356,code:"IN",name:"India"},{id:360,code:"ID",name:"Indonesia"},{id:364,code:"IR",name:"Iran"},{id:368,code:"IQ",name:"Iraq"},{id:372,code:"IE",name:"Ireland"},{id:376,code:"IL",name:"Israel"},{id:380,code:"IT",name:"Italy"},{id:384,code:"CI",name:"Cote D'ivoire"},{id:388,code:"JM",name:"Jamaica"},{id:392,code:"JP",name:"Japan"},{id:398,code:"KZ",name:"Kazakhstan"},{id:400,code:"JO",name:"Jordan"},{id:404,code:"KE",name:"Kenya"},{id:408,code:"KP",name:"North Korea"},{id:410,code:"KR",name:"South Korea"},{id:414,code:"KW",name:"Kuwait"},{id:417,code:"KG",name:"Kyrgyzstan"},{id:418,code:"LA",name:"Lao People's Democratic Republic"},{id:422,code:"LB",name:"Lebanon"},{id:426,code:"LS",name:"Lesotho"},{id:428,code:"LV",name:"Latvia"},{id:430,code:"LR",name:"Liberia"},{id:434,code:"LY",name:"Libya"},{id:438,code:"LI",name:"Liechtenstein"},{id:440,code:"LT",name:"Lithuania"},{id:442,code:"LU",name:"Luxembourg"},{id:450,code:"MG",name:"Madagascar"},{id:454,code:"MW",name:"Malawi"},{id:458,code:"MY",name:"Malaysia"},{id:462,code:"MV",name:"Maldives"},{id:466,code:"ML",name:"Mali"},{id:470,code:"MT",name:"Malta"},{id:478,code:"MR",name:"Mauritania"},{id:480,code:"MU",name:"Mauritius"},{id:484,code:"MX",name:"Mexico"},{id:492,code:"MC",name:"Monaco"},{id:496,code:"MN",name:"Mongolia"},{id:498,code:"MD",name:"Moldova"},{id:499,code:"ME",name:"Montenegro"},{id:504,code:"MA",name:"Morocco"},{id:508,code:"MZ",name:"Mozambique"},{id:512,code:"OM",name:"Oman"},{id:516,code:"NA",name:"Namibia"},{id:520,code:"NR",name:"Nauru"},{id:524,code:"NP",name:"Nepal"},{id:528,code:"NL",name:"Netherlands"},{id:540,code:"NC",name:"New Caledonia"},{id:548,code:"VU",name:"Vanuatu"},{id:554,code:"NZ",name:"New Zealand"},{id:558,code:"NI",name:"Nicaragua"},{id:562,code:"NE",name:"Niger"},{id:566,code:"NG",name:"Nigeria"},{id:578,code:"NO",name:"Norway"},{id:583,code:"FM",name:"Micronesia"},{id:584,code:"MH",name:"Marshall Islands"},{id:585,code:"PW",name:"Palau"},{id:586,code:"PK",name:"Pakistan"},{id:591,code:"PA",name:"Panama"},{id:598,code:"PG",name:"Papua New Guinea"},{id:600,code:"PY",name:"Paraguay"},{id:604,code:"PE",name:"Peru"},{id:608,code:"PH",name:"Philippines"},{id:616,code:"PL",name:"Poland"},{id:620,code:"PT",name:"Portugal"},{id:624,code:"GW",name:"Guinea-Bissau"},{id:626,code:"TL",name:"Timor-Leste"},{id:630,code:"PR",name:"Puerto Rico"},{id:634,code:"QA",name:"Qatar"},{id:642,code:"RO",name:"Romania"},{id:643,code:"RU",name:"Russian Federation"},{id:646,code:"RW",name:"Rwanda"},{id:659,code:"KN",name:"Saint Kitts and Nevis"},{id:662,code:"LC",name:"Saint Lucia"},{id:670,code:"VC",name:"Saint Vincent and the Grenadines"},{id:674,code:"SM",name:"San Marino"},{id:678,code:"ST",name:"Sao Tome and Principe"},{id:682,code:"SA",name:"Saudi Arabia"},{id:686,code:"SN",name:"Senegal"},{id:688,code:"RS",name:"Serbia"},{id:690,code:"SC",name:"Seychelles"},{id:694,code:"SL",name:"Sierra Leone"},{id:702,code:"SG",name:"Singapore"},{id:703,code:"SK",name:"Slovakia"},{id:704,code:"VN",name:"Viet Nam"},{id:705,code:"SI",name:"Slovenia"},{id:706,code:"SO",name:"Somalia"},{id:710,code:"ZA",name:"South Africa"},{id:716,code:"ZW",name:"Zimbabwe"},{id:724,code:"ES",name:"Spain"},{id:728,code:"SS",name:"South Sudan"},{id:729,code:"SD",name:"Sudan"},{id:732,code:"EH",name:"Western Sahara"},{id:740,code:"SR",name:"Suriname"},{id:748,code:"SZ",name:"Swaziland"},{id:752,code:"SE",name:"Sweden"},{id:756,code:"CH",name:"Switzerland"},{id:760,code:"SY",name:"Syrian Arab Republic"},{id:762,code:"TJ",name:"Tajikistan"},{id:764,code:"TH",name:"Thailand"},{id:768,code:"TG",name:"Togo"},{id:776,code:"TO",name:"Tonga"},{id:780,code:"TT",name:"Trinidad and Tobago"},{id:784,code:"AE",name:"United Arab Emirates"},{id:788,code:"TN",name:"Tunisia"},{id:792,code:"TR",name:"Turkey"},{id:795,code:"TM",name:"Turkmenistan"},{id:798,code:"TV",name:"Tuvalu"},{id:800,code:"UG",name:"Uganda"},{id:804,code:"UA",name:"Ukraine"},{id:807,code:"MK",name:"Macedonia"},{id:818,code:"EG",name:"Egypt"},{id:826,code:"GB",name:"United Kingdom"},{id:834,code:"TZ",name:"Tanzania"},{id:840,code:"US",name:"United States"},{id:854,code:"BF",name:"Burkina Faso"},{id:858,code:"UY",name:"Uruguay"},{id:860,code:"UZ",name:"Uzbekistan"},{id:862,code:"VE",name:"Venezuela"},{id:882,code:"WS",name:"Samoa"},{id:887,code:"YE",name:"Yemen"},{id:894,code:"ZM",name:"Zambia"}];return{getCountries:t}}angular.module("tg.common").service("DataService",e),e.$inject=["$q"]}(),function(){"use strict";function e(e,t){return{restrict:"A",require:e,transclude:!0,scope:!1,compile:function(){function e(e,a,n,r,o){t&&r&&r.hasOwnProperty(t)&&r[t]({$attachTo:function(e,t){o(t,function(t){e.append(t)})}})}function a(e,t){t.remove()}return{pre:e,post:a}}}}angular.module("tg.components").run(["$templateCache",function(e){e.put("tg-dropdown.tpl.html",'<div class="btn-group tg-dropdown-wrap" data-ng-class="tgDropdownWrapClass">   <div class="tg-dropdown-button" data-ng-class="{ \'disabled\': tgDropdownDisabled }"        data-ng-click="toggleOpenState($event);">       <button class="tg-dropdown-label overflow">           <span style="font-style: italic" class="muted" data-ng-if="!$selectedItem" data-ng-bind-html="tgDropdownPlaceholder"></span>           <span data-tg-dropdown-render-template="$templates.selectedItem">No Template</span>       </button>       <button class="tg-dropdown-caret fa" data-ng-class="$stateHolder.opened ? \'fa-caret-up\' : \'fa-caret-down\'"></button>   </div>   <div data-tg-dropdown-render-template="$templates.popup"></div>'),e.put("tg-dropdown-popup.tpl.html",'<div class="tg-dropdown-menu" data-ng-class="{ \'tg-dropdown-menu-has-search\': !!tgDropdownSearch }" data-ng-show="$stateHolder.opened">   <input type="text" class="tg-dropdown-menu-search" placeholder="{{ tgDropdownSearchPlaceholder }}"        data-ng-model="$stateHolder.filter"        data-ng-change="applyFilter();">   <ul class="dropdown-menu" data-tg-when-scrolled="onPopupScrolled($event);">       <li data-ng-if="$templates.itemHeader">           <div data-tg-dropdown-render-template="$templates.itemHeader">               No Template           </div>       </li>       <li data-ng-repeat="$item in $dataHolder.filteredItems | limitTo:$stateHolder.limit">           <a href="" data-ng-click="selectItem($item);" data-tg-dropdown-render-template="$templates.item">               No Template           </a>       </li>       <li data-ng-if="$stateHolder.filter && $dataHolder.filteredItems == 0">           <a href="" class="overflow">               No match for "{{ $stateHolder.filter }}"           </a>       </li>   </ul></div>'),e.put("tg-dropdown-stage-popup.tpl.html",'<div class="tg-dropdown-menu" data-ng-show="$stateHolder.opened">   <ul class="tg-dropdown-stage-menu">       <li class="tg-dropdown-stage-menu__item-wrap" data-ng-if="$level > 0">           <button class="fa fa-caret-left tg-dropdown-stage-menu__back" data-ng-click="goBack($item)"></button>           <div class="tg-dropdown-stage-menu__item" data-ng-click="goBack($item);">Back</div>       </li>       <li class="tg-dropdown-stage-menu__item-wrap" data-ng-repeat="$item in $dataHolder.filteredItems">           <div class="fa fa-check tg-dropdown-stage-menu__check" style="visibility: hidden;"></div>           <button class="fa fa-caret-right tg-dropdown-stage-menu__forward" data-ng-click="goForward($item)" data-ng-if="hasChilds($item)"></button>           <div class="tg-dropdown-stage-menu__item" data-ng-click="goForward($item);" data-tg-dropdown-render-template="$templates.item" data-ng-class="{ \'m-selectable\': !hasChilds($item) }">No Template</div>       </li>   </ul></div>')}]).directive("tgDropdown",["$tgComponents","$http","$compile","$parse","$templateCache","$filter","$timeout","$document",function(e,t,a,n,r,o,i,d){return{restrict:"A",require:["tgDropdown","?ngModel"],scope:{tgDropdown:"@",tgDropdownPlaceholder:"@",tgDropdownId:"@",tgDropdownWrapClass:"@",tgDropdownTemplateUrl:"@",tgDropdownPopupTemplateUrl:"@",tgDropdownSearch:"=",tgDropdownSearchPlaceholder:"@",tgDropdownFilterBy:"@",tgDropdownOrderBy:"=",tgDropdownLimitStep:"@",tgDropdownSelected:"@",tgDropdownDisabled:"=",tgDropdownAddEmpty:"@",tgDropdownEmptyText:"@"},compile:function(e,l){function s(e,t){var a={};return m.modelMapper.assign(a,t),m.viewMapper.assign(a,e),a[m.itemName]}function p(e,t,a,r){function d(e){return g[m.itemName]=e,h=m.modelMapper(c,g),g[m.itemName]=null,h}var l=r[0],p=r[1],c=e.$parent,u=null,g={},h=null,f=null,$=e.tgDropdownFilterBy?n(e.tgDropdownFilterBy):null,v=parseInt(e.tgDropdownLimitStep)||9999,T=e.tgDropdownSelected?n(e.tgDropdownSelected):angular.noop;"true"===e.tgDropdownAddEmpty&&(f=s(e.tgDropdownEmptyText||null,null)),e.$external=c,e.$templates={main:e.tgDropdownTemplateUrl||"tg-dropdown.tpl.html",popup:e.tgDropdownPopupTemplateUrl||"tg-dropdown-popup.tpl.html",selectedItem:null,itemHeader:null,item:null},e.$stateHolder={opened:!1,limit:v,filter:""},e.$dataHolder={filteredItems:[]},e.$selectedItem=f,e.openPopup=function(){e.$stateHolder.filter="",e.$dataHolder.filteredItems=e.getSource(),e.$dataHolder.filteredItems&&0!==e.$dataHolder.filteredItems.length&&(e.$stateHolder.opened=!0,e.$stateHolder.limit=v,i(function(){e.updateMenu()}))},e.closePopup=function(){e.$stateHolder.opened=!1,e.$stateHolder.limit=v},e.onPopupScrolled=function(){var t=e.$stateHolder.limit+v;t>e.$dataHolder.filteredItems.length&&(t=e.$dataHolder.filteredItems.length),v>t&&(t=v),e.$stateHolder.limit=t},e.toggleOpenState=function(t){e.tgDropdownDisabled||(e.$stateHolder.opened?e.closePopup():e.openPopup()),t.preventDefault()},e.getSource=function(){return u},e.applyFilter=function(){e.$stateHolder.limit=v,e.$dataHolder.filteredItems=o("filter")(u,$({$filter:e.$stateHolder.filter}))},e.refreshSource=function(){if(u=m.source(c),u&&(u&&u.length>0&&e.tgDropdownOrderBy&&(u=o("orderBy")(u,e.tgDropdownOrderBy)),f)){var t=!1;for(var a in u)if(null===d(u[a])){t=!0;break}t||u.unshift(angular.copy(f))}},e.selectItem=function(t){var a=e.selectItemEventPrepare(t);l.trigger("onItemSelecting",a).then(function(){e.closePopup(),t&&(e.hasSelectedAnyItem=!0),e.$selectedItem=t,p&&(h=d(t),p.$setViewValue(h)),l.trigger("onItemSelected",a),T(c,a)})},e.selectItemEventPrepare=function(e){var t={$item:e};return t},e.updateMenu=function(){var a=t.find(".dropdown-menu");if(a.length>0){var n=t.find(".tg-dropdown-menu");n.css("width",a.get(0).offsetWidth),a.scrollTop(0),e.tgDropdownSearch&&n.find("input.tg-dropdown-menu-search").focus()}},e.updateSelectedItemFromModel=function(t,a){if(void 0===t&&null!==f&&(t=null),e.$selectedItem=null,void 0!==t&&a(e.$selectedItem)!==t)for(var n in u)if(angular.equals(a(u[n]),t)){e.$selectedItem=u[n];break}return null!==e.$selectedItem?t:null},p&&p.$formatters.push(function(t){return e.updateSelectedItemFromModel(t,d)}),e.refreshSource()}function c(e,n){t.get(e.$templates.main,{cache:r}).success(function(t){n.append(a(t.trim())(e))});var o=!1,l=function(){o||i(function(){e.closePopup()}),o=!1};d.on("click",l),n.on("click",function(){o=!0}),e.$on("$destroy",function(){d.off("click",l)})}var u=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/,g=l.tgDropdown.match(u);if(!g)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+l.tgDropdown+"'.");var m={itemName:g[3],source:n(g[4]),viewMapper:n(g[2]||g[1]),modelMapper:n(g[1])};return{pre:p,post:c}},controller:["$scope","$element","$attrs",function(t,a,n){var r=this;r.$type="tgDropdown",r.$name=t.tgDropdownId?t.tgDropdownId:r.$type+"_"+t.$id,r.$scope=t,r.$element=a,r.$attrs=n,r.$supportEvents=!0,this.$setSelectedItemTemplate=function(e){t.$templates.selectedItem=e},this.$setItemHeaderTemplate=function(e){t.$templates.itemHeader=e},this.$setItemTemplate=function(e){t.$templates.item=e},this.refreshSource=function(){t.refreshSource()},this.selectItem=function(e){t.selectItem(e)},this.$overrideFn=function(e,a){var n=t[e]||angular.noop;t[e]=function(){var e,t=this.$baseFn;return this.$baseFn=n,e=a.apply(this,arguments),this.$baseFn=t,e}},e.$addInstance(r),t.$on("$destroy",function(){e.$removeInstance(r)})}]}}]).directive("tgDropdownRenderTemplate",["$http","$compile","$parse","$templateCache",function(e,t,a,n){return{restrict:"A",scope:!1,compile:function(){function r(r,o,i){var d=a(i.tgDropdownRenderTemplate)(r);angular.isString(d)?(o.html(null),e.get(d,{cache:n}).success(function(e){o.append(t(e.trim())(r))})):angular.isObject(d)&&(o.html(null),d.$attachTo(o,r))}return{pre:null,post:r}}}}]).directive("tgDropdownSelectedItemTemplate",[function(){return e("^?tgDropdown","$setSelectedItemTemplate")}]).directive("tgDropdownItemHeaderTemplate",[function(){return e("^?tgDropdown","$setItemHeaderTemplate")}]).directive("tgDropdownItemTemplate",[function(){return e("^?tgDropdown","$setItemTemplate")}]).directive("tgDropdownStage",[function(){return{restrict:"A",require:"tgDropdown",scope:!1,compile:function(){function e(e,t,a,n){e=n.$scope,e.$templates.popup=e.tgDropdownPopupTemplateUrl||"tg-dropdown-stage-popup.tpl.html",e.$paths=[],e.$level=0,n.$overrideFn("openPopup",function(){if(this.$baseFn(),e.$selectedItem){var t=e.collectPaths(e.$selectedItem),a=t.length-1;a>=0?(e.$level=a+1,e.selectItem(t[a])):e.goRoot()}else e.$level=0}),n.$overrideFn("selectItem",function(t){e.hasChilds(t)?e.$dataHolder.filteredItems=t.childs:(e.$paths=e.collectPaths(t),this.$baseFn(t))}),n.$overrideFn("selectItemEventPrepare",function(t){var a=this.$baseFn(t);return a.$paths=e.$paths,a}),n.$overrideFn("updateSelectedItemFromModel",function(t,a){if(void 0!==t&&a(e.$selectedItem)!==t){var n,r=function(o){if(Array.isArray(o))for(var i=0,d=o.length;d>i;i++){if(n=o[i],a(n)===t)return n;if(e.hasChilds(n)&&(n=r(n.childs)))return n}};e.$selectedItem=r(e.getSource())||null,e.$selectedItem&&(e.$paths=e.collectPaths(e.$selectedItem))}return null!==e.$selectedItem?t:null}),e.hasChilds=function(e){return e.hasOwnProperty("childs")&&Array.isArray(e.childs)&&e.childs.length>0},e.goRoot=function(){e.$level=0,e.$dataHolder.filteredItems=e.getSource()},e.goForward=function(t){e.$level=e.getItemLevel(t)+1,e.$level>=0?e.selectItem(t):e.goRoot()},e.goBack=function(t){var a=e.collectPaths(t),n=a.length-2;n>=0?(e.$level=n+1,e.selectItem(a[n])):e.goRoot()},e.collectPaths=function(t){var a=[],n=null,r=function(o){var i,d;if(Array.isArray(o))for(i=0,d=o.length;d>i;i++){if(n=o[i],n===t)return n;if(e.hasChilds(n)&&(n=r(n.childs)))return a.unshift(o[i]),n}};return r(e.getSource()),a},e.getItemLevel=function(t){var a=-1,n=null,r=function(o){if(Array.isArray(o))for(var i=0,d=o.length;d>i;i++){if(n=o[i],n===t)return a++,n;if(e.hasChilds(n)&&(n=r(n.childs)))return a++,n}};return r(e.getSource()),a},n.getPaths=function(){return e.$paths}}return{pre:e,post:null}}}}])}(),function(){"use strict";function e(e){return e.replace(t,"\\$1")}var t=/([.?*+^$[\]\\(){}|-])/g;angular.module("tg.components").filter("tgHighlight",[function(){return function(t,a){if(a){var n=new RegExp(e(a),"gi");return t.replace(n,"<strong>$&</strong>")}return t}}]).directive("tgHighlightHtml",["$timeout","$compile",function(t,a){return{restrict:"A",scope:!1,compile:function(){return{pre:angular.noop,post:function(n,r,o){if(o.tgHighlightHtml){var i=e(o.tgHighlightHtml)+"(?!([^<]+)?>)",d=new RegExp(i,"gi");t(function(){r.html(function(e,t){return t=t.replace(d,"<strong>$&</strong>"),"true"===o.tgHighlightHtmlCompile?a("<span>"+t+"</span>")(n):t})})}}}}}}])}(),function(){"use strict";angular.module("tg.components").run(["$templateCache",function(e){e.put("tg-tabset.tmpl.html",'<div class="tabbable" data-ng-class="tgTabsetWrapClass">   <ul class="nav nav-tabs">       <li data-ng-repeat="$tab in $tabs"           data-ng-class="{ \'active\': isActiveTab($tab), \'disabled\': $tab.disabled }">           <a href="" data-ng-click="setActiveTab($tab);">               <span data-tg-tabset-render-template="$tab.template.header">{{ $tab.title || \'&nbsp;\' }}</span>           </a>       </li>   </ul>   <div class="tab-content" data-ng-repeat="$tab in $tabs">       <div class="tab-pane"            data-ng-if="$tab.initiated"            data-tg-tabset-render-template="$tab.template.content"            data-ng-class="{ \'active\': isActiveTab($tab) }"></div>   </div></div>')}]).directive("tgTabset",["$tgComponents","$http","$compile","$parse","$templateCache","$q",function(e,t,a,n,r,o){return{restrict:"A",scope:{tgTabset:"=?",tgTabsetId:"@",tgTabsetTemplateUrl:"@",tgTabsetWrapClass:"@",tgTabsetActiveTab:"@",tgTabsetContext:"@"},compile:function(){return function(e,o){var i=e.$parent,d=e.tgTabset;e.$tabs=d.$tabs,e.setActiveTab=function(e){d.setActiveTab(e)},e.isActiveTab=function(e){return e&&d.getActiveTab()===e};var l=n(e.tgTabsetTemplateUrl)(i)||"tg-tabset.tmpl.html";t.get(l,{cache:r}).success(function(t){var n=a(t.trim())(e);o.prepend(n)})}},controller:["$scope","$element","$attrs",function(t,a,r){function i(e){for(var t in l)if(l[t].name===e)return!1;return!0}this.$type="tgTabset",this.$name=t.tgTabsetId?t.tgTabsetId:this.$type+"_"+t.$id,this.$scope=t,this.$element=a,this.$attrs=r,this.$supportEvents=!0;var d=this,l=this.$tabs=[],s=null,p=t.tgTabsetActiveTab;t.tgTabset=d,this.context=n(t.tgTabsetContext)(t.$parent)||{},this.getActiveTab=function(){return s},this.setActiveTab=function(e){var t=o.defer();if(!e||-1===l.indexOf(e))throw t.reject(),new Error("Invalid tab.");if(e===s||e.disabled)t.reject();else{e.refreshContext(!1);var a=function(){var a={tab:e,activeTab:s};d.trigger("$onTabSelecting",a).then(function(){e.initiated=!0,e.autoRefresh&&e.refresh(),s&&(a={tab:s},d.trigger("$onTabDeselected",a)),s=e,a={tab:s},d.trigger("$onTabSelected",a),t.resolve()}).catch(function(){t.reject()})};if(s){var n={tab:s};d.trigger("$onTabDeselecting",n).then(function(){a()}).catch(function(){t.reject()})}else a()}return t.promise},this.addTab=function(e){if(!i(e.name))throw new Error("Tab with name `"+e.name+"` was already added to tabset.");var t={tab:e};d.trigger("$onTabAdding",t).then(function(){l.push(e),d.trigger("$onTabAdded",t),e.name===p&&d.setActiveTab(e)})},this.getTabByIndex=function(e,t){var a=l.length;if(e>=0||a>e)return l[e];if(t)throw new Error("Invalid tab index.");return null},this.getTabByName=function(e,t){for(var a in l)if(l[a].name===e)return l[a];if(t)throw new Error("Invalid tab name.");return null},this.setDefaultTab=function(e){p=e},e.$addInstance(this),t.$on("$destroy",function(){e.$removeInstance(d)})}]}}]).directive("tgTabsetRenderTemplate",["$http","$compile","$parse","$templateCache",function(e,t,a,n){return{restrict:"A",scope:!1,compile:function(){function r(r,o,i){var d=a(i.tgTabsetRenderTemplate)(r);d&&angular.isObject(d)&&(d.hasOwnProperty("templateUrl")?(o.html(null),e.get(d.templateUrl,{cache:n}).success(function(e){var a=t(e.trim());o.append(a(d.scope))})):d.hasOwnProperty("$attachTo")&&(o.html(null),d.$attachTo(o,r,null)))}return{pre:null,post:r}}}}]).directive("tgTab",["$parse",function(e){return{restrict:"A",require:"^tgTabset",transclude:!0,scope:{tgTab:"@",tgTabTitle:"@",tgTabContext:"@",tgTabInitiated:"@",tgTabDisabled:"@",tgTabAutoRefresh:"@",tgTabIsolated:"@",tgTabTemplateUrl:"@"},compile:function(){function e(e,t,a,n,r){var o=null,i=e.$tab;i.template.content.$attachTo=function(t,a){var d={tab:i};n.trigger("$onTabAttaching",d).then(function(){o=t;var l="true"===e.tgTabIsolated?a:e.$parent.$new();l.$external=e.$parent,l.$tabset=n,l.$tab=i,r(l,function(e){t.append(e)}),n.trigger("$onTabAttached",d)})},i.refresh=function(){if(i.initiated&&o){var e={tab:i};n.trigger("$onTabRefreshing",e).then(function(){o.html(null),i.$attachTo(o),n.trigger("$onTabRefreshed",e)})}},n.addTab(i),a.$observe("tgTabTitle",function(e){i.title=e}),t.remove()}return{pre:e,post:null}},controller:["$scope","$element","$attrs",function(t){var a=e(t.tgTabContext);t.$tab={name:t.tgTab,title:t.tgTabTitle,template:{header:t.tgTabTemplateUrl?{templateUrl:t.tgTabTemplateUrl,scope:t.$parent}:null,content:{}},context:null,initiated:"true"===t.tgTabInitiated,disabled:"true"===t.tgTabDisabled,autoRefresh:"true"===t.tgTabAutoRefresh,refreshContext:function(e){var n=a(t.$parent)||{};e===!1&&(n=angular.extend(n,this.context)),this.context=n}},t.$tab.refreshContext()}]}}])}(),function(){"use strict";function e(e,t){return{restrict:"A",require:e,transclude:!0,scope:!1,compile:function(){function e(e,a,n,r,o){t&&r&&r.hasOwnProperty(t)&&r[t](o)}function a(e,t){t.remove()}return{pre:e,post:a}}}}angular.module("tg.components").run(["$templateCache",function(e){e.put("tg-typeahead.tpl.html",'<div class="tg-typeahead"     ng-class="tgTypeaheadWrapClass">   <div tg-typeahead-render-template="$templates.main.header"></div>   <div tg-typeahead-render-template="$templates.main.container"></div>   <div tg-typeahead-render-template="$templates.main.footer"></div>   <div class="tg-typeahead__suggestions-wrap"        tg-typeahead-render-template="$templates.popup.wrapper"></div>   <div class="tg-typeahead__suggestions-wrap"        ng-if="$stateHolder.hasSuggestions"        tg-typeahead-render-template="$templates.suggestedPopup.wrapper"></div></div>'),e.put("tg-typeahead-container.tpl.html",'<div class="tg-typeahead__input-container" style="position: relative"     ng-show="$isVisibleInput()">   <a href="" class="tg-typeahead__clear-link"      ng-show="!$stateHolder.loader && $isVisibleClear()"      ng-click="$clear($event);">Remove All</a>   <div class="input-loader tg-typeahead__loader" ng-show="$stateHolder.loader"></div>   <div class="tg-typeahead__input-wrap">       <input type="text" class="tg-typeahead__input"              placeholder="{{ $getPlaceholder() }}"              ng-model="$term"              ng-disabled="$isDisabled()">   </div></div>'),e.put("tg-typeahead-popup.tpl.html",'<ul class="tg-typeahead__suggestions"    ng-if="$stateHolder.popup.opened"    ng-style="$templates.popup.wrapper.style">    <li class="tg-typeahead__suggestions-header"        tg-typeahead-render-template="$templates.popup.header"></li>    <li class="tg-typeahead__suggestions-container"        tg-when-scrolled="$onPopupScrolled($event);">        <div ng-repeat="$dataSet in $dataSets | filter:{ queried: { active: true } }">            <div class="tg-typeahead__suggestions-group-header"                 tg-typeahead-render-template="$dataSet.templates.header || $templates.dataSet.header"></div>            <ul class="tg-typeahead__suggestions-group">                <li class="tg-typeahead__suggestions-group-item"                    ng-repeat="$match in $dataSet.queried.matches | limitTo:$dataSet.queried.limit"                    ng-class="{ active: $index === $dataSet.queried.activeIndex, selected: $match.selected, disabled: $match.disabled }">                    <div tg-typeahead-render-template="$dataSet.templates.item || $templates.dataSet.item"></div>                </li>            </ul>            <div class="tg-typeahead__suggestions-group-footer"                tg-typeahead-render-template="$dataSet.templates.footer || $templates.dataSet.footer"></div>        </div>    </li>    <li class="tg-typeahead__suggestions-footer"        tg-typeahead-render-template="$templates.popup.footer"></li></ul>'),e.put("tg-typeahead-dataSet-item.tpl.html",'<span ng-bind-html="$match.value | tgTrustedHtml"></span>'),e.put("tg-typeahead-suggested-popup.tpl.html",'<ul class="tg-typeahead__suggestions"    ng-if="$stateHolder.suggestedPopup.opened"    ng-style="$templates.suggestedPopup.wrapper.style">    <li class="tg-typeahead__suggestions-header"        tg-typeahead-render-template="$templates.suggestedPopup.header"></li>    <li class="tg-typeahead__suggestions-container"        tg-when-scrolled="$onPopupScrolled($event);">        <div ng-repeat="$dataSet in $dataSets | filter:{ suggested: { active: true } }">            <div class="tg-typeahead__suggestions-group-header"                 tg-typeahead-render-template="$dataSet.templates.header || $templates.dataSet.header"></div>            <ul class="tg-typeahead__suggestions-group">                <li class="tg-typeahead__suggestions-group-item"                    ng-repeat="$match in $dataSet.suggested.matches | limitTo:$dataSet.suggested.limit"                    ng-class="{ active: $index === $dataSet.suggested.activeIndex, selected: $match.selected, disabled: $match.disabled }">                    <div tg-typeahead-render-template="$dataSet.templates.item || $templates.dataSet.item"></div>                </li>            </ul>            <div class="tg-typeahead__suggestions-group-footer"                tg-typeahead-render-template="$dataSet.templates.footer || $templates.dataSet.footer"></div>        </div>    </li>    <li class="tg-typeahead__suggestions-footer"        tg-typeahead-render-template="$templates.suggestedPopup.footer"></li></ul>'),e.put("tg-typeahead-suggested-dataSet-item.tpl.html",'<span ng-bind-html="$match.value | tgTrustedHtml"></span>'),e.put("tg-typeahead-tag-manager.tpl.html",'<div class="tg-typeahead__tag-manager"     ng-class="$templates.tagManager.wrapper.class"     ng-style="$templates.tagManager.wrapper.style">   <div ng-repeat="$tag in $tags | orderBy:$tagsOrder">       <div tg-typeahead-render-template="$templates.tagManager.tag"></div>   </div></div>'),e.put("tg-typeahead-tag.tpl.html",'<div class="tg-typeahead__tag">    <span class="tg-typeahead__tag-remove fa fa-times" rel="tooltip"       tooltip-placement="right"       tooltip-html-unsafe="delete"       ng-click="$removeTag($tag)"></span>    <span class="tg-typeahead__tag-name" ng-bind-html="$tag.match.value | tgTrustedHtml"></span></div>'),e.put("tg-typeahead-filter-manager.tpl.html",'<div class="tg-typeahead__tag-manager">   <div ng-repeat="$filterTag in $filters.tags">       <div tg-typeahead-render-template="$templates.filterManager.tag"></div>   </div></div>'),e.put("tg-typeahead-filter-tag.tpl.html",'<div class="tg-typeahead__tag-wrap">    <div style="display: table-cell; vertical-align: top;" ng-switch="!!$filterTag.match">        <div class="tg-typeahead__tag-filter" ng-switch-when="true" ng-bind-html="$filterTag.filter.value | tgTrustedHtml"></div>        <select class="tg-typeahead__tag-filter"                ng-model="$filterTag.filter"                ng-change="$onFilterTypeSelect($filterTag, $filterTag.filter);"                ng-options="filter.value for filter in $filterTag.filters track by filter.type"                ng-switch-default=""></select>    </div>    <div class="tg-typeahead__tag" style="display: table-cell; vertical-align: top;" ng-show="$filterTag.match !== null">       <span class="tg-typeahead__tag-remove fa fa-times" rel="tooltip"             tooltip-placement="right"             tooltip-html-unsafe="delete"             ng-click="removeFilterTag($filterTag)"></span>       <span class="tg-typeahead__tag-name" ng-bind-html="$filterTag.match | tgTrustedHtml"></span>    </div></div>')
}]).directive("tgTypeahead",["$tgComponents","$injector","$http","$compile","$parse","$q","$timeout","$document",function(e,t,a,n,r,o,i,d){return{restrict:"A",require:["tgTypeahead","?ngModel"],scope:{tgTypeahead:"@",tgTypeaheadId:"@",tgTypeaheadContext:"=",tgTypeaheadPlaceholder:"@",tgTypeaheadPopupAppendToBody:"@",tgTypeaheadPopupStrictWidth:"@",tgTypeaheadWrapClass:"@",tgTypeaheadDisplayClean:"@",tgTypeaheadMinLength:"@",tgTypeaheadDelay:"@",tgTypeaheadDisabled:"=?",tgTypeaheadSelected:"@"},priority:4,compile:function(e,a){function l(e){return e&&e.hasOwnProperty("then")&&angular.isFunction(e.then)}function s(e,t,a,n){function d(t){var a=e.$dataHolder.collectedPromises,n=e.$promisesHolder.regularCancelPromise;return n&&a.push(n.promise),e.$dataSets.forEach(function(r){r.data={};var i={$queried:!0,$viewValue:t,$internal:e,$context:angular.extend({dataSet:r},e.$prepareSourceContext()||{})},d=r.queried,s=d.source.sourceMapper,p=s(w,i),c=l(p)?p:o.when(p);d.inProgress=!0,c.then(function(a){if(e.$term===t){d.matches.length=0,d.$hideMore();var n=a;angular.forEach(n,function(t){var a=d.$getItem(t,w),n=new h(t,a.model,a.value);e.$prepareMatchModel(n,r),d.matches.push(n)})}}).finally(function(){n&&n.resolve()}),a.push(c)}),a}function s(){var t=e.$dataHolder.collectedPromises,a=e.$promisesHolder.suggestedCancelPromise;return a&&t.push(a.promise),e.$dataSets.forEach(function(n){if(n.suggested&&n.suggested.source){n.data={};var r={$suggested:!0,$internal:e,$context:angular.extend({dataSet:n},e.$prepareSourceContext()||{})},i=n.suggested,d=i.source.sourceMapper,s=d(w,r),p=l(s)?s:o.when(s);p.then(function(t){i.matches.length=0,i.$hideMore();var a=t;angular.forEach(a,function(t){var a=i.$getItem(t,w),r=new f(t,a.model,a.value);e.$prepareMatchModel(r,n),i.matches.push(r)})}).finally(function(){a&&a.resolve()}),t.push(p)}}),t}function p(){e.$dataHolder.collectedPromises.length=0}function $(){var t,a=e.$stateHolder.popup.opened,n=e.$stateHolder.suggestedPopup.opened;if(a?t=e.$templates.popup.wrapper:n&&(t=e.$templates.suggestedPopup.wrapper),t){var r=e.$findElementInTemplate(t,".tg-typeahead__suggestions-container"),o=r.get(0);if(o&&o.clientHeight<o.scrollHeight){var i=e.$findElementInTemplate(t,".tg-typeahead__suggestions-group-item.active"),d=i.get(0);if(d){var l=o.getBoundingClientRect(),s=d.getBoundingClientRect();s.top<l.top?o.scrollTop+=s.top-l.top:s.bottom>l.bottom&&(o.scrollTop+=s.bottom-l.bottom)}}}}function v(t){t.on("mouseenter mouseleave mousedown",".tg-typeahead__suggestions-group-item",function(t){if(t.target){var a=angular.element(t.target).scope();switch(t.type){case"mouseenter":e.$setActiveMatch(a.$dataSet,a.$index),a.$digest();break;case"mouseleave":var n=e.getDataSetSource(a.$dataSet);n&&(n.activeIndex=-1),a.$digest();break;case"mousedown":a.$match.disabled||e.$selectMatch(a.$dataSet,a.$index,a.$match,t),a.$apply()}}})}function T(e){switch(b.trigger("onTemplateInit",{template:e}),e.name){case"main.container":y(e);break;case"popup.wrapper":case"suggestedPopup.wrapper":v(e.element)}}function y(){var t=e.$findElementInTemplate(e.$templates.main.wrapper,".tg-typeahead__input");t.on("click",function(){var t=e.$stateHolder.popup.opened;e.$closePopup(),e.$stateHolder.hasSuggestions&&!t&&e.$resolveSuggestedSources()});var a=t.controller("ngModel");a.$parsers.unshift(function(t){return t=t||"",S&&i.cancel(S),e.$closePopup(),e.$applyMatch(null,null),t.length>=P&&(S=i(function(){e.$term&&e.$resolveSources(t)},I)),t})}var S,w=e.$external=e.$parent,b=n[0],M=n[1],P=Math.abs(parseInt(e.tgTypeaheadMinLength)||0),I=Math.abs(parseInt(e.tgTypeaheadDelay)||500);e.selectedDataSet=null,e.$dataSets=[],e.$term=null,e.$templates={main:{wrapper:new m("main.wrapper",a.tgTypeaheadTemplateUrl||"tg-typeahead.tpl.html",T),header:new m("main.header",a.tgTypeaheadHeaderTemplateUrl,T),container:new m("main.container",a.tgTypeaheadContainerTemplateUrl||"tg-typeahead-container.tpl.html",T),footer:new m("main.footer",a.tgTypeaheadFooterTemplateUrl,T)},popup:{wrapper:new m("popup.wrapper",a.tgTypeaheadPopupTemplateUrl||"tg-typeahead-popup.tpl.html",T),header:new m("popup.header",a.tgTypeaheadPopupHeaderTemplateUrl,T),container:new m("popup.container",void 0,T),footer:new m("popup.footer",a.tgTypeaheadPopupFooterTemplateUrl,T)},suggestedPopup:{wrapper:new m("suggestedPopup.wrapper",a.tgTypeaheadSuggestedPopupTemplateUrl||"tg-typeahead-suggested-popup.tpl.html",T),header:new m("suggestedPopup.header",a.tgTypeaheadSuggestedPopupHeaderTemplateUrl,T),container:new m("suggestedPopup.container",void 0,T),footer:new m("suggestedPopup.footer",a.tgTypeaheadSuggestedPopupFooterTemplateUrl,T)},dataSet:{header:new m("dataSet.header",a.tgTypeaheadDataSetsHeaderTemplateUrl,T),item:new m("dataSet.item",a.tgTypeaheadDataSetsItemTemplateUrl||"tg-typeahead-dataSet-item.tpl.html",T),footer:new m("dataSet.footer",a.tgTypeaheadDataSetsFooterTemplateUrl,T)}},"true"===e.tgTypeaheadPopupAppendToBody&&(e.$templates.popup.wrapper.appendToBody=!0,e.$templates.suggestedPopup.wrapper.appendToBody=!0),"false"!==e.tgTypeaheadPopupStrictWidth&&(e.$templates.popup.wrapper.strictWidth=!0,e.$templates.suggestedPopup.wrapper.strictWidth=!0),e.$stateHolder={loader:!1,disabled:!1,popup:{opened:!1},hasSuggestions:!1,suggestedPopup:{opened:!1}},e.$dataHolder={collectedPromises:[],modelValue:null},e.$eventHolder={onMatchSelected:r(e.tgTypeaheadSelected)},e.$promisesHolder={regularCancelPromise:void 0,suggestedCancelPromise:void 0},e.getDataSetSource=function(t){if(t){if(e.$stateHolder.popup.opened)return t.queried;if(e.$stateHolder.suggestedPopup.opened)return t.suggested}},e.selectDataSet=function(t,a){var n;e.$dataSets.forEach(function(a){n=e.getDataSetSource(a),n&&(n.$hideMore(),n.active=!t)}),e.selectedDataSet=t,e.selectedDataSet&&(n=e.getDataSetSource(e.selectedDataSet),n&&(n.$showMore(),n.active=!0));var r=e.$findElementInTemplate(e.$templates.main.wrapper,".tg-typeahead__suggestions-container");r&&r.scrollTop(),a&&a.stopPropagation()},e.refreshModel=function(t){return e.$clear(),t=e.$prepareModel(t),e.$setModel(t,!0),t},e.$findElementInTemplate=function(e,t){return e&&e.element&&t?e.element.find(t):void 0},e.$openPopup=function(){e.$stateHolder.popup.opened||(e.$stateHolder.popup.opened=!0,e.selectDataSet(null),e.$setActiveMatch(null,-1),e.$updatePopupElement(e.$templates.popup.wrapper))},e.$openSuggestedPopup=function(){e.$stateHolder.suggestedPopup.opened||(e.$stateHolder.suggestedPopup.opened=!0,e.selectDataSet(null),e.$setActiveMatch(null,-1),e.$updatePopupElement(e.$templates.suggestedPopup.wrapper))},e.$closePopup=function(){e.$stateHolder.popup.opened&&(e.$stateHolder.popup.opened=!1),e.$stateHolder.suggestedPopup.opened&&(e.$stateHolder.suggestedPopup.opened=!1),e.$cancelAllRequests()},e.$updatePopupElement=function(e){var a=e.style||{};if(e.appendToBody){var n=t.offset(),r=t.outerHeight(!0);a.position="absolute",a.top=n.top+r+1,a.left=n.left}e.strictWidth&&(a.width=t.innerWidth(),a.boxSizing="border-box"),e.style=a},e.$isDisabled=function(){return!!e.tgTypeaheadDisabled||e.$stateHolder.disabled},e.$isVisibleInput=function(){return!0},e.$isFocusedInput=function(){var t=e.$findElementInTemplate(e.$templates.main.wrapper,".tg-typeahead__input");return t&&t.is(":focus")},e.$getPlaceholder=function(){return e.tgTypeaheadPlaceholder||""},e.$isVisibleClear=function(){return"true"===e.tgTypeaheadDisplayClean&&e.$term},e.$clear=function(){e.$clearTypeahead()},e.$updateInputElement=function(){},e.$prepareSourceContext=function(){},e.$resolveSources=function(t){e.$cancelAllRequests(),e.$stateHolder.loader=!0,e.$promisesHolder.regularCancelPromise=o.defer(),o.all(d(t)).then(function(){e.$dataHolder.collectedPromises.length>0&&(p(),e.$openPopup())},function(){e.$cancelAllRequests()}).finally(function(){e.$stateHolder.loader=!1})},e.$resolveSuggestedSources=function(){e.$cancelAllRequests(),e.$stateHolder.loader=!0,e.$promisesHolder.suggestedCancelPromise=o.defer(),o.all(s()).then(function(){e.$dataHolder.collectedPromises.length>0&&(p(),i(function(){e.$openSuggestedPopup()}))},function(){e.$cancelAllRequests()}).finally(function(){e.$stateHolder.loader=!1})},e.$cancelAllRequests=function(){e.$stateHolder.loader=!1;var t=e.$promisesHolder.regularCancelPromise,a=e.$promisesHolder.suggestedCancelPromise;t&&(t.reject(),e.$promisesHolder.regularCancelPromise=void 0),a&&(a.reject(),e.$promisesHolder.suggestedCancelPromise=void 0);var n=e.$dataHolder.collectedPromises;n.length>0&&(n.forEach(function(e){e.hasOwnProperty("cancelRequest")&&e.cancelRequest()}),p()),e.$dataSets.forEach(function(e){e.queried.inProgress=!1,e.suggested&&(e.suggested.inProgress=!1)})},e.$clearTypeahead=function(){e.$term=null},e.$setActiveMatch=function(t,a){var n;e.$dataSets.forEach(function(r){n=e.getDataSetSource(r),n&&(n.activeIndex=r===t?a:-1)})},e.$selectMatch=function(t,a,n){var r={context:e.tgTypeaheadContext,dataSet:t,index:a,match:n};b.trigger("onMatchSelecting",r).then(function(){e.$term=r.match.value,e.$applyMatch(t,r.match.model),b.trigger("onMatchSelected",r),e.$eventHolder.onMatchSelected(w,r)}),e.$closePopup()},e.$selectUnknownMatch=function(t,a,n){e.$selectMatch(t,-1,a,n)},e.$applyMatch=function(t,a){var n=a;e.$dataSets.length>1&&(n=e.$getModel()||{},e.$dataSets.forEach(function(e){n[e.name]=e===t?a:null})),e.$setModel(n)},e.$prepareDefaultModel=function(){var t=e.$dataSets.length>1,a=null;return t&&(a={},e.$dataSets.forEach(function(e){a[e.name]=null})),a},e.$prepareModel=function(t){if(void 0===t)return e.$prepareDefaultModel();var a,n=1===e.$dataSets.length,r=e.$dataSets.length>1;if(n?a=e.$dataSets[0]:r&&(t&&!Array.isArray(t)&&angular.isObject(t)||(t={}),e.$dataSets.forEach(function(e){t.hasOwnProperty(e.name)||(t[e.name]=null),null!==t[e.name]&&void 0!==t[e.name]&&(a=e)})),a){var o=n?t:t[a.name];e.$term=a.queried.$getItem(o,e.$parent).value}return t},e.$prepareMatchModel=function(){},e.$getModel=function(){return u?u(w):void 0},e.$setModel=function(t,a){e.$dataHolder.modelValue=t,!a&&M&&M.$setViewValue(null),g&&g(w,t)},e.$waitTill=function(t){t&&t.hasOwnProperty("finally")&&(e.$closePopup(),e.$stateHolder.loader=!0,e.$stateHolder.disabled=!0,t.finally(function(){e.$stateHolder.loader=!1,e.$stateHolder.disabled=!1}))},e.$onPopupScrolled=function(){if(e.selectedDataSet){var t=e.getDataSetSource(e.selectedDataSet);t&&t.$showMore()}},e.$onOutsideClick=function(){null===e.$dataHolder.modelValue&&e.$clearTypeahead(),e.$closePopup()},e.$onKeyDown=function(t){var a=e.$stateHolder.popup.opened,n=e.$stateHolder.suggestedPopup.opened;if((a||n)&&-1!==c.indexOf(t.which)){var r,o,d,l;if(e.selectedDataSet?r=e.selectedDataSet:(e.$dataSets.forEach(function(t){l=e.getDataSetSource(t),l&&-1!==l.activeIndex?r=t:r?r&&!d&&(d=t):o=t}),r||(r=e.$dataSets[0])),t.preventDefault(),l=e.getDataSetSource(r))if(40===t.which){var s=Math.min(l.limit,l.matches.length);if(l.activeIndex+1<s)l.activeIndex++;else{if(!d)return;e.$setActiveMatch(d,0)}i($),e.$digest()}else if(38===t.which){if(l.activeIndex>0)l.activeIndex--;else{if(!o)return;if(l=e.getDataSetSource(o)){var s=Math.min(l.limit,l.matches.length);e.$setActiveMatch(o,s-1)}}i($),e.$digest()}else 13===t.which||32===t.which?r&&(e.$selectMatch(r,l.activeIndex,l.matches[l.activeIndex],t),e.$apply()):27===t.which&&(e.$clearTypeahead(),e.$closePopup(),e.$digest())}},e.$watchModel=function(){e.$watch(e.$getModel,function(t){void 0!==t&&angular.equals(t,e.$dataHolder.modelValue)||e.refreshModel(t)})},e.$trigger=b.trigger.bind(b)}function p(e,t){t.append(n('<div tg-typeahead-render-template="$templates.main.wrapper"></div>')(e));var a=function(a){if(0===t.has(a.target).length){var n=e.$templates.popup.wrapper.element,r=e.$templates.suggestedPopup.wrapper.element;(n&&0===n.has(a.target).length||r&&0===r.has(a.target).length)&&(e.$onOutsideClick(),e.$digest())}},r=function(t){e.$onKeyDown(t)};d.on("click",a),d.on("keydown",r),e.$on("$destroy",function(){d.off("click",a),d.off("keydown",r)}),e.$watchModel()}var c=[9,13,27,32,38,40],u=r(a.ngModel),g=u.assign,m=t.get("tgTypeaheadRenderTemplateModel"),h=t.get("tgTypeaheadMatchModel"),f=t.get("tgTypeaheadSuggestedMatchModel");return{pre:s,post:p}},controller:["$scope","$element","$attrs",function(t,a,n){var r=this;r.$type="tgTypeahead",r.$name=t.tgTypeaheadId?t.tgTypeaheadId:r.$type+"_"+t.$id,r.$scope=t,r.$element=a,r.$attrs=n,r.$supportEvents=!0,this.$setHeaderTemplate=function(e){t.$templates.main.header.setTemplate(e)},this.$setFooterTemplate=function(e){t.$templates.main.footer.setTemplate(e)},this.$setPopupHeaderTemplate=function(e){t.$templates.popup.header.setTemplate(e)},this.$setPopupFooterTemplate=function(e){t.$templates.popup.footer.setTemplate(e)},this.$setSuggestedPopupHeaderTemplate=function(e){t.$templates.suggestedPopup.header.setTemplate(e)},this.$setSuggestedPopupFooterTemplate=function(e){t.$templates.suggestedPopup.footer.setTemplate(e)},this.$addDataSet=function(e){t.$dataSets.push(e),e.suggested&&(t.$stateHolder.hasSuggestions=!0)},this.$overrideFn=function(e,a){var n=t[e]||angular.noop;t[e]=function(){var e,t=this.$baseFn;return this.$baseFn=n,e=a.apply(this,arguments),this.$baseFn=t,e}},this.clear=function(){t.$clearTypeahead()},this.refreshModel=function(e){t.refreshModel(e)},e.$addInstance(r),t.$on("$destroy",function(){e.$removeInstance(r)})}]}}]).directive("tgTypeaheadDataSet",["$injector","$parse",function(e,t){return{restrict:"A",require:"^tgTypeahead",scope:{tgTypeaheadDataSet:"@",tgTypeaheadDataSetName:"@",tgTypeaheadDataSetLimitStep:"@",tgTypeaheadDataSetDisplayedItems:"@",tgTypeaheadDataSetSuggested:"@",tgTypeaheadDataSetComparator:"&"},compile:function(){function a(e){var a=e.match(o);if(!a)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+e+"'.");return{expression:e,itemName:a[3],sourceMapper:t(a[4]),viewMapper:t(a[2]||a[1]),modelMapper:t(a[1])}}function n(n,r,o,i){var d=parseInt(n.tgTypeaheadDataSetLimitStep)||9999,l=parseInt(n.tgTypeaheadDataSetDisplayedItems)||d,s=a(n.tgTypeaheadDataSet),p=e.get("tgTypeaheadDataSetModel"),c=e.get("tgTypeaheadRenderTemplateModel"),u=e.get("tgTypeaheadSourceModel"),g=n.tgTypeaheadDataSetName||"dataSet_"+n.$id;if(n.$dataSet=new p(g),n.$dataSet.templates={header:new c("dataSet.header",o.tgTypeaheadDataSetHeaderTemplateUrl),item:new c("dataSet.item",o.tgTypeaheadDataSetItemTemplateUrl),footer:new c("dataSet.footer",o.tgTypeaheadDataSetFooterTemplateUrl)},n.$dataSet.queried=new u(s,l,d),n.tgTypeaheadDataSetSuggested){var m={itemName:s.itemName,sourceMapper:t(n.tgTypeaheadDataSetSuggested),viewMapper:s.viewMapper,modelMapper:s.modelMapper};n.$dataSet.suggested=new u(m,l,d)}var h=n.tgTypeaheadDataSetComparator();angular.isFunction(h)&&(n.$dataSet.comparator=h),i.$addDataSet(n.$dataSet)}function r(e,t){e.$destroy(),t.remove()}var o=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{pre:n,post:r}},controller:["$scope",function(e){this.$setHeaderTemplate=function(t){e.$dataSet.templates.header.setTemplate(t)},this.$setItemTemplate=function(t){e.$dataSet.templates.item.setTemplate(t)},this.$setFooterTemplate=function(t){e.$dataSet.templates.footer.setTemplate(t)}}]}}]).directive("tgTypeaheadHeader",[function(){return e("^?tgTypeahead","$setHeaderTemplate")}]).directive("tgTypeaheadFooter",[function(){return e("^?tgTypeahead","$setFooterTemplate")}]).directive("tgTypeaheadPopupHeader",[function(){return e("^?tgTypeahead","$setPopupHeaderTemplate")}]).directive("tgTypeaheadPopupFooter",[function(){return e("^?tgTypeahead","$setPopupFooterTemplate")}]).directive("tgTypeaheadDataSetHeader",[function(){return e("^?tgTypeaheadDataSet","$setHeaderTemplate")}]).directive("tgTypeaheadDataSetItem",[function(){return e("^?tgTypeaheadDataSet","$setItemTemplate")}]).directive("tgTypeaheadDataSetFooter",[function(){return e("^?tgTypeaheadDataSet","$setFooterTemplate")}]).directive("tgTypeaheadSuggestedPopupHeader",[function(){return e("^?tgTypeahead","$setSuggestedPopupHeaderTemplate")}]).directive("tgTypeaheadSuggestedPopupFooter",[function(){return e("^?tgTypeahead","$setSuggestedPopupFooterTemplate")}]).directive("tgTypeaheadRenderTemplate",["$http","$compile","$parse","$templateCache",function(e,t,a,n){return{restrict:"A",scope:!1,compile:function(r,o){function i(a,r){r.empty();var o=d(a);o&&o.template?(o.template(a,function(e){r.append(e)}),o.appendToBody&&r.detach().appendTo("body"),o.render(r)):o&&o.templateUrl?e.get(o.templateUrl,{cache:n}).success(function(e){r.append(t(e.trim())(a)),o.appendToBody&&r.detach().appendTo("body"),o.render(r)}):r.remove()}var d=a(o.tgTypeaheadRenderTemplate);return{pre:void 0,post:i}}}}]).directive("tgTypeaheadTagManager",["$injector","$parse","$q","$timeout",function(e,t,a,n){return{restrict:"A",require:["tgTypeahead","?ngModel"],scope:!1,priority:3,compile:function(r,o){function i(e,r,o,i){function f(){var t=e.$findElementInTemplate(e.$templates.main.wrapper,".tg-typeahead__input-container"),a=e.$findElementInTemplate(e.$templates.main.wrapper,".tg-typeahead__input");if(t&&a){if(1===e.$tags.length){var n=r.width(),o=function(){var t,a,r=0;return e.$findElementInTemplate(e.$templates.tagManager.wrapper,".tg-typeahead__tag").each(function(){t=angular.element(this),a=t.outerWidth()+parseInt(t.css("margin-left"))+parseInt(t.css("margin-right")),r+=a,r>n&&(r=a)}),r}();if(o>0){var i=n-o,d=100>i?n:i;return d>=9&&(d-=9),void t.css("width",d+"px")}}t.css("width","100%")}}function $(){var t=e.$findElementInTemplate(e.$templates.tagManager.wrapper,".tg-typeahead__tag-manager");if(t){var a=t.get(0);a&&t.scrollTop(a.scrollHeight)}}var v=e.$parent,T=i[0],y=i[1];e=T.$scope,e.$tags=[],e.$tagsOrder=function(){return 0},u?e.$tagsOrder=t(u)(v):c&&(e.$tagsOrder=["match.value"]),e.$templates.tagManager={wrapper:new g("tagManager.wrapper",o.tgTypeaheadTagManagerTemplateUrl||"tg-typeahead-tag-manager.tpl.html"),tag:new g("tagManager.tag",o.tgTypeaheadTagTemplateUrl||"tg-typeahead-tag.tpl.html")},e.$templates.main.header=e.$templates.tagManager.wrapper,e.$canAddTag=function(){return 0===l||l>e.$tags.length},e.$addTag=function(t){if(t&&t.match&&e.$canAddTag()){var r={context:e.tgTypeaheadContext,tag:t};return T.events.emit("onTagAdding",r).then(function(){if(t.dataSet){var a=e.$getModel(),o=a;if(o){e.$dataSets.length>1&&(o=o[t.dataSet.name]);var i=-1;if(!s)for(var d=0,l=o.length;l>d;d++)if(t.dataSet.comparator(o[d],t.match.model)){i=d;break}-1===i&&o.push(t.match.model)}}return e.$tags.push(t),n(function(){$()}),T.events.emit("onTagAdded",r),t})}return a.when(void 0)},e.$removeTag=function(t){var n=e.$tags.indexOf(t);if(-1!==n){var r={context:e.tgTypeaheadContext,index:n,tag:t};return T.events.emit("onTagRemoving",r).then(function(){if(t.dataSet){var a=e.$getModel(),n=a;if(e.$dataSets.length>1&&n&&(n=n[t.dataSet.name]),n){for(var o=-1,i=0,d=n.length;d>i;i++)if(t.dataSet.comparator(n[i],t.match.model)){o=i;break}-1!==o&&n.splice(o,1)}}o=e.$tags.indexOf(t),-1!==o&&(e.$tags.splice(o,1),T.events.emit("onTagRemoved",r))})}return a.when(!1)},e.$findTag=function(t){for(var a=0,n=e.$tags.length;n>a;a++){var r=e.$tags[a];if(r.dataSet.comparator(r.match.model,t.model))return r}},e.$clearTags=function(){for(var t=e.$tags.length-1;t>=0;t--)e.$removeTag(e.$tags[t])},e.hasAllSelected=function(t){var a=e.getDataSetSource(t);if(a&&a.matches.length>0){for(var n=0,r=a.matches.length;r>n;n++)if(!a.matches[n].selected)return!1;return!0}return!1},e.selectAll=function(t,a){a&&(a.stopPropagation(),a.ctrlKey=!0);var n=e.getDataSetSource(t);n&&n.matches.forEach(function(n,r){n.selected||e.$selectMatch(t,r,n,a)})},e.deselectAll=function(t,a){a&&(a.stopPropagation(),a.ctrlKey=!0);var n=e.getDataSetSource(t);n&&n.matches.forEach(function(n,r){n.selected&&e.$selectMatch(t,r,n,a)})},e.applySelections=function(t){t.forEach(function(t){var a=e.getDataSetSource(t);a&&a.matches.forEach(function(a){var n=e.$findTag(a);if(a.selected)void 0===n&&(n=new h(a,t.build()),e.$addTag(n));else{var n=e.$findTag(a);void 0!==n&&e.$removeTag(n)}})}),e.$closePopup()},T.$overrideFn("$applyMatch",function(e,t,a){a&&this.$baseFn(e,t)}),T.$overrideFn("$onOutsideClick",function(){e.$clearTypeahead(),this.$baseFn()}),T.$overrideFn("$onKeyDown",function(t){8===t.which&&null===e.$term?e.$isFocusedInput()&&e.$tags.length>0&&e.$removeTag(e.$tags[e.$tags.length-1]):this.$baseFn(t)}),T.$overrideFn("$getPlaceholder",function(){return this.$baseFn()}),T.$overrideFn("$isVisibleInput",function(){var t=this.$baseFn();return t&&l>0&&l<=e.$tags.length&&(t=!1),t&&e.$updateInputElement(),t}),T.$overrideFn("$isVisibleClear",function(){return"true"===o.tgTypeaheadDisplayClean&&e.$tags.length>1}),T.$overrideFn("$clear",function(t){this.$baseFn(t),e.$clearTags()}),T.$overrideFn("$selectMatch",function(t,a,n,r){var o={context:e.tgTypeaheadContext,dataSet:t,index:a,match:n};T.trigger("onMatchSelecting",o).then(function(){if(p)n.selected=!n.selected;else{var a=e.$findTag(n);void 0===a||s?(a=new h(n,t.build()),e.$addTag(a),n.selected=!0):(e.$removeTag(a),n.selected=!1)}p||r&&r.ctrlKey|r.metaKey||e.$onOutsideClick()})}),T.$overrideFn("$watchModel",function(){e.$watchCollection(e.$getModel,function(t){void 0!==t&&angular.equals(t,e.$dataHolder.modelValue)||e.refreshModel(t)})}),T.$overrideFn("$prepareDefaultModel",function(){var t=1===e.$dataSets.length,a=e.$dataSets.length>1,n=null;return t?n=[]:a&&(n={},e.$dataSets.forEach(function(e){n[e.name]=[]})),n}),T.$overrideFn("$prepareModel",function(t){if(void 0===t)return e.$prepareDefaultModel();var a=1===e.$dataSets.length,n=e.$dataSets.length>1,r=[];return a?Array.isArray(t)&&t.length>0&&r.push({dataSet:e.$dataSets[0],source:t}):n&&(t&&!Array.isArray(t)&&angular.isObject(t)||(t={}),e.$dataSets.forEach(function(e){t.hasOwnProperty(e.name)&&Array.isArray(t[e.name])||(t[e.name]=[]),t[e.name].length>0&&r.push({dataSet:e,source:t[e.name]})})),r.length>0&&r.forEach(function(t){var a=t.dataSet,n=a.queried;t.source.forEach(function(t){var r=n.$getItem(t,e.$parent),t=new m(t,r.model,r.value),o=new h(t,a.build());e.$addTag(o)})}),t}),T.$overrideFn("$prepareMatchModel",function(t){if(!s&&e.$tags.length>0){var a=e.$findTag(t);void 0!==a&&(t.selected=!0)}}),T.$overrideFn("$updateInputElement",function(){f(),d>0&&(e.$tags.length>1?(e.$templates.tagManager.wrapper.class="clearfix",e.$templates.tagManager.wrapper.style={"max-height":22*d+"px","overflow-y":"auto"}):(e.$templates.tagManager.wrapper.class=void 0,e.$templates.tagManager.wrapper.style={}))}),T.getTags=function(){var t=[];return e.$tags.forEach(function(e){t.push(e)}),t},T.addTag=function(t,a){var n=new h(t,a.build());return e.$addTag(n)},T.removeTag=function(t){return e.$removeTag(t)},T.clearTags=function(){e.$clearTags()},e.$watchCollection("$tags",function(e){o.required&&n(function(){y.$setValidity("tagsRequired",0!==e.length)})})}var d=Math.abs(parseInt(o.tgTypeaheadMaxLines)||0),l=Math.abs(parseInt(o.tgTypeaheadMaxSelectedTags)||0),s="true"===o.tgTypeaheadAllowDuplicates,p="true"===o.tgTypeaheadPostponedSelection,c="true"===o.tgTypeaheadTagAscendingOrder,u=o.tgTypeaheadTagOrderBy,g=e.get("tgTypeaheadRenderTemplateModel"),m=e.get("tgTypeaheadMatchModel"),h=e.get("tgTypeaheadTagModel");return{pre:i,post:void 0}}}}]).directive("tgTypeaheadFilterManager",["$injector","$q",function(e,t){return{restrict:"A",require:["tgTypeahead"],scope:!1,priority:2,compile:function(a,n){function r(e,a,n,r){function l(){var t=e.$findElementInTemplate(e.$templates.main.wrapper,".tg-typeahead__input-container"),n=e.$findElementInTemplate(e.$templates.main.wrapper,".tg-typeahead__input");if(t&&n){var r=a.width(),o=function(){var t,a,n=0;return e.$findElementInTemplate(e.$templates.filterManager.wrapper,".tg-typeahead__tag-wrap").each(function(){t=angular.element(this),a=t.outerWidth()+parseInt(t.css("margin-left"))+parseInt(t.css("margin-right")),n+=a,n>r&&(n=a)}),n}();if(o>0){var i=r-o,d=100>i?r:i;return d>=20&&(d-=20),void t.css("width",d+"px")}t.css("width","100%")}}var s=r[0];e=s.$scope,e.$templates.filterManager={wrapper:new i("filterManager.wrapper",n.tgTypeaheadFilterManagerTemplateUrl||"tg-typeahead-filter-manager.tpl.html"),tag:new i("filterManager.tag",n.tgTypeaheadFilterTagTemplateUrl||"tg-typeahead-filter-tag.tpl.html")},e.$templates.main.header=e.$templates.filterManager.wrapper,e.$filters={tags:[],active:null},e.initFilterManager=function(){e.clearFilterTags(),e.$clearTypeahead(),e.addFilterTag(new d(null)).then(function(t){e.$filters.active=t})},e.canAddFilterTag=function(){return 0===o||o>e.$filters.tags.length},e.addFilterTag=function(a){if(a&&!a.match&&e.canAddFilterTag()){var n={context:e.tgTypeaheadContext,filterTag:a};return s.events.emit("onFilterTagAdding",n).then(function(){return e.$filters.tags.push(a),s.events.emit("onFilterTagAdded",n),a})}return t.when(void 0)},e.removeFilterTag=function(a){var n=e.$filters.tags.indexOf(a);if(-1!==n){var r={context:e.tgTypeaheadContext,filterTag:a};return s.events.emit("onFilterTagRemoving",r).then(function(){return e.$filters.tags.splice(n,1),e.selectFilterMatch(null,a),s.events.emit("onFilterTagRemoved",r),!0})}return t.when(!1)},e.clearFilterTags=function(){e.$filters.tags.length=0},e.selectFilterMatch=function(t,a){if(a=a||e.$filters.active){a.match=t;var n=null,r=e.$filters.tags.length;r>0&&(n=e.$filters.tags[r-1]),(!n||n.match)&&e.addFilterTag(new d(null)).then(function(t){e.$filters.active=t})}e.$clearTypeahead(),e.$closePopup()},e.getAppliedFilters=function(){var t=[];return e.$filters.tags.forEach(function(e){e.filter&&e.match&&t.push({type:e.filter.type,value:e.match,tag:e})}),t},e.$onFilterTypeSelect=function(t,a){var n={context:e.tgTypeaheadContext,filterTag:t,filter:a};return s.events.emit("onFilterTypeSelecting",n).then(function(){s.events.emit("onFilterTypeSelected",n)})},s.$overrideFn("$prepareSourceContext",function(){return{filters:e.getAppliedFilters(),currentFilter:e.$filters.active}}),s.$overrideFn("$isVisibleInput",function(){var t=this.$baseFn(),a=0;return t&&(e.$filters.tags.forEach(function(e){e.match&&a++}),o>0&&a>=o&&(t=!1)),t&&e.$updateInputElement(),t}),s.$overrideFn("$updateInputElement",function(){l()}),s.events.on("onMatchSelected",function(){e.clearFilterTags()}),s.initFilterManager=function(){e.initFilterManager()},s.getAppliedFilters=function(){return e.getAppliedFilters()},s.getCurrentFilter=function(){return e.$filter.active},e.$watch("$filters.tags",function(t){var a={context:e.tgTypeaheadContext,filterTags:t};s.events.emit("onFilterTagsChange",a)},!0),e.initFilterManager()}var o=parseInt(n.tgTypeaheadMaxUsedFilters)||0,i=e.get("tgTypeaheadRenderTemplateModel"),d=e.get("tgTypeaheadFilterTagModel");return{pre:r,post:void 0}}}}]).factory("tgTypeaheadRenderTemplateModel",[function(){function e(e,t,a){this.name=e,this.templateUrl=t,this.template=void 0,this.appendToBody=!1,this.strictWidth=!1,this.element=void 0,this.style=void 0,this.class=void 0,this.callback=a}return e.prototype.setTemplate=function(e){this.template=e},e.prototype.render=function(e){this.element=e,angular.isFunction(this.callback)&&this.callback(this)},e}]).factory("tgTypeaheadDataSetModel",[function(){function e(e){this.name=e,this.data=void 0,this.templates=void 0,this.queried=void 0,this.suggested=void 0,this.comparator=function(e,t){return angular.equals(e,t)}}return e.prototype.build=function(){return{name:this.name,comparator:this.comparator}},e}]).factory("tgTypeaheadSourceModel",[function(){function e(e,t,a){this.source=e,this.matches=[],this.displayedItems=t,this.limitStep=a,this.limit=t,this.active=!0,this.activeIndex=-1,this.inProgress=!1}return e.prototype.$hasMore=function(){return this.limit<this.matches.length},e.prototype.$showAll=function(e){this.limit=this.matches.length,e&&e.stopPropagation()},e.prototype.$showMore=function(e){var t=this.limit+this.limitStep;t>this.matches.length&&(t=this.matches.length),t<this.limitStep&&(t=this.limitStep),this.limit=t,e&&e.stopPropagation()},e.prototype.$hideMore=function(e){this.limit=this.displayedItems,e&&e.stopPropagation()},e.prototype.$getItem=function(e,t){var a={},n=this.source.itemName,r=this.source.viewMapper,o=this.source.modelMapper;return a[n]=e,{model:o(t,a),value:r(t,a)}},e}]).factory("tgTypeaheadMatchModel",[function(){function e(e,t,a){this.data=e,this.model=t,this.value=a,this.selected=!1,this.disabled=!1}return e}]).factory("tgTypeaheadSuggestedMatchModel",[function(){function e(e,t,a){this.data=e,this.model=t,this.value=a,this.selected=!1,this.disabled=!1,this.suggested=!0}return e}]).factory("tgTypeaheadTagModel",[function(){function e(e,t){this.match=e,this.dataSet=t}return e}]).factory("tgTypeaheadFilterTagModel",[function(){function e(e){this.match=e,this.filter=void 0,this.filters=[]}return e}])}(),function(){"use strict";angular.module("tg.components").directive("tgWhenScrolled",["$parse",function(e){return{restrict:"A",link:function(t,a,n){var r=e(n.tgWhenScrolled);a.bind("scroll",function(e){this.scrollTop+this.offsetHeight>=this.scrollHeight&&(r(t,{$event:e}),t.$digest())})}}}])}(),angular.module("app").controller("DropdownController",["$scope",function(){"use strict"}]),angular.module("app").controller("TabsetController",["$scope",function(){"use strict"}]),function(){"use strict";function e(e,t,a,n,r){e.__typeahead={model1:null,model2:null,model3:[],model4:[],model5:null,model6:[]},e.suggestions=[{id:44,code:"BS",name:"Bahamas"},{id:450,code:"MG",name:"Madagascar"}],e.comparator=function(e,t){return e.code===t.code},e.control={typeahead:{attributes:[{name:"tgTypeaheadId",type:"string",description:""},{name:"tgTypeaheadContext",type:"expression",description:""},{name:"tgTypeaheadPlaceholder",type:"string",description:""},{name:"tgTypeaheadTemplateUrl",type:"string",description:"Set custom typeahead template."},{name:"tgTypeaheadLoaderTemplateUrl",type:"string",description:"Set custom typeahead loader template."},{name:"tgTypeaheadPopupTemplateUrl",type:"string",description:"Set custom typeahead popup template."},{name:"tgTypeaheadPopupHeaderTemplateUrl",type:"string",description:"Set custom typeahead popup header template."},{name:"tgTypeaheadPopupFooterTemplateUrl",type:"string",description:"Set custom typeahead popup footer template."},{name:"tgTypeaheadDataSetsHeaderTemplateUrl",type:"string",description:"Set custom typeahead data set header template."},{name:"tgTypeaheadDataSetsItemTemplateUrl",type:"string",description:"Set custom typeahead data set item template."},{name:"tgTypeaheadDataSetsFooterTemplateUrl",type:"string",description:"Set custom typeahead data set footer template."},{name:"tgTypeaheadSuggestedPopupTemplateUrl",type:"string",description:"Set custom typeahead suggested popup template."},{name:"tgTypeaheadSuggestedPopupHeaderTemplateUrl",type:"string",description:"Set custom typeahead suggested popup header template."},{name:"tgTypeaheadSuggestedPopupFooterTemplateUrl",type:"string",description:"Set custom typeahead suggested popup footer template."},{name:"tgTypeaheadPopupAppendToBody",type:"boolean",description:"Should the typeahead popup be appended to $body instead of the parent element? (default: false)"},{name:"tgTypeaheadPopupStrictWidth",type:"boolean",description:""},{name:"tgTypeaheadWrapClass",type:"string",description:""},{name:"tgTypeaheadMinLength",type:"number",description:"The minimal number of characters that needs to be entered before the typeahead kicks in. The default value is set to 1. If set to 0, the typeahead will try to open on focus."},{name:"tgTypeaheadDelay",type:"number",description:"The minimum waiting time (after the last character was typed) before the typeahead kicks in."},{name:"tgTypeaheadSelected",type:"expression",description:"A callback executed when a match is selected."}]}},e.getResultsAsync=function(e,o){var i=t.defer();return n(function(){r.getCountries().then(function(t){t=a("filter")(t,{name:e}),0===t.length&&(o.dataSet.data.noResults=!0),i.resolve(t)})},2e3),i.promise},e.toJson=function(e){return angular.toJson(e,!0)}}angular.module("app").controller("TypeaheadController",e),e.$inject=["$scope","$q","$filter","$timeout","DataService"]
}(),angular.module("app").controller("HomeController",["$scope",function(){"use strict"}]),angular.module("tg.extensions").factory("$tgComponents",["tgEventsProcessor",function(e){"use strict";var t={},a=e.new();return{$addInstance:function(n){if(!n||!n.$name)throw new Error("Invalid instance or instance name.");if(t.hasOwnProperty(n.$name))throw new Error("Component with instance name `"+n.$name+"` already exist.");n.$supportEvents&&!n.hasOwnProperty("events")&&(n.events=e.new(),n.trigger=function(){var e=[];return Array.prototype.push.apply(e,arguments),e.push(n),n.events.emit.apply(n.events,e)}),t[n.$name]=n,a.emit("$onInstanceAdded",n)},$removeInstance:function(e){if(!e||!e.$name)throw new Error("Invalid instance or instance name.");if(!t.hasOwnProperty(e.$name))throw new Error("Component with instance name `"+e.$name+"` doesn't exist.");delete t[e.$name],a.emit("$onInstanceRemoved",e)},hasInstance:function(e){if(!e)throw new Error("Invalid instance name.");return t.hasOwnProperty(e)},getInstance:function(e){if(!this.hasInstance(e))throw new Error("Component with instance name `"+e+"` doesn't exist.");return t[e]||null},getInstances:function(){var e=[];for(var a in t)e.push(t[a]);return e},events:a}}]).factory("tgEventsProcessor",["$q",function(e){"use strict";function t(){this.handlers={},this.on=function(e,t){if(angular.isString(e)&&e.length>0&&angular.isFunction(t)){this.handlers.hasOwnProperty(e)||(this.handlers[e]=[]);var a=this.handlers[e];return a.push(t),function(){var e=a.indexOf(t);-1!==e&&a.splice(e,1)}}},this.emit=function(t){var a=[];if(angular.isString(t)&&t.length>0&&this.handlers.hasOwnProperty(t)){var n=[];Array.prototype.push.apply(n,arguments),n.shift(),angular.forEach(this.handlers[t],function(e){var t=e.apply(this,n);if(t){var r=t.hasOwnProperty("then")&&angular.isFunction(t.then);r&&a.push(t)}})}return e.all(a)},this.clear=function(e,t){if(void 0!==e){if(angular.isString(e)&&e.length>0)if(angular.isFunction(t)){var a=this.handlers[e].indexOf(t);-1!==a&&this.handlers[e].splice(a,1)}else delete this.handlers[e]}else this.handlers={}}}return{"new":function(){return new t}}}]),angular.module("app").controller("ComponentsController",["$scope",function(){"use strict"}]);