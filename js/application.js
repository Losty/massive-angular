!function(){}("undefined"==typeof appConfig?this.appConfig={}:appConfig),angular.module("app",["ui.router","hljs","tg.common","tg.extensions","tg.components"]),angular.module("tg.common",[]),angular.module("tg.extensions",[]),angular.module("tg.components",[]),angular.module("app").config(["$logProvider",function(e){"use strict";e.debugEnabled(!0)}]),angular.module("app").config(["$stateProvider","$urlRouterProvider",function(e,t){"use strict";t.otherwise("/"),e.state("home",{url:"/",templateUrl:"./view/home/index.html",controller:"HomeController"}).state("extensions",{url:"/extensions",templateUrl:"./view/extensions/index.html"}).state("extensions.tgComponents",{url:"/tgComponents",templateUrl:"./view/extensions/tgComponents.html",controller:"ComponentsController"}).state("components",{url:"/components",templateUrl:"./view/components/index.html"}).state("components.tgTypeahead",{url:"/tgTypeahead",templateUrl:"./view/components/tgTypeahead.html",controller:"TypeaheadController"}).state("components.tgDropdown",{url:"/tgDropdown",templateUrl:"./view/components/tgDropdown.html",controller:"DropdownController"}).state("components.tgTabset",{url:"/tgTabset",templateUrl:"./view/components/tgTabset.html",controller:"TabsetController"})}]),angular.module("app").factory("utilities",[function(){"use strict";function e(e,t){var a;if(angular.isArray(e)){for(var n=0,o=e.length;o>n;n++)if(a=t(e[n],n,e),void 0!==a)return a}else if(angular.isObject(e))for(var r in e)if(a=t(e[r],r,e),void 0!==a)return a}function t(e,t,a){var n=[];return this.each(e,function(o,r){var i=t(o,r,e);void 0!==i&&(a&&-1!==n.indexOf(i)||n.push(i))}),n}function a(e){return!e||0===e.length}function n(e,t){return e&&e.indexOf(t)>-1}return{each:e,select:t,empty:a,has:n}}]),function(){"use strict";function e(){}angular.module("tg.common").controller("AppController",e),e.$inject=["$scope"]}(),function(){"use strict";angular.module("tg.common").directive("codeHighlight",["$compile",function(e){return{restrict:"A",scope:!1,priority:9999,compile:function(t,a){function n(t){if(r){var a=t.$new();a.source=d;var n=$(r);n.attr("hljs",""),n.attr("source","source"),n.attr("language",i||""),e(n)(a)}}for(var o,r=a.codeHighlightSelector,i=a.codeHighlight,d=t.get(0).innerHTML,l="",s=0,p=d.length,c=0,u=0;p>s;s++)if(o=d.charCodeAt(s),10===o)l+="\n",c=0;else{if(32!==o){if(c>0)for(0===u?u=c:c-=u;c-->0;)l+=" ";c=-1}else-1!==c&&c++;-1===c&&(l+=d[s])}return d=l.trim(),{pre:n,post:null}}}}])}(),function(){"use strict";function e(e){return function(t){return e.trustAsHtml(t)}}angular.module("tg.common").filter("tgTrustedHtml",e),e.$inject=["$sce"]}(),function(){"use strict";function e(e){function t(){var t=e.defer();return t.resolve(a),t.promise}var a=[{id:4,code:"AF",name:"Afghanistan"},{id:8,code:"AL",name:"Albania"},{id:12,code:"DZ",name:"Algeria"},{id:20,code:"AD",name:"Andorra"},{id:24,code:"AO",name:"Angola"},{id:28,code:"AG",name:"Antigua and Barbuda"},{id:31,code:"AZ",name:"Azerbaijan"},{id:32,code:"AR",name:"Argentina"},{id:36,code:"AU",name:"Australia"},{id:40,code:"AT",name:"Austria"},{id:44,code:"BS",name:"Bahamas"},{id:48,code:"BH",name:"Bahrain"},{id:50,code:"BD",name:"Bangladesh"},{id:51,code:"AM",name:"Armenia"},{id:52,code:"BB",name:"Barbados"},{id:56,code:"BE",name:"Belgium"},{id:64,code:"BT",name:"Bhutan"},{id:68,code:"BO",name:"Bolivia"},{id:70,code:"BA",name:"Bosnia and Herzegovina"},{id:72,code:"BW",name:"Botswana"},{id:76,code:"BR",name:"Brazil"},{id:84,code:"BZ",name:"Belize"},{id:90,code:"SB",name:"Solomon Islands"},{id:96,code:"BN",name:"Brunei Darussalam"},{id:100,code:"BG",name:"Bulgaria"},{id:104,code:"MM",name:"Myanmar"},{id:108,code:"BI",name:"Burundi"},{id:112,code:"BY",name:"Belarus"},{id:116,code:"KH",name:"Cambodia"},{id:120,code:"CM",name:"Cameroon"},{id:124,code:"CA",name:"Canada"},{id:132,code:"CV",name:"Cape Verde"},{id:140,code:"CF",name:"Central African Republic"},{id:144,code:"LK",name:"Sri Lanka"},{id:148,code:"TD",name:"Chad"},{id:152,code:"CL",name:"Chile"},{id:156,code:"CN",name:"China"},{id:158,code:"TW",name:"Taiwan"},{id:170,code:"CO",name:"Colombia"},{id:174,code:"KM",name:"Comoros"},{id:178,code:"CG",name:"Congo"},{id:180,code:"CD",name:"Democratic Republic of the Congo"},{id:188,code:"CR",name:"Costa Rica"},{id:191,code:"HR",name:"Croatia"},{id:192,code:"CU",name:"Cuba"},{id:196,code:"CY",name:"Cyprus"},{id:203,code:"CZ",name:"Czech Republic"},{id:204,code:"BJ",name:"Benin"},{id:208,code:"DK",name:"Denmark"},{id:212,code:"DM",name:"Dominica"},{id:214,code:"DO",name:"Dominican Republic"},{id:218,code:"EC",name:"Ecuador"},{id:222,code:"SV",name:"El Salvador"},{id:226,code:"GQ",name:"Equatorial Guinea"},{id:231,code:"ET",name:"Ethiopia"},{id:232,code:"ER",name:"Eritrea"},{id:233,code:"EE",name:"Estonia"},{id:242,code:"FJ",name:"Fiji"},{id:246,code:"FI",name:"Finland"},{id:250,code:"FR",name:"France"},{id:258,code:"PF",name:"French Polynesia"},{id:262,code:"DJ",name:"Djibouti"},{id:266,code:"GA",name:"Gabon"},{id:268,code:"GE",name:"Georgia"},{id:270,code:"GM",name:"Gambia"},{id:276,code:"DE",name:"Germany"},{id:288,code:"GH",name:"Ghana"},{id:296,code:"KI",name:"Kiribati"},{id:300,code:"GR",name:"Greece"},{id:308,code:"GD",name:"Grenada"},{id:320,code:"GT",name:"Guatemala"},{id:324,code:"GN",name:"Guinea"},{id:328,code:"GY",name:"Guyana"},{id:332,code:"HT",name:"Haiti"},{id:336,code:"VA",name:"Holy See (Vatican City State)"},{id:340,code:"HN",name:"Honduras"},{id:344,code:"HK",name:"Hong Kong"},{id:348,code:"HU",name:"Hungary"},{id:352,code:"IS",name:"Iceland"},{id:356,code:"IN",name:"India"},{id:360,code:"ID",name:"Indonesia"},{id:364,code:"IR",name:"Iran"},{id:368,code:"IQ",name:"Iraq"},{id:372,code:"IE",name:"Ireland"},{id:376,code:"IL",name:"Israel"},{id:380,code:"IT",name:"Italy"},{id:384,code:"CI",name:"Cote D'ivoire"},{id:388,code:"JM",name:"Jamaica"},{id:392,code:"JP",name:"Japan"},{id:398,code:"KZ",name:"Kazakhstan"},{id:400,code:"JO",name:"Jordan"},{id:404,code:"KE",name:"Kenya"},{id:408,code:"KP",name:"North Korea"},{id:410,code:"KR",name:"South Korea"},{id:414,code:"KW",name:"Kuwait"},{id:417,code:"KG",name:"Kyrgyzstan"},{id:418,code:"LA",name:"Lao People's Democratic Republic"},{id:422,code:"LB",name:"Lebanon"},{id:426,code:"LS",name:"Lesotho"},{id:428,code:"LV",name:"Latvia"},{id:430,code:"LR",name:"Liberia"},{id:434,code:"LY",name:"Libya"},{id:438,code:"LI",name:"Liechtenstein"},{id:440,code:"LT",name:"Lithuania"},{id:442,code:"LU",name:"Luxembourg"},{id:450,code:"MG",name:"Madagascar"},{id:454,code:"MW",name:"Malawi"},{id:458,code:"MY",name:"Malaysia"},{id:462,code:"MV",name:"Maldives"},{id:466,code:"ML",name:"Mali"},{id:470,code:"MT",name:"Malta"},{id:478,code:"MR",name:"Mauritania"},{id:480,code:"MU",name:"Mauritius"},{id:484,code:"MX",name:"Mexico"},{id:492,code:"MC",name:"Monaco"},{id:496,code:"MN",name:"Mongolia"},{id:498,code:"MD",name:"Moldova"},{id:499,code:"ME",name:"Montenegro"},{id:504,code:"MA",name:"Morocco"},{id:508,code:"MZ",name:"Mozambique"},{id:512,code:"OM",name:"Oman"},{id:516,code:"NA",name:"Namibia"},{id:520,code:"NR",name:"Nauru"},{id:524,code:"NP",name:"Nepal"},{id:528,code:"NL",name:"Netherlands"},{id:540,code:"NC",name:"New Caledonia"},{id:548,code:"VU",name:"Vanuatu"},{id:554,code:"NZ",name:"New Zealand"},{id:558,code:"NI",name:"Nicaragua"},{id:562,code:"NE",name:"Niger"},{id:566,code:"NG",name:"Nigeria"},{id:578,code:"NO",name:"Norway"},{id:583,code:"FM",name:"Micronesia"},{id:584,code:"MH",name:"Marshall Islands"},{id:585,code:"PW",name:"Palau"},{id:586,code:"PK",name:"Pakistan"},{id:591,code:"PA",name:"Panama"},{id:598,code:"PG",name:"Papua New Guinea"},{id:600,code:"PY",name:"Paraguay"},{id:604,code:"PE",name:"Peru"},{id:608,code:"PH",name:"Philippines"},{id:616,code:"PL",name:"Poland"},{id:620,code:"PT",name:"Portugal"},{id:624,code:"GW",name:"Guinea-Bissau"},{id:626,code:"TL",name:"Timor-Leste"},{id:630,code:"PR",name:"Puerto Rico"},{id:634,code:"QA",name:"Qatar"},{id:642,code:"RO",name:"Romania"},{id:643,code:"RU",name:"Russian Federation"},{id:646,code:"RW",name:"Rwanda"},{id:659,code:"KN",name:"Saint Kitts and Nevis"},{id:662,code:"LC",name:"Saint Lucia"},{id:670,code:"VC",name:"Saint Vincent and the Grenadines"},{id:674,code:"SM",name:"San Marino"},{id:678,code:"ST",name:"Sao Tome and Principe"},{id:682,code:"SA",name:"Saudi Arabia"},{id:686,code:"SN",name:"Senegal"},{id:688,code:"RS",name:"Serbia"},{id:690,code:"SC",name:"Seychelles"},{id:694,code:"SL",name:"Sierra Leone"},{id:702,code:"SG",name:"Singapore"},{id:703,code:"SK",name:"Slovakia"},{id:704,code:"VN",name:"Viet Nam"},{id:705,code:"SI",name:"Slovenia"},{id:706,code:"SO",name:"Somalia"},{id:710,code:"ZA",name:"South Africa"},{id:716,code:"ZW",name:"Zimbabwe"},{id:724,code:"ES",name:"Spain"},{id:728,code:"SS",name:"South Sudan"},{id:729,code:"SD",name:"Sudan"},{id:732,code:"EH",name:"Western Sahara"},{id:740,code:"SR",name:"Suriname"},{id:748,code:"SZ",name:"Swaziland"},{id:752,code:"SE",name:"Sweden"},{id:756,code:"CH",name:"Switzerland"},{id:760,code:"SY",name:"Syrian Arab Republic"},{id:762,code:"TJ",name:"Tajikistan"},{id:764,code:"TH",name:"Thailand"},{id:768,code:"TG",name:"Togo"},{id:776,code:"TO",name:"Tonga"},{id:780,code:"TT",name:"Trinidad and Tobago"},{id:784,code:"AE",name:"United Arab Emirates"},{id:788,code:"TN",name:"Tunisia"},{id:792,code:"TR",name:"Turkey"},{id:795,code:"TM",name:"Turkmenistan"},{id:798,code:"TV",name:"Tuvalu"},{id:800,code:"UG",name:"Uganda"},{id:804,code:"UA",name:"Ukraine"},{id:807,code:"MK",name:"Macedonia"},{id:818,code:"EG",name:"Egypt"},{id:826,code:"GB",name:"United Kingdom"},{id:834,code:"TZ",name:"Tanzania"},{id:840,code:"US",name:"United States"},{id:854,code:"BF",name:"Burkina Faso"},{id:858,code:"UY",name:"Uruguay"},{id:860,code:"UZ",name:"Uzbekistan"},{id:862,code:"VE",name:"Venezuela"},{id:882,code:"WS",name:"Samoa"},{id:887,code:"YE",name:"Yemen"},{id:894,code:"ZM",name:"Zambia"}];return{getCountries:t}}angular.module("tg.common").service("DataService",e),e.$inject=["$q"]}(),angular.module("app").controller("DropdownController",["$scope",function(){"use strict"}]),angular.module("app").controller("TabsetController",["$scope",function(){"use strict"}]),function(){"use strict";function e(e,t,a,n,o){e.__typeahead={model1:null,model2:null,model3:[],model4:[]},e.control={typeahead:{attributes:[{name:"tgTypeaheadId",type:"string",description:""},{name:"tgTypeaheadContext",type:"expression",description:""},{name:"tgTypeaheadPlaceholder",type:"string",description:""},{name:"tgTypeaheadTemplateUrl",type:"string",description:"Set custom typeahead template."},{name:"tgTypeaheadLoaderTemplateUrl",type:"string",description:"Set custom typeahead loader template."},{name:"tgTypeaheadPopupTemplateUrl",type:"string",description:"Set custom typeahead popup template."},{name:"tgTypeaheadPopupHeaderTemplateUrl",type:"string",description:"Set custom typeahead popup header template."},{name:"tgTypeaheadPopupFooterTemplateUrl",type:"string",description:"Set custom typeahead popup footer template."},{name:"tgTypeaheadDataSetsHeaderTemplateUrl",type:"string",description:"Set custom typeahead data set header template."},{name:"tgTypeaheadDataSetsItemTemplateUrl",type:"string",description:"Set custom typeahead data set item template."},{name:"tgTypeaheadDataSetsFooterTemplateUrl",type:"string",description:"Set custom typeahead data set footer template."},{name:"tgTypeaheadSuggestedPopupTemplateUrl",type:"string",description:"Set custom typeahead suggested popup template."},{name:"tgTypeaheadSuggestedPopupHeaderTemplateUrl",type:"string",description:"Set custom typeahead suggested popup header template."},{name:"tgTypeaheadSuggestedPopupFooterTemplateUrl",type:"string",description:"Set custom typeahead suggested popup footer template."},{name:"tgTypeaheadPopupAppendToBody",type:"boolean",description:"Should the typeahead popup be appended to $body instead of the parent element? (default: false)"},{name:"tgTypeaheadPopupStrictWidth",type:"boolean",description:""},{name:"tgTypeaheadWrapClass",type:"string",description:""},{name:"tgTypeaheadMinLength",type:"number",description:"The minimal number of characters that needs to be entered before the typeahead kicks in. The default value is set to 1. If set to 0, the typeahead will try to open on focus."},{name:"tgTypeaheadDelay",type:"number",description:"The minimum waiting time (after the last character was typed) before the typeahead kicks in."},{name:"tgTypeaheadSelected",type:"expression",description:"A callback executed when a match is selected."}]}},e.getResultsAsync=function(e,r){var i=t.defer();return n(function(){o.getCountries().then(function(t){t=a("filter")(t,{name:e}),0===t.length&&(r.dataSet.data.noResults=!0),i.resolve(t)})},2e3),i.promise},e.toJson=function(e){return angular.toJson(e,!0)}}angular.module("app").controller("TypeaheadController",e),e.$inject=["$scope","$q","$filter","$timeout","DataService"]}(),function(){"use strict";function e(e,t){return{restrict:"A",require:e,transclude:!0,scope:!1,compile:function(){function e(e,a,n,o,r){t&&o&&o.hasOwnProperty(t)&&o[t]({$attachTo:function(e,t){r(t,function(t){e.append(t)})}})}function a(e,t){t.remove()}return{pre:e,post:a}}}}angular.module("tg.components").run(["$templateCache",function(e){e.put("tg-dropdown.tpl.html",'<div class="btn-group tg-dropdown-wrap" data-ng-class="tgDropdownWrapClass">   <div class="tg-dropdown-button" data-ng-class="{ \'disabled\': tgDropdownDisabled }"        data-ng-click="toggleOpenState($event);">       <button class="tg-dropdown-label overflow">           <span style="font-style: italic" class="muted" data-ng-if="!$selectedItem" data-ng-bind-html="tgDropdownPlaceholder"></span>           <span data-tg-dropdown-render-template="$templates.selectedItem">No Template</span>       </button>       <button class="tg-dropdown-caret fa" data-ng-class="$stateHolder.opened ? \'fa-caret-up\' : \'fa-caret-down\'"></button>   </div>   <div data-tg-dropdown-render-template="$templates.popup"></div>'),e.put("tg-dropdown-popup.tpl.html",'<div class="tg-dropdown-menu" data-ng-class="{ \'tg-dropdown-menu-has-search\': !!tgDropdownSearch }" data-ng-show="$stateHolder.opened">   <input type="text" class="tg-dropdown-menu-search" placeholder="{{ tgDropdownSearchPlaceholder }}"        data-ng-model="$stateHolder.filter"        data-ng-change="applyFilter();">   <ul class="dropdown-menu" data-tg-when-scrolled="onPopupScrolled($event);">       <li data-ng-if="$templates.itemHeader">           <div data-tg-dropdown-render-template="$templates.itemHeader">               No Template           </div>       </li>       <li data-ng-repeat="$item in $dataHolder.filteredItems | limitTo:$stateHolder.limit">           <a href="" data-ng-click="selectItem($item);" data-tg-dropdown-render-template="$templates.item">               No Template           </a>       </li>       <li data-ng-if="$stateHolder.filter && $dataHolder.filteredItems == 0">           <a href="" class="overflow">               No match for "{{ $stateHolder.filter }}"           </a>       </li>   </ul></div>'),e.put("tg-dropdown-stage-popup.tpl.html",'<div class="tg-dropdown-menu" data-ng-show="$stateHolder.opened">   <ul class="tg-dropdown-stage-menu">       <li class="tg-dropdown-stage-menu__item-wrap" data-ng-if="$level > 0">           <button class="fa fa-caret-left tg-dropdown-stage-menu__back" data-ng-click="goBack($item)"></button>           <div class="tg-dropdown-stage-menu__item" data-ng-click="goBack($item);">Back</div>       </li>       <li class="tg-dropdown-stage-menu__item-wrap" data-ng-repeat="$item in $dataHolder.filteredItems">           <div class="fa fa-check tg-dropdown-stage-menu__check" style="visibility: hidden;"></div>           <button class="fa fa-caret-right tg-dropdown-stage-menu__forward" data-ng-click="goForward($item)" data-ng-if="hasChilds($item)"></button>           <div class="tg-dropdown-stage-menu__item" data-ng-click="goForward($item);" data-tg-dropdown-render-template="$templates.item" data-ng-class="{ \'m-selectable\': !hasChilds($item) }">No Template</div>       </li>   </ul></div>')}]).directive("tgDropdown",["$tgComponents","$http","$compile","$parse","$templateCache","$filter","$timeout","$document",function(e,t,a,n,o,r,i,d){return{restrict:"A",require:["tgDropdown","?ngModel"],scope:{tgDropdown:"@",tgDropdownPlaceholder:"@",tgDropdownId:"@",tgDropdownWrapClass:"@",tgDropdownTemplateUrl:"@",tgDropdownPopupTemplateUrl:"@",tgDropdownSearch:"=",tgDropdownSearchPlaceholder:"@",tgDropdownFilterBy:"@",tgDropdownOrderBy:"=",tgDropdownLimitStep:"@",tgDropdownSelected:"@",tgDropdownDisabled:"=",tgDropdownAddEmpty:"@",tgDropdownEmptyText:"@"},compile:function(e,l){function s(e,t){var a={};return m.modelMapper.assign(a,t),m.viewMapper.assign(a,e),a[m.itemName]}function p(e,t,a,o){function d(e){return g[m.itemName]=e,h=m.modelMapper(c,g),g[m.itemName]=null,h}var l=o[0],p=o[1],c=e.$parent,u=null,g={},h=null,f=null,$=e.tgDropdownFilterBy?n(e.tgDropdownFilterBy):null,v=parseInt(e.tgDropdownLimitStep)||9999,T=e.tgDropdownSelected?n(e.tgDropdownSelected):angular.noop;"true"===e.tgDropdownAddEmpty&&(f=s(e.tgDropdownEmptyText||null,null)),e.$external=c,e.$templates={main:e.tgDropdownTemplateUrl||"tg-dropdown.tpl.html",popup:e.tgDropdownPopupTemplateUrl||"tg-dropdown-popup.tpl.html",selectedItem:null,itemHeader:null,item:null},e.$stateHolder={opened:!1,limit:v,filter:""},e.$dataHolder={filteredItems:[]},e.$selectedItem=f,e.openPopup=function(){e.$stateHolder.filter="",e.$dataHolder.filteredItems=e.getSource(),e.$dataHolder.filteredItems&&0!==e.$dataHolder.filteredItems.length&&(e.$stateHolder.opened=!0,e.$stateHolder.limit=v,i(function(){e.updateMenu()}))},e.closePopup=function(){e.$stateHolder.opened=!1,e.$stateHolder.limit=v},e.onPopupScrolled=function(){var t=e.$stateHolder.limit+v;t>e.$dataHolder.filteredItems.length&&(t=e.$dataHolder.filteredItems.length),v>t&&(t=v),e.$stateHolder.limit=t},e.toggleOpenState=function(t){e.tgDropdownDisabled||(e.$stateHolder.opened?e.closePopup():e.openPopup()),t.preventDefault()},e.getSource=function(){return u},e.applyFilter=function(){e.$stateHolder.limit=v,e.$dataHolder.filteredItems=r("filter")(u,$({$filter:e.$stateHolder.filter}))},e.refreshSource=function(){if(u=m.source(c),u&&(u&&u.length>0&&e.tgDropdownOrderBy&&(u=r("orderBy")(u,e.tgDropdownOrderBy)),f)){var t=!1;for(var a in u)if(null===d(u[a])){t=!0;break}t||u.unshift(angular.copy(f))}},e.selectItem=function(t){var a=e.selectItemEventPrepare(t);l.trigger("onItemSelecting",a).then(function(){e.closePopup(),t&&(e.hasSelectedAnyItem=!0),e.$selectedItem=t,p&&(h=d(t),p.$setViewValue(h)),l.trigger("onItemSelected",a),T(c,a)})},e.selectItemEventPrepare=function(e){var t={$item:e};return t},e.updateMenu=function(){var a=t.find(".dropdown-menu");if(a.length>0){var n=t.find(".tg-dropdown-menu");n.css("width",a.get(0).offsetWidth),a.scrollTop(0),e.tgDropdownSearch&&n.find("input.tg-dropdown-menu-search").focus()}},e.updateSelectedItemFromModel=function(t,a){if(void 0===t&&null!==f&&(t=null),e.$selectedItem=null,void 0!==t&&a(e.$selectedItem)!==t)for(var n in u)if(angular.equals(a(u[n]),t)){e.$selectedItem=u[n];break}return null!==e.$selectedItem?t:null},p&&p.$formatters.push(function(t){return e.updateSelectedItemFromModel(t,d)}),e.refreshSource()}function c(e,n){t.get(e.$templates.main,{cache:o}).success(function(t){n.append(a(t.trim())(e))});var r=!1,l=function(){r||i(function(){e.closePopup()}),r=!1};d.on("click",l),n.on("click",function(){r=!0}),e.$on("$destroy",function(){d.off("click",l)})}var u=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/,g=l.tgDropdown.match(u);if(!g)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+l.tgDropdown+"'.");var m={itemName:g[3],source:n(g[4]),viewMapper:n(g[2]||g[1]),modelMapper:n(g[1])};return{pre:p,post:c}},controller:["$scope","$element","$attrs",function(t,a,n){var o=this;o.$type="tgDropdown",o.$name=t.tgDropdownId?t.tgDropdownId:o.$type+"_"+t.$id,o.$scope=t,o.$element=a,o.$attrs=n,o.$supportEvents=!0,this.$setSelectedItemTemplate=function(e){t.$templates.selectedItem=e},this.$setItemHeaderTemplate=function(e){t.$templates.itemHeader=e},this.$setItemTemplate=function(e){t.$templates.item=e},this.refreshSource=function(){t.refreshSource()},this.selectItem=function(e){t.selectItem(e)},this.$overrideFn=function(e,a){var n=t[e]||angular.noop;t[e]=function(){var e,t=this.$baseFn;return this.$baseFn=n,e=a.apply(this,arguments),this.$baseFn=t,e}},e.$addInstance(o),t.$on("$destroy",function(){e.$removeInstance(o)})}]}}]).directive("tgDropdownRenderTemplate",["$http","$compile","$parse","$templateCache",function(e,t,a,n){return{restrict:"A",scope:!1,compile:function(){function o(o,r,i){var d=a(i.tgDropdownRenderTemplate)(o);angular.isString(d)?(r.html(null),e.get(d,{cache:n}).success(function(e){r.append(t(e.trim())(o))})):angular.isObject(d)&&(r.html(null),d.$attachTo(r,o))}return{pre:null,post:o}}}}]).directive("tgDropdownSelectedItemTemplate",[function(){return e("^?tgDropdown","$setSelectedItemTemplate")}]).directive("tgDropdownItemHeaderTemplate",[function(){return e("^?tgDropdown","$setItemHeaderTemplate")}]).directive("tgDropdownItemTemplate",[function(){return e("^?tgDropdown","$setItemTemplate")}]).directive("tgDropdownStage",[function(){return{restrict:"A",require:"tgDropdown",scope:!1,compile:function(){function e(e,t,a,n){e=n.$scope,e.$templates.popup=e.tgDropdownPopupTemplateUrl||"tg-dropdown-stage-popup.tpl.html",e.$paths=[],e.$level=0,n.$overrideFn("openPopup",function(){if(this.$baseFn(),e.$selectedItem){var t=e.collectPaths(e.$selectedItem),a=t.length-1;a>=0?(e.$level=a+1,e.selectItem(t[a])):e.goRoot()}else e.$level=0}),n.$overrideFn("selectItem",function(t){e.hasChilds(t)?e.$dataHolder.filteredItems=t.childs:(e.$paths=e.collectPaths(t),this.$baseFn(t))}),n.$overrideFn("selectItemEventPrepare",function(t){var a=this.$baseFn(t);return a.$paths=e.$paths,a}),n.$overrideFn("updateSelectedItemFromModel",function(t,a){if(void 0!==t&&a(e.$selectedItem)!==t){var n,o=function(r){if(Array.isArray(r))for(var i=0,d=r.length;d>i;i++){if(n=r[i],a(n)===t)return n;if(e.hasChilds(n)&&(n=o(n.childs)))return n}};e.$selectedItem=o(e.getSource())||null,e.$selectedItem&&(e.$paths=e.collectPaths(e.$selectedItem))}return null!==e.$selectedItem?t:null}),e.hasChilds=function(e){return e.hasOwnProperty("childs")&&Array.isArray(e.childs)&&e.childs.length>0},e.goRoot=function(){e.$level=0,e.$dataHolder.filteredItems=e.getSource()},e.goForward=function(t){e.$level=e.getItemLevel(t)+1,e.$level>=0?e.selectItem(t):e.goRoot()},e.goBack=function(t){var a=e.collectPaths(t),n=a.length-2;n>=0?(e.$level=n+1,e.selectItem(a[n])):e.goRoot()},e.collectPaths=function(t){var a=[],n=null,o=function(r){var i,d;if(Array.isArray(r))for(i=0,d=r.length;d>i;i++){if(n=r[i],n===t)return n;if(e.hasChilds(n)&&(n=o(n.childs)))return a.unshift(r[i]),n}};return o(e.getSource()),a},e.getItemLevel=function(t){var a=-1,n=null,o=function(r){if(Array.isArray(r))for(var i=0,d=r.length;d>i;i++){if(n=r[i],n===t)return a++,n;if(e.hasChilds(n)&&(n=o(n.childs)))return a++,n}};return o(e.getSource()),a},n.getPaths=function(){return e.$paths}}return{pre:e,post:null}}}}])}(),function(){"use strict";function e(e){return e.replace(t,"\\$1")}var t=/([.?*+^$[\]\\(){}|-])/g;angular.module("tg.components").filter("tgHighlight",[function(){return function(t,a){if(a){var n=new RegExp(e(a),"gi");return t.replace(n,"<strong>$&</strong>")}return t}}]).directive("tgHighlightHtml",["$timeout","$compile",function(t,a){return{restrict:"A",scope:!1,compile:function(){return{pre:angular.noop,post:function(n,o,r){if(r.tgHighlightHtml){var i=e(r.tgHighlightHtml)+"(?!([^<]+)?>)",d=new RegExp(i,"gi");t(function(){o.html(function(e,t){return a(t.replace(d,"<strong>$&</strong>"))(n)})})}}}}}}])}(),function(){"use strict";angular.module("tg.components").run(["$templateCache",function(e){e.put("tg-tabset.tmpl.html",'<div class="tabbable" data-ng-class="tgTabsetWrapClass">   <ul class="nav nav-tabs">       <li data-ng-repeat="$tab in $tabs"           data-ng-class="{ \'active\': isActiveTab($tab), \'disabled\': $tab.disabled }">           <a href="" data-ng-click="setActiveTab($tab);">               <span data-tg-tabset-render-template="$tab.template.header">{{ $tab.title || \'&nbsp;\' }}</span>           </a>       </li>   </ul>   <div class="tab-content" data-ng-repeat="$tab in $tabs">       <div class="tab-pane"            data-ng-if="$tab.initiated"            data-tg-tabset-render-template="$tab.template.content"            data-ng-class="{ \'active\': isActiveTab($tab) }"></div>   </div></div>')}]).directive("tgTabset",["$tgComponents","$http","$compile","$parse","$templateCache","$q",function(e,t,a,n,o,r){return{restrict:"A",scope:{tgTabset:"=?",tgTabsetId:"@",tgTabsetTemplateUrl:"@",tgTabsetWrapClass:"@",tgTabsetActiveTab:"@",tgTabsetContext:"@"},compile:function(){return function(e,r){var i=e.$parent,d=e.tgTabset;e.$tabs=d.$tabs,e.setActiveTab=function(e){d.setActiveTab(e)},e.isActiveTab=function(e){return e&&d.getActiveTab()===e};var l=n(e.tgTabsetTemplateUrl)(i)||"tg-tabset.tmpl.html";t.get(l,{cache:o}).success(function(t){var n=a(t.trim())(e);r.prepend(n)})}},controller:["$scope","$element","$attrs",function(t,a,o){function i(e){for(var t in l)if(l[t].name===e)return!1;return!0}this.$type="tgTabset",this.$name=t.tgTabsetId?t.tgTabsetId:this.$type+"_"+t.$id,this.$scope=t,this.$element=a,this.$attrs=o,this.$supportEvents=!0;var d=this,l=this.$tabs=[],s=null,p=t.tgTabsetActiveTab;t.tgTabset=d,this.context=n(t.tgTabsetContext)(t.$parent)||{},this.getActiveTab=function(){return s},this.setActiveTab=function(e){var t=r.defer();if(!e||-1===l.indexOf(e))throw t.reject(),new Error("Invalid tab.");if(e===s||e.disabled)t.reject();else{e.refreshContext(!1);var a=function(){var a={tab:e,activeTab:s};d.trigger("$onTabSelecting",a).then(function(){e.initiated=!0,e.autoRefresh&&e.refresh(),s&&(a={tab:s},d.trigger("$onTabDeselected",a)),s=e,a={tab:s},d.trigger("$onTabSelected",a),t.resolve()}).catch(function(){t.reject()})};if(s){var n={tab:s};d.trigger("$onTabDeselecting",n).then(function(){a()}).catch(function(){t.reject()})}else a()}return t.promise},this.addTab=function(e){if(!i(e.name))throw new Error("Tab with name `"+e.name+"` was already added to tabset.");var t={tab:e};d.trigger("$onTabAdding",t).then(function(){l.push(e),d.trigger("$onTabAdded",t),e.name===p&&d.setActiveTab(e)})},this.getTabByIndex=function(e,t){var a=l.length;if(e>=0||a>e)return l[e];if(t)throw new Error("Invalid tab index.");return null},this.getTabByName=function(e,t){for(var a in l)if(l[a].name===e)return l[a];if(t)throw new Error("Invalid tab name.");return null},this.setDefaultTab=function(e){p=e},e.$addInstance(this),t.$on("$destroy",function(){e.$removeInstance(d)})}]}}]).directive("tgTabsetRenderTemplate",["$http","$compile","$parse","$templateCache",function(e,t,a,n){return{restrict:"A",scope:!1,compile:function(){function o(o,r,i){var d=a(i.tgTabsetRenderTemplate)(o);d&&angular.isObject(d)&&(d.hasOwnProperty("templateUrl")?(r.html(null),e.get(d.templateUrl,{cache:n}).success(function(e){var a=t(e.trim());r.append(a(d.scope))})):d.hasOwnProperty("$attachTo")&&(r.html(null),d.$attachTo(r,o,null)))}return{pre:null,post:o}}}}]).directive("tgTab",["$parse",function(e){return{restrict:"A",require:"^tgTabset",transclude:!0,scope:{tgTab:"@",tgTabTitle:"@",tgTabContext:"@",tgTabInitiated:"@",tgTabDisabled:"@",tgTabAutoRefresh:"@",tgTabIsolated:"@",tgTabTemplateUrl:"@"},compile:function(){function e(e,t,a,n,o){var r=null,i=e.$tab;i.template.content.$attachTo=function(t,a){var d={tab:i};n.trigger("$onTabAttaching",d).then(function(){r=t;var l="true"===e.tgTabIsolated?a:e.$parent.$new();l.$external=e.$parent,l.$tabset=n,l.$tab=i,o(l,function(e){t.append(e)}),n.trigger("$onTabAttached",d)})},i.refresh=function(){if(i.initiated&&r){var e={tab:i};n.trigger("$onTabRefreshing",e).then(function(){r.html(null),i.$attachTo(r),n.trigger("$onTabRefreshed",e)})}},n.addTab(i),a.$observe("tgTabTitle",function(e){i.title=e}),t.remove()}return{pre:e,post:null}},controller:["$scope","$element","$attrs",function(t){var a=e(t.tgTabContext);t.$tab={name:t.tgTab,title:t.tgTabTitle,template:{header:t.tgTabTemplateUrl?{templateUrl:t.tgTabTemplateUrl,scope:t.$parent}:null,content:{}},context:null,initiated:"true"===t.tgTabInitiated,disabled:"true"===t.tgTabDisabled,autoRefresh:"true"===t.tgTabAutoRefresh,refreshContext:function(e){var n=a(t.$parent)||{};e===!1&&(n=angular.extend(n,this.context)),this.context=n}},t.$tab.refreshContext()}]}}])}(),function(){"use strict";function e(e,t){return{restrict:"A",require:e,transclude:!0,scope:!1,compile:function(){function e(e,a,n,o,r){t&&o&&o.hasOwnProperty(t)&&o[t]({$attachTo:function(e,t){r(t,function(t){e.append(t)})}})}function a(e,t){t.remove()}return{pre:e,post:a}}}}angular.module("tg.components").run(["$templateCache",function(e){e.put("tg-typeahead.tpl.html",'<div class="tg-typeahead"     ng-class="tgTypeaheadWrapClass">   <div class="tg-typeahead__input-container"        ng-show="$isVisibleInput()">       <a href="" class="tg-typeahead__clear-link"          ng-show="$isVisibleClear()"          ng-click="$clear($event);">Delete All</a>       <div class="tg-typeahead__input-wrap">           <input type="text" class="tg-typeahead__input"              placeholder="{{ $getPlaceholder() }}"              ng-model="$term"              ng-disabled="$stateHolder.disabled">       </div>   </div>   <div tg-typeahead-render-template="$templates.loader"></div>   <div class="tg-typeahead__suggestions-wrap"        tg-typeahead-render-template="$templates.popup.container"        tg-typeahead-render-template-to-body="$templates.popup.appendToBody"        tg-typeahead-render-template-callback="$onTemplateRender([$element], \'popup\');"></div>   <div class="tg-typeahead__suggestions-wrap"        ng-if="$stateHolder.hasSuggestions"        tg-typeahead-render-template="$templates.suggestedPopup.container"        tg-typeahead-render-template-to-body="$templates.suggestedPopup.appendToBody"        tg-typeahead-render-template-callback="$onTemplateRender([$element], \'suggestedPopup\');"></div></div>'),e.put("tg-typeahead-loader.tpl.html",'<div class="input-loader tg-typeahead__loader"     ng-show="$stateHolder.loader"></div>'),e.put("tg-typeahead-popup.tpl.html",'<ul class="tg-typeahead__suggestions"    ng-if="$stateHolder.popup.opened"    ng-style="$templates.popup.style">    <li class="tg-typeahead__suggestions-header"        tg-typeahead-render-template="$templates.popup.header"></li>    <li class="tg-typeahead__suggestions-container"        tg-when-scrolled="$onPopupScrolled($event);">        <div ng-repeat="$dataSet in $dataSets | filter:{ queried: { active: true } }">            <div class="tg-typeahead__suggestions-group-header"                 tg-typeahead-render-template="$dataSet.templates.header || $templates.dataSet.header"></div>            <ul class="tg-typeahead__suggestions-group">                <li class="tg-typeahead__suggestions-group-item"                    ng-repeat="$match in $dataSet.queried.matches | limitTo:$dataSet.queried.limit"                    ng-class="{ active: $index === $dataSet.queried.activeIndex, selected: $match.selected, disabled: $match.disabled }"                    ng-mouseenter="$setActiveMatch($dataSet, $index);"                    ng-mouseleave="$dataSet.queried.activeIndex = -1;"                    ng-mousedown="!$match.disabled && $selectMatch($dataSet, $index, $match, $event);">                    <div tg-typeahead-render-template="$dataSet.templates.item || $templates.dataSet.item"></div>                </li>            </ul>            <div class="tg-typeahead__suggestions-group-footer"                tg-typeahead-render-template="$dataSet.templates.footer || $templates.dataSet.footer"></div>        </div>    </li>    <li class="tg-typeahead__suggestions-footer"        tg-typeahead-render-template="$templates.popup.footer"></li></ul>'),e.put("tg-typeahead-dataSet-item.tpl.html",'<span ng-bind-html="$match.value | tgTrustedHtml"></span>'),e.put("tg-typeahead-suggested-popup.tpl.html",'<ul class="tg-typeahead__suggestions"    ng-if="$stateHolder.suggestedPopup.opened"    ng-style="$templates.suggestedPopup.style">    <li class="tg-typeahead__suggestions-header"        tg-typeahead-render-template="$templates.suggestedPopup.header"></li>    <li class="tg-typeahead__suggestions-container"        tg-when-scrolled="$onPopupScrolled($event);">        <div ng-repeat="$dataSet in $dataSets | filter:{ suggested: { active: true } }">            <div class="tg-typeahead__suggestions-group-header"                 tg-typeahead-render-template="$dataSet.templates.header || $templates.dataSet.header"></div>            <ul class="tg-typeahead__suggestions-group">                <li class="tg-typeahead__suggestions-group-item"                    ng-repeat="$match in $dataSet.suggested.matches | limitTo:$dataSet.suggested.limit"                    ng-class="{ active: $index === $dataSet.suggested.activeIndex, selected: $match.selected, disabled: $match.disabled }"                    ng-mouseenter="$setActiveMatch($dataSet, $index);"                    ng-mouseleave="$dataSet.suggested.activeIndex = -1;"                    ng-mousedown="!$match.disabled && $selectMatch($dataSet, $index, $match, $event);">                    <div tg-typeahead-render-template="$dataSet.templates.item || $templates.dataSet.item"></div>                </li>            </ul>            <div class="tg-typeahead__suggestions-group-footer"                tg-typeahead-render-template="$dataSet.templates.footer || $templates.dataSet.footer"></div>        </div>    </li>    <li class="tg-typeahead__suggestions-footer"        tg-typeahead-render-template="$templates.suggestedPopup.footer"></li></ul>'),e.put("tg-typeahead-suggested-dataSet-item.tpl.html",'<span ng-bind-html="$match.value | tgTrustedHtml"></span>'),e.put("tg-typeahead-tag-manager.tpl.html",'<div class="tg-typeahead__tab-manager">   <div ng-repeat="$tag in $tags">       <div tg-typeahead-render-template="$templates.tag"></div>   </div></div>'),e.put("tg-typeahead-tag.tpl.html",'<div class="tg-typeahead__tag">    <span class="tg-typeahead__tag-remove fa fa-times" rel="tooltip"       tooltip-placement="right"       tooltip-html-unsafe="delete"       ng-click="removeTag($tag)"></span>    <span class="tg-typeahead__tag-name" ng-bind-html="$tag.match.value | tgTrustedHtml"></span></div>'),e.put("tg-typeahead-filter-manager.tpl.html",'<div class="tg-typeahead__tab-manager">   <div ng-repeat="$filterTag in $filters.tags">       <div tg-typeahead-render-template="$templates.filterTag"></div>   </div></div>'),e.put("tg-typeahead-filter-tag.tpl.html",'<div class="tg-typeahead__tag-wrap">    <div style="display: table-cell; vertical-align: top;" ng-switch="!!$filterTag.match">        <div class="tg-typeahead__tag-filter" ng-switch-when="true" ng-bind-html="$filterTag.filter.value | tgTrustedHtml"></div>        <select class="tg-typeahead__tag-filter"                ng-model="$filterTag.filter"                ng-change="$onFilterTypeSelect($filterTag, $filterTag.filter);"                ng-options="filter.value for filter in $filterTag.filters track by filter.type"                ng-switch-default=""></select>    </div>    <div class="tg-typeahead__tag" style="display: table-cell; vertical-align: top;" ng-show="$filterTag.match !== null">       <span class="tg-typeahead__tag-remove fa fa-times" rel="tooltip"             tooltip-placement="right"             tooltip-html-unsafe="delete"             ng-click="removeFilterTag($filterTag)"></span>       <span class="tg-typeahead__tag-name" ng-bind-html="$filterTag.match | tgTrustedHtml"></span>    </div></div>')
}]).directive("tgTypeahead",["$tgComponents","$injector","$http","$compile","$parse","$templateCache","$q","$timeout","$document",function(e,t,a,n,o,r,i,d,l){return{restrict:"A",require:["tgTypeahead","?ngModel"],scope:{tgTypeahead:"@",tgTypeaheadId:"@",tgTypeaheadContext:"=",tgTypeaheadPlaceholder:"@",tgTypeaheadTemplateUrl:"@",tgTypeaheadLoaderTemplateUrl:"@",tgTypeaheadPopupTemplateUrl:"@",tgTypeaheadPopupHeaderTemplateUrl:"@",tgTypeaheadPopupFooterTemplateUrl:"@",tgTypeaheadDataSetsHeaderTemplateUrl:"@",tgTypeaheadDataSetsItemTemplateUrl:"@",tgTypeaheadDataSetsFooterTemplateUrl:"@",tgTypeaheadSuggestedPopupTemplateUrl:"@",tgTypeaheadSuggestedPopupHeaderTemplateUrl:"@",tgTypeaheadSuggestedPopupFooterTemplateUrl:"@",tgTypeaheadPopupAppendToBody:"@",tgTypeaheadPopupStrictWidth:"@",tgTypeaheadWrapClass:"@",tgTypeaheadDisplayClean:"@",tgTypeaheadMinLength:"=?",tgTypeaheadDelay:"=?",tgTypeaheadSelected:"@"},priority:4,compile:function(e,s){function p(e){return e&&e.hasOwnProperty("then")&&angular.isFunction(e.then)}function c(e,t,a,n){function r(t){var a=e.$dataHolder.collectedPromises;return e.$dataSets.forEach(function(n){n.data={},n.queried.matches.length=0,n.queried.$hideMore();var o={$queried:!0,$viewValue:t,$internal:e,$context:angular.extend({dataSet:n},e.$prepareSourceContext()||{})},r={},d=n.queried.source,l=d.itemName,s=d.viewMapper,c=d.modelMapper,g=d.sourceMapper,m=g(u,o),h=p(m)?m:i.when(m);h.then(function(a){if(e.$term===t){var o=a;angular.forEach(o,function(e){r[l]=e;var t=new f(e,c(u,r),s(u,r));n.queried.matches.push(t)})}}),a.push(h)}),a}function l(){var t=e.$dataHolder.collectedPromises;return e.$dataSets.forEach(function(a){if(a.suggested&&a.suggested.source){a.data={},a.suggested.matches.length=0,a.suggested.$hideMore();var n={$suggested:!0,$internal:e,$context:angular.extend({dataSet:a},e.$prepareSourceContext()||{})},o={},r=a.suggested.source,d=r.itemName,l=r.viewMapper,s=r.modelMapper,c=r.sourceMapper,g=c(u,n),m=p(g)?g:i.when(g);m.then(function(e){var t=e;angular.forEach(t,function(e){o[d]=e;var t=new $(e,s(u,o),l(u,o));a.suggested.matches.push(t)})}),t.push(m)}}),t}function s(){e.$dataHolder.collectedPromises.length=0}function c(){var t,a=e.$stateHolder.popup.opened,n=e.$stateHolder.suggestedPopup.opened;if(a?t=e.$templates.popup.element:n&&(t=e.$templates.suggestedPopup.element),t){var o=t.find(".tg-typeahead__suggestions-container"),r=o.get(0);if(r&&r.clientHeight<r.scrollHeight){var i=t.find(".tg-typeahead__suggestions-group-item.active"),d=i.get(0);if(d){var l=r.getBoundingClientRect(),s=d.getBoundingClientRect();s.top<l.top?r.scrollTop+=s.top-l.top:s.bottom>l.bottom&&(r.scrollTop+=s.bottom-l.bottom)}}}}var u=e.$external=e.$parent,v=n[0],T=n[1];e.selectedDataSet=null,e.$dataSets=[],e.$term=null,e.$templates={main:e.tgTypeaheadTemplateUrl||"tg-typeahead.tpl.html",popup:{appendToBody:"true"===e.tgTypeaheadPopupAppendToBody,strictWidth:"false"!==e.tgTypeaheadPopupStrictWidth,style:{},element:null,container:e.tgTypeaheadPopupTemplateUrl||"tg-typeahead-popup.tpl.html",header:e.tgTypeaheadPopupHeaderTemplateUrl||null,footer:e.tgTypeaheadPopupFooterTemplateUrl||null},suggestedPopup:{appendToBody:"true"===e.tgTypeaheadPopupAppendToBody,strictWidth:"false"!==e.tgTypeaheadPopupStrictWidth,style:{},element:null,container:e.tgTypeaheadSuggestedPopupTemplateUrl||"tg-typeahead-suggested-popup.tpl.html",header:e.tgTypeaheadSuggestedPopupHeaderTemplateUrl||null,footer:e.tgTypeaheadSuggestedPopupFooterTemplateUrl||null},loader:e.tgTypeaheadLoaderTemplateUrl||"tg-typeahead-loader.tpl.html",dataSet:{header:e.tgTypeaheadDataSetsHeaderTemplateUrl||null,item:e.tgTypeaheadDataSetsItemTemplateUrl||"tg-typeahead-dataSet-item.tpl.html",footer:e.tgTypeaheadDataSetsFooterTemplateUrl||null}},e.$stateHolder={loader:!1,disabled:!1,popup:{opened:!1},hasSuggestions:!1,suggestedPopup:{opened:!1}},e.$dataHolder={collectedPromises:[],modelValue:null},e.$eventHolder={onMatchSelected:o(e.tgTypeaheadSelected)},e.getDataSetSource=function(t){if(t){var a=e.$stateHolder.popup.opened;return a?t.queried:t.suggested}},e.selectDataSet=function(a,n){var o;e.$dataSets.forEach(function(t){o=e.getDataSetSource(t),o&&(o.$hideMore(),o.active=!a)}),e.selectedDataSet=a,e.selectedDataSet&&(o=e.getDataSetSource(e.selectedDataSet),o.$showMore(),o.active=!0),t.find(".tg-typeahead__suggestions-container").scrollTop(),n&&n.stopPropagation()},e.$openPopup=function(){e.$stateHolder.popup.opened||(e.$stateHolder.popup.opened=!0,e.selectDataSet(null),e.$setActiveMatch(null,-1),e.updatePopupElement(e.$templates.popup))},e.$openSuggestedPopup=function(){e.$stateHolder.suggestedPopup.opened||(e.$stateHolder.suggestedPopup.opened=!0,e.selectDataSet(null),e.$setActiveMatch(null,-1),e.updatePopupElement(e.$templates.suggestedPopup))},e.$closePopup=function(){e.$stateHolder.popup.opened&&(e.$stateHolder.popup.opened=!1),e.$stateHolder.suggestedPopup.opened&&(e.$stateHolder.suggestedPopup.opened=!1),e.$cancelAllRequests()},e.$isVisibleInput=function(){return!0},e.$getPlaceholder=function(){return e.tgTypeaheadPlaceholder||""},e.$isVisibleClear=function(){return"true"===e.tgTypeaheadDisplayClean&&e.$term},e.$clear=function(){e.$clearTypeahead()},e.$updateInputElement=function(){},e.$prepareSourceContext=function(){},e.$resolveSources=function(t){e.$cancelAllRequests(),e.$stateHolder.loader=!0,i.all(r(t)).then(function(){e.$dataHolder.collectedPromises.length>0&&(s(),e.$openPopup())},function(){e.$cancelAllRequests()}).finally(function(){e.$stateHolder.loader=!1})},e.$resolveSuggestedSources=function(){e.$cancelAllRequests(),e.$stateHolder.loader=!0,i.all(l()).then(function(){e.$dataHolder.collectedPromises.length>0&&(s(),e.$openSuggestedPopup())},function(){e.$cancelAllRequests()}).finally(function(){e.$stateHolder.loader=!1})},e.$cancelAllRequests=function(){e.$stateHolder.loader=!1;var t=e.$dataHolder.collectedPromises;t.length>0&&(t.forEach(function(e){e.hasOwnProperty("cancelRequest")&&e.cancelRequest()}),s())},e.$clearTypeahead=function(){e.$term=null},e.$setActiveMatch=function(t,a){var n;e.$dataSets.forEach(function(o){n=e.getDataSetSource(o),n&&(n.activeIndex=o===t?a:-1)})},e.$selectMatch=function(t,a,n){var o={context:e.tgTypeaheadContext,dataSet:t,index:a,match:n};v.trigger("onMatchSelecting",o).then(function(){e.$term=o.match.value,e.$applyMatch(t,o.match.model),v.trigger("onMatchSelected",o),e.$eventHolder.onMatchSelected(u,o)}),e.$closePopup()},e.$selectUnknownMatch=function(t,a){e.$selectMatch(t,-1,a)},e.$applyMatch=function(t,a){var n=a;e.$dataSets.length>1&&(n=e.$getModel()||{},e.$dataSets.forEach(function(e){n[e.name]=e===t?a:null})),e.$setModel(n)},e.$prepareDefaultModel=function(){var t=e.$dataSets.length>1,a=null;return t&&(a={},e.$dataSets.forEach(function(e){a[e.name]=null})),a},e.$prepareModel=function(t){if(void 0===t)return e.$prepareDefaultModel();var a=null,n=1===e.$dataSets.length,o=e.$dataSets.length>1;if(n?a=e.$dataSets[0]:o&&(t&&!Array.isArray(t)&&angular.isObject(t)||(t={}),e.$dataSets.forEach(function(e){t.hasOwnProperty(e.name)||(t[e.name]=null),null!==t[e.name]&&void 0!==t[e.name]&&(a=e)})),null!==a){var r={},i=a.queried.source.itemName,d=a.queried.source.viewMapper;r[i]=n?t:t[a.name],e.$term=d(e.$parent,r)}return t},e.$getModel=function(){return m?m(u):void 0},e.$setModel=function(t,a){e.$dataHolder.modelValue=t,!a&&T&&T.$setViewValue(null),h&&h(u,t)},e.$waitTill=function(t){t&&t.hasOwnProperty("finally")&&(e.$closePopup(),e.$stateHolder.loader=!0,e.$stateHolder.disabled=!0,t.finally(function(){e.$stateHolder.loader=!1,e.$stateHolder.disabled=!1}))},e.$onPopupScrolled=function(){if(e.selectedDataSet){var t=e.getDataSetSource(e.selectedDataSet);t.$showMore()}},e.$onOutsideClick=function(){null===e.$dataHolder.modelValue&&e.$clearTypeahead(),e.$closePopup()},e.$onTemplateRender=function(t,a){switch(a){case"popup":e.$templates.popup.element=t[0];break;case"suggestedPopup":e.$templates.suggestedPopup.element=t[0]}},e.$onKeyDown=function(t){var a=e.$stateHolder.popup.opened,n=e.$stateHolder.suggestedPopup.opened;if((a||n)&&-1!==g.indexOf(t.which)){var o,r=null,i=null,l=null;if(e.selectedDataSet?r=e.selectedDataSet:(e.$dataSets.forEach(function(t){o=e.getDataSetSource(t),o&&-1!==o.activeIndex?r=t:r?r&&!l&&(l=t):i=t}),r||(r=e.$dataSets[0])),t.preventDefault(),o=e.getDataSetSource(r),40===t.which){var s=Math.min(o.limit,o.matches.length);if(o.activeIndex+1<s)o.activeIndex++;else{if(!l)return;e.$setActiveMatch(l,0)}d(c),e.$digest()}else if(38===t.which){if(o.activeIndex>0)o.activeIndex--;else{if(!i)return;if(o=e.getDataSetSource(i)){var s=Math.min(o.limit,o.matches.length);e.$setActiveMatch(i,s-1)}}d(c),e.$digest()}else 13===t.which?null!==r&&(e.$selectMatch(r,o.activeIndex,o.matches[o.activeIndex]),e.$apply()):27===t.which&&(e.$clearTypeahead(),e.$closePopup(),e.$digest())}},e.$trigger=v.trigger.bind(v)}function u(e,t,o,i){var s=i[0],p=e.tgTypeaheadMinLength||0,c=e.tgTypeaheadDelay||500,u=null,g=null,m=null;e.updatePopupElement=function(e){var a=e.style;if(e.appendToBody){var n=t.offset(),o=t.outerHeight(!0);a.position="absolute",a.top=n.top+o+1,a.left=n.left}e.strictWidth&&(a.width=t.innerWidth(),a.boxSizing="border-box")},a.get(e.$templates.main,{cache:r}).success(function(a){t.append(n(a.trim())(e)),g=t.find(".tg-typeahead__input"),g.on("click",function(){var t=e.$stateHolder.popup.opened;e.$closePopup(),e.$stateHolder.hasSuggestions&&!t&&e.$resolveSuggestedSources()}),m=g.controller("ngModel"),m.$parsers.unshift(function(t){return t=t||"",u&&d.cancel(u),e.$closePopup(),e.$applyMatch(null,null),t.length>=p&&(u=d(function(){e.$term&&e.$resolveSources(t)},c)),t}),s.trigger("onTemplateInit",{element:t})});var h=function(a){if(0===t.has(a.target).length){var n=e.$templates.popup.element,o=e.$templates.suggestedPopup.element;(n&&0===n.has(a.target).length||o&&0===o.has(a.target).length)&&(e.$onOutsideClick(),e.$digest())}},f=function(t){e.$onKeyDown(t)};l.on("click",h),l.on("keydown",f),e.$on("$destroy",function(){l.off("click",h),l.off("keydown",f)});var $=e.$prepareModel(e.$getModel());e.$setModel($,!0)}var g=[9,13,27,38,40],m=o(s.ngModel),h=m.assign,f=t.get("tgTypeaheadMatchModel"),$=t.get("tgTypeaheadSuggestedMatchModel");return{pre:c,post:u}},controller:["$scope","$element","$attrs",function(t,a,n){var o=this;o.$type="tgTypeahead",o.$name=t.tgTypeaheadId?t.tgTypeaheadId:o.$type+"_"+t.$id,o.$scope=t,o.$element=a,o.$attrs=n,o.$supportEvents=!0,this.$setPopupHeaderTemplate=function(e){t.$templates.popup.header=e},this.$setPopupFooterTemplate=function(e){t.$templates.popup.footer=e},this.$setSuggestedPopupHeaderTemplate=function(e){t.$templates.suggestedPopup.header=e},this.$setSuggestedPopupFooterTemplate=function(e){t.$templates.suggestedPopup.footer=e},this.$addDataSet=function(e){t.$dataSets.push(e),e.suggested&&(t.$stateHolder.hasSuggestions=!0)},this.$overrideFn=function(e,a){var n=t[e]||angular.noop;t[e]=function(){var e,t=this.$baseFn;return this.$baseFn=n,e=a.apply(this,arguments),this.$baseFn=t,e}},this.clear=function(){t.$clearTypeahead()},e.$addInstance(o),t.$on("$destroy",function(){e.$removeInstance(o)})}]}}]).directive("tgTypeaheadDataSet",["$injector","$parse",function(e,t){return{restrict:"A",require:"^tgTypeahead",scope:{tgTypeaheadDataSet:"@",tgTypeaheadDataSetName:"@",tgTypeaheadDataSetHeaderTemplateUrl:"@",tgTypeaheadDataSetItemTemplateUrl:"@",tgTypeaheadDataSetFooterTemplateUrl:"@",tgTypeaheadDataSetLimitStep:"@",tgTypeaheadDataSetDisplayedItems:"@",tgTypeaheadDataSetSuggested:"@"},compile:function(){function a(e){var a=e.match(r);if(!a)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+e+"'.");return{itemName:a[3],sourceMapper:t(a[4]),viewMapper:t(a[2]||a[1]),modelMapper:t(a[1])}}function n(n,o,r,i){var d=parseInt(n.tgTypeaheadDataSetLimitStep)||9999,l=parseInt(n.tgTypeaheadDataSetDisplayedItems)||d,s=a(n.tgTypeaheadDataSet),p=null,c=e.get("tgTypeaheadSourceModel");n.tgTypeaheadDataSetSuggested&&(p={itemName:s.itemName,sourceMapper:t(n.tgTypeaheadDataSetSuggested),viewMapper:s.viewMapper,modelMapper:s.modelMapper}),n.$dataSet={name:n.tgTypeaheadDataSetName||"dataSet_"+n.$id,data:null,templates:{header:n.tgTypeaheadDataSetHeaderTemplateUrl||null,item:n.tgTypeaheadDataSetItemTemplateUrl||null,footer:n.tgTypeaheadDataSetFooterTemplateUrl||null},queried:new c(s,l,d),suggested:p?new c(p,l,d):null},i.$addDataSet(n.$dataSet)}function o(e,t){e.$destroy(),t.remove()}var r=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{pre:n,post:o}},controller:["$scope",function(e){this.$setHeaderTemplate=function(t){e.$dataSet.templates.header=t},this.$setItemTemplate=function(t){e.$dataSet.templates.item=t},this.$setFooterTemplate=function(t){e.$dataSet.templates.footer=t}}]}}]).directive("tgTypeaheadPopupHeader",[function(){return e("^?tgTypeahead","$setPopupHeaderTemplate")}]).directive("tgTypeaheadPopupFooter",[function(){return e("^?tgTypeahead","$setPopupFooterTemplate")}]).directive("tgTypeaheadDataSetHeader",[function(){return e("^?tgTypeaheadDataSet","$setHeaderTemplate")}]).directive("tgTypeaheadDataSetItem",[function(){return e("^?tgTypeaheadDataSet","$setItemTemplate")}]).directive("tgTypeaheadDataSetFooter",[function(){return e("^?tgTypeaheadDataSet","$setFooterTemplate")}]).directive("tgTypeaheadSuggestedPopupHeader",[function(){return e("^?tgTypeahead","$setSuggestedPopupHeaderTemplate")}]).directive("tgTypeaheadSuggestedPopupFooter",[function(){return e("^?tgTypeahead","$setSuggestedPopupFooterTemplate")}]).directive("tgTypeaheadRenderTemplate",["$http","$compile","$parse","$templateCache",function(e,t,a,n){return{restrict:"A",scope:!1,compile:function(o,r){function i(a,o){o.empty();var r=d(a),i=l(a)===!0;angular.isString(r)?e.get(r,{cache:n}).success(function(e){o.append(t(e.trim())(a)),i&&o.detach().appendTo("body"),s(a,{$element:o})}):angular.isObject(r)?(r.$attachTo(o,a),i&&o.detach().appendTo("body"),s(a,{$element:o})):o.remove()}var d=a(r.tgTypeaheadRenderTemplate),l=a(r.tgTypeaheadRenderTemplateToBody),s=a(r.tgTypeaheadRenderTemplateCallback);return{pre:null,post:i}}}}]).directive("tgTypeaheadTagManager",["$injector","$http","$compile","$parse","$templateCache","$q","$timeout",function(e,t,a,n,o,r,i){return{restrict:"A",require:["tgTypeahead","?ngModel"],scope:!1,priority:3,compile:function(n,d){function l(e,n,d,l){var m=e.$parent,h=l[0],f=l[1];e=h.$scope;var $=null,v=null;e.$tags=[],e.$templates.tagManager=s,e.$templates.tag=p,e.canAddTag=function(){return 0===c||c>e.$tags.length},e.addTag=function(t){if(t&&t.match&&!t.match.selected&&e.canAddTag()){var a={context:e.tgTypeaheadContext,tag:t};return h.events.emit("onTagAdding",a).then(function(){if(t.match.selected=!0,t.dataSet){var n=e.$getModel(),o=n,r={},i={},d=t.dataSet.queried.source.itemName,l=t.dataSet.queried.source.viewMapper,s=t.dataSet.queried.source.modelMapper;r[d]=t.match.data,l.assign(i,l(m,r)),s.assign(i,s(m,r)),t.item=i[d],o&&(e.$dataSets.length>1&&(o=o[t.dataSet.name]),-1===o.indexOf(t.match.data)&&o.push(t.item||t.match.data))}return e.$tags.push(t),h.events.emit("onTagAdded",a),t})}return r.when(void 0)},e.removeTag=function(t){var a=e.$tags.indexOf(t);if(-1!==a){var n={context:e.tgTypeaheadContext,index:a,tag:t};return h.events.emit("onTagRemoving",n).then(function(){if(t.match.selected=!1,t.dataSet){var o=e.$getModel(),r=o;if(e.$dataSets.length>1&&r&&(r=r[t.dataSet.name]),r){for(var i=-1,d=0,l=r.length;l>d;d++)if(angular.equals(r[d],t.item)){i=d;break}-1!==i&&r.splice(i,1)}}e.$tags.splice(a,1),h.events.emit("onTagRemoved",n)})}return r.when(!1)},e.findTag=function(t){for(var a=0,n=e.$tags.length;n>a;a++)if(e.$tags[a].match.model===t.model)return e.$tags[a]},e.clearTags=function(){e.$tags.length=0},e.hasAllSelected=function(t){var a=e.getDataSetSource(t);if(a.matches.length>0){for(var n=0,o=a.matches.length;o>n;n++)if(!a.matches[n].selected)return!1;return!0}return!1},e.selectAll=function(t,a){var n=e.getDataSetSource(t);n.matches.forEach(function(a,n){a.selected||e.$selectMatch(t,n,a)}),a&&a.stopPropagation()},e.deselectAll=function(t,a){var n=e.getDataSetSource(t);n.matches.forEach(function(a,n){a.selected&&e.$selectMatch(t,n,a)}),a&&a.stopPropagation()},h.$overrideFn("$applyMatch",function(e,t,a){a&&this.$baseFn(e,t)}),h.$overrideFn("$onOutsideClick",function(){e.$clearTypeahead(),this.$baseFn()}),h.$overrideFn("$onKeyDown",function(t){8===t.which&&null===e.$term?e.$tags.length>0&&e.removeTag(e.$tags[e.$tags.length-1]):this.$baseFn(t)}),h.$overrideFn("$getPlaceholder",function(){return e.$tags.length>0?"":this.$baseFn()}),h.$overrideFn("$isVisibleInput",function(){var t=this.$baseFn();return t&&c>0&&c<=e.$tags.length&&(t=!1),t&&e.$updateInputElement(),t}),h.$overrideFn("$isVisibleClear",function(){return"true"===d.tgTypeaheadDisplayClean&&e.$tags.length>1}),h.$overrideFn("$clear",function(){e.clearTags()}),h.$overrideFn("$selectMatch",function(t,a,n,o){e.$clearTypeahead();var r={context:e.tgTypeaheadContext,dataSet:t,index:a,match:n};h.trigger("onMatchSelecting",r).then(function(){var a=e.findTag(n);if(void 0===a){var a=new g(n,t);e.addTag(a)}else e.removeTag(a);o&&o.ctrlKey||e.$onOutsideClick()})}),h.$overrideFn("$prepareDefaultModel",function(){var t=1===e.$dataSets.length,a=e.$dataSets.length>1,n=null;return t?n=[]:a&&(n={},e.$dataSets.forEach(function(e){n[e.name]=[]})),n}),h.$overrideFn("$prepareModel",function(t){if(void 0===t)return e.$prepareDefaultModel();var a=1===e.$dataSets.length,n=e.$dataSets.length>1,o=[];if(a?Array.isArray(t)&&t.length>0&&o.push({dataSet:e.$dataSets[0],source:t}):n&&(t&&!Array.isArray(t)&&angular.isObject(t)||(t={}),e.$dataSets.forEach(function(e){t.hasOwnProperty(e.name)&&Array.isArray(t[e.name])||(t[e.name]=[]),t[e.name].length>0&&o.push({dataSet:e,source:t[e.name]})})),o.length>0){var r={};o.forEach(function(t){var a=t.dataSet,n=a.queried.source,o=n.itemName,i=n.modelMapper,d=n.viewMapper;t.source.forEach(function(t){r[o]=t;var n=new u(t,i(e.$parent,r),d(e.$parent,r)),l=new g(n,a);e.addTag(l)})})}return t}),h.$overrideFn("$updateInputElement",function(){var e=$.width(),t=function(){var t,a,n=0;return $.find(".tg-typeahead__tag").each(function(){t=angular.element(this),a=t.outerWidth()+parseInt(t.css("margin-left"))+parseInt(t.css("margin-right")),n+=a,n>e&&(n=a)}),n}(),a=$.find(".tg-typeahead__clear-link").width()||0;if(t>0){var n=e-t,o=100+a>n?e:n;o>=9&&(o-=9),v.css("width",o+"px")}else v.css("width","100%")}),h.events.on("onTemplateInit",function(n){t.get(e.$templates.tagManager,{cache:o}).success(function(t){$=n.element.find(".tg-typeahead"),v=n.element.find(".tg-typeahead__input-container"),$.prepend(a(t.trim())(e))})}),h.getTags=function(){var t=[];return e.$tags.forEach(function(e){t.push(e)}),t},h.addTag=function(t,a){var n=new g(t,a);return e.addTag(n)},h.removeTag=function(t){return e.removeTag(t)},h.clearTags=function(){e.clearTags()},e.$watch("$tags",function(e){i(function(){d.required&&f.$setValidity("tagsRequired",0!==e.length)})},!0)}var s=d.tgTypeaheadTagManagerTemplateUrl||"tg-typeahead-tag-manager.tpl.html",p=d.tgTypeaheadTagTemplateUrl||"tg-typeahead-tag.tpl.html",c=parseInt(d.tgTypeaheadMaxSelectedTags)||0,u=e.get("tgTypeaheadMatchModel"),g=e.get("tgTypeaheadTagModel");return{pre:l,post:null}},controller:[function(){}]}}]).directive("tgTypeaheadFilterManager",["$injector","$http","$q","$templateCache","$compile",function(e,t,a,n,o){return{restrict:"A",require:["tgTypeahead"],scope:!1,priority:2,compile:function(r,i){function d(e,r,i,d){var u=d[0];e=u.$scope,e.$templates.filterManager=l,e.$templates.filterTag=s,e.$filters={tags:[],active:null},e.initFilterManager=function(){e.clearFilterTags(),e.$clearTypeahead(),e.addFilterTag(new c(null)).then(function(t){e.$filters.active=t})},e.canAddFilterTag=function(){return 0===p||p>e.$filters.tags.length},e.addFilterTag=function(t){if(t&&!t.match&&e.canAddFilterTag()){var n={context:e.tgTypeaheadContext,filterTag:t};return u.events.emit("onFilterTagAdding",n).then(function(){return e.$filters.tags.push(t),u.events.emit("onFilterTagAdded",n),t})}return a.when(void 0)},e.removeFilterTag=function(t){var n=e.$filters.tags.indexOf(t);if(-1!==n){var o={context:e.tgTypeaheadContext,filterTag:t};return u.events.emit("onFilterTagRemoving",o).then(function(){return e.$filters.tags.splice(n,1),e.selectFilterMatch(null,t),u.events.emit("onFilterTagRemoved",o),!0})}return a.when(!1)},e.clearFilterTags=function(){e.$filters.tags.length=0},e.selectFilterMatch=function(t,a){if(a=a||e.$filters.active){a.match=t;var n=null,o=e.$filters.tags.length;o>0&&(n=e.$filters.tags[o-1]),(!n||n.match)&&e.addFilterTag(new c(null)).then(function(t){e.$filters.active=t})}e.$clearTypeahead(),e.$closePopup()},e.getAppliedFilters=function(){var t=[];return e.$filters.tags.forEach(function(e){e.filter&&e.match&&t.push({type:e.filter.type,value:e.match,tag:e})}),t},e.$onFilterTypeSelect=function(t,a){var n={context:e.tgTypeaheadContext,filterTag:t,filter:a};return u.events.emit("onFilterTypeSelecting",n).then(function(){u.events.emit("onFilterTypeSelected",n)})},u.$overrideFn("$prepareSourceContext",function(){return{filters:e.getAppliedFilters(),currentFilter:e.$filters.active}}),u.$overrideFn("$isVisibleInput",function(){var t=this.$baseFn(),a=0;return t&&(e.$filters.tags.forEach(function(e){e.match&&a++}),p>0&&a>=p&&(t=!1)),t&&e.$updateInputElement(),t}),u.$overrideFn("$updateInputElement",function(){var e=r.find(".tg-typeahead"),t=r.find(".tg-typeahead__input-container"),a=e.width(),n=function(){var t,n,o=0;return e.find(".tg-typeahead__tag-wrap").each(function(){t=angular.element(this),n=t.outerWidth()+parseInt(t.css("margin-left"))+parseInt(t.css("margin-right")),o+=n,o>a&&(o=n)}),o}();if(n>0){var o=a-n,i=100>o?a:o;i>=15&&(i-=15),t.css("width",i+"px")}else t.css("width","100%")}),u.events.on("onTemplateInit",function(a){t.get(e.$templates.filterManager,{cache:n}).success(function(t){var n=a.element.find(".tg-typeahead");n.prepend(o(t.trim())(e))})}),u.events.on("onMatchSelected",function(){e.clearFilterTags()}),u.initFilterManager=function(){e.initFilterManager()},u.getAppliedFilters=function(){return e.getAppliedFilters()},u.getCurrentFilter=function(){return e.$filter.active},e.$watch("$filters.tags",function(t){var a={context:e.tgTypeaheadContext,filterTags:t};u.events.emit("onFilterTagsChange",a)},!0),e.initFilterManager()}var l=i.tgTypeaheadFilterManagerTemplateUrl||"tg-typeahead-filter-manager.tpl.html",s=i.tgTypeaheadFilterTagTemplateUrl||"tg-typeahead-filter-tag.tpl.html",p=parseInt(i.tgTypeaheadMaxUsedFilters)||0,c=e.get("tgTypeaheadFilterTagModel");return{pre:d,post:null}}}}]).factory("tgTypeaheadSourceModel",[function(){function e(e,t,a){this.source=e,this.matches=[],this.displayedItems=t,this.limitStep=a,this.limit=t,this.active=!0,this.activeIndex=-1,this.$hasMore=function(){return this.limit<this.matches.length},this.$showAll=function(e){this.limit=this.matches.length,e&&e.stopPropagation()},this.$showMore=function(e){var t=this.limit+this.limitStep;t>this.matches.length&&(t=this.matches.length),t<this.limitStep&&(t=this.limitStep),this.limit=t,e&&e.stopPropagation()},this.$hideMore=function(e){this.limit=this.displayedItems,e&&e.stopPropagation()}}return e}]).factory("tgTypeaheadMatchModel",[function(){function e(e,t,a){this.data=e,this.model=t,this.value=a,this.selected=!1,this.disabled=!1}return e}]).factory("tgTypeaheadSuggestedMatchModel",[function(){function e(e,t,a){this.data=e,this.model=t,this.value=a,this.selected=!1,this.disabled=!1,this.suggested=!0}return e}]).factory("tgTypeaheadTagModel",[function(){function e(e,t){this.match=e,this.dataSet=t}return e}]).factory("tgTypeaheadFilterTagModel",[function(){function e(e){this.match=e,this.filter=null,this.filters=[]}return e}])}(),function(){"use strict";angular.module("tg.components").directive("tgWhenScrolled",["$parse",function(e){return{restrict:"A",link:function(t,a,n){var o=e(n.tgWhenScrolled);a.bind("scroll",function(e){this.scrollTop+this.offsetHeight>=this.scrollHeight&&(o(t,{$event:e}),t.$digest())})}}}])}(),angular.module("app").controller("ComponentsController",["$scope",function(){"use strict"}]),angular.module("tg.extensions").factory("$tgComponents",["tgEventsProcessor",function(e){"use strict";var t={},a=e.new();return{$addInstance:function(n){if(!n||!n.$name)throw new Error("Invalid instance or instance name.");if(t.hasOwnProperty(n.$name))throw new Error("Component with instance name `"+n.$name+"` already exist.");n.$supportEvents&&!n.hasOwnProperty("events")&&(n.events=e.new(),n.trigger=function(){var e=[];return Array.prototype.push.apply(e,arguments),e.push(n),n.events.emit.apply(n.events,e)}),t[n.$name]=n,a.emit("$onInstanceAdded",n)},$removeInstance:function(e){if(!e||!e.$name)throw new Error("Invalid instance or instance name.");if(!t.hasOwnProperty(e.$name))throw new Error("Component with instance name `"+e.$name+"` doesn't exist.");delete t[e.$name],a.emit("$onInstanceRemoved",e)},hasInstance:function(e){if(!e)throw new Error("Invalid instance name.");return t.hasOwnProperty(e)},getInstance:function(e){if(!this.hasInstance(e))throw new Error("Component with instance name `"+e+"` doesn't exist.");return t[e]||null},getInstances:function(){var e=[];for(var a in t)e.push(t[a]);return e},events:a}}]).factory("tgEventsProcessor",["$q",function(e){"use strict";function t(){this.handlers={},this.on=function(e,t){if(angular.isString(e)&&e.length>0&&angular.isFunction(t)){this.handlers.hasOwnProperty(e)||(this.handlers[e]=[]);var a=this.handlers[e];return a.push(t),function(){var e=a.indexOf(t);-1!==e&&a.splice(e,1)}}},this.emit=function(t){var a=[];if(angular.isString(t)&&t.length>0&&this.handlers.hasOwnProperty(t)){var n=[];Array.prototype.push.apply(n,arguments),n.shift(),angular.forEach(this.handlers[t],function(e){var t=e.apply(this,n);if(t){var o=t.hasOwnProperty("then")&&angular.isFunction(t.then);o&&a.push(t)}})}return e.all(a)},this.clear=function(e,t){if(void 0!==e){if(angular.isString(e)&&e.length>0)if(angular.isFunction(t)){var a=this.handlers[e].indexOf(t);-1!==a&&this.handlers[e].splice(a,1)}else delete this.handlers[e]}else this.handlers={}}}return{"new":function(){return new t}}}]),angular.module("app").controller("HomeController",["$scope",function(){"use strict"}]);