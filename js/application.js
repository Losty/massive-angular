!function(){}("undefined"==typeof appConfig?this.appConfig={}:appConfig),angular.module("app",["ui.router","hljs","tg.common","tg.extensions","tg.components"]),angular.module("tg.common",[]),angular.module("tg.extensions",[]),angular.module("tg.components",[]),angular.module("app").config(["$logProvider",function(e){"use strict";e.debugEnabled(!0)}]),angular.module("app").config(["$stateProvider","$urlRouterProvider",function(e,t){"use strict";t.otherwise("/"),e.state("home",{url:"/",templateUrl:"./view/home/index.html",controller:"HomeController"}).state("extensions",{url:"/extensions",templateUrl:"./view/extensions/index.html"}).state("extensions.tgComponents",{url:"/tgComponents",templateUrl:"./view/extensions/tgComponents.html",controller:"ComponentsController"}).state("components",{url:"/components",templateUrl:"./view/components/index.html"}).state("components.tgTypeahead",{url:"/tgTypeahead",templateUrl:"./view/components/tgTypeahead.html",controller:"TypeaheadController"}).state("components.tgDropdown",{url:"/tgDropdown",templateUrl:"./view/components/tgDropdown.html",controller:"DropdownController"}).state("components.tgTabset",{url:"/tgTabset",templateUrl:"./view/components/tgTabset.html",controller:"TabsetController"})}]),angular.module("app").factory("utilities",[function(){"use strict";function e(e,t){var a;if(angular.isArray(e)){for(var n=0,o=e.length;o>n;n++)if(a=t(e[n],n,e),void 0!==a)return a}else if(angular.isObject(e))for(var r in e)if(a=t(e[r],r,e),void 0!==a)return a}function t(e,t,a){var n=[];return this.each(e,function(o,r){var i=t(o,r,e);void 0!==i&&(a&&-1!==n.indexOf(i)||n.push(i))}),n}function a(e){return!e||0===e.length}function n(e,t){return e&&e.indexOf(t)>-1}return{each:e,select:t,empty:a,has:n}}]),function(){"use strict";function e(){}angular.module("tg.common").controller("AppController",e),e.$inject=["$scope"]}(),function(){"use strict";angular.module("tg.common").directive("codeHighlight",["$compile",function(e){return{restrict:"A",scope:!1,priority:9999,compile:function(t,a){function n(t){if(r){var a=t.$new();a.source=d;var n=$(r);n.attr("hljs",""),n.attr("source","source"),n.attr("language",i||""),e(n)(a)}}for(var o,r=a.codeHighlightSelector,i=a.codeHighlight,d=t.get(0).innerHTML,s="",l=0,p=d.length,c=0,u=0;p>l;l++)if(o=d.charCodeAt(l),10===o)s+="\n",c=0;else{if(32!==o){if(c>0)for(0===u?u=c:c-=u;c-->0;)s+=" ";c=-1}else-1!==c&&c++;-1===c&&(s+=d[l])}return d=s.trim(),{pre:n,post:null}}}}])}(),function(){"use strict";function e(e){return function(t){return e.trustAsHtml(t)}}angular.module("tg.common").filter("tgTrustedHtml",e),e.$inject=["$sce"]}(),function(){"use strict";function e(e){function t(){var t=e.defer();return t.resolve(a),t.promise}var a=[{id:4,code:"AF",name:"Afghanistan"},{id:8,code:"AL",name:"Albania"},{id:12,code:"DZ",name:"Algeria"},{id:20,code:"AD",name:"Andorra"},{id:24,code:"AO",name:"Angola"},{id:28,code:"AG",name:"Antigua and Barbuda"},{id:31,code:"AZ",name:"Azerbaijan"},{id:32,code:"AR",name:"Argentina"},{id:36,code:"AU",name:"Australia"},{id:40,code:"AT",name:"Austria"},{id:44,code:"BS",name:"Bahamas"},{id:48,code:"BH",name:"Bahrain"},{id:50,code:"BD",name:"Bangladesh"},{id:51,code:"AM",name:"Armenia"},{id:52,code:"BB",name:"Barbados"},{id:56,code:"BE",name:"Belgium"},{id:64,code:"BT",name:"Bhutan"},{id:68,code:"BO",name:"Bolivia"},{id:70,code:"BA",name:"Bosnia and Herzegovina"},{id:72,code:"BW",name:"Botswana"},{id:76,code:"BR",name:"Brazil"},{id:84,code:"BZ",name:"Belize"},{id:90,code:"SB",name:"Solomon Islands"},{id:96,code:"BN",name:"Brunei Darussalam"},{id:100,code:"BG",name:"Bulgaria"},{id:104,code:"MM",name:"Myanmar"},{id:108,code:"BI",name:"Burundi"},{id:112,code:"BY",name:"Belarus"},{id:116,code:"KH",name:"Cambodia"},{id:120,code:"CM",name:"Cameroon"},{id:124,code:"CA",name:"Canada"},{id:132,code:"CV",name:"Cape Verde"},{id:140,code:"CF",name:"Central African Republic"},{id:144,code:"LK",name:"Sri Lanka"},{id:148,code:"TD",name:"Chad"},{id:152,code:"CL",name:"Chile"},{id:156,code:"CN",name:"China"},{id:158,code:"TW",name:"Taiwan"},{id:170,code:"CO",name:"Colombia"},{id:174,code:"KM",name:"Comoros"},{id:178,code:"CG",name:"Congo"},{id:180,code:"CD",name:"Democratic Republic of the Congo"},{id:188,code:"CR",name:"Costa Rica"},{id:191,code:"HR",name:"Croatia"},{id:192,code:"CU",name:"Cuba"},{id:196,code:"CY",name:"Cyprus"},{id:203,code:"CZ",name:"Czech Republic"},{id:204,code:"BJ",name:"Benin"},{id:208,code:"DK",name:"Denmark"},{id:212,code:"DM",name:"Dominica"},{id:214,code:"DO",name:"Dominican Republic"},{id:218,code:"EC",name:"Ecuador"},{id:222,code:"SV",name:"El Salvador"},{id:226,code:"GQ",name:"Equatorial Guinea"},{id:231,code:"ET",name:"Ethiopia"},{id:232,code:"ER",name:"Eritrea"},{id:233,code:"EE",name:"Estonia"},{id:242,code:"FJ",name:"Fiji"},{id:246,code:"FI",name:"Finland"},{id:250,code:"FR",name:"France"},{id:258,code:"PF",name:"French Polynesia"},{id:262,code:"DJ",name:"Djibouti"},{id:266,code:"GA",name:"Gabon"},{id:268,code:"GE",name:"Georgia"},{id:270,code:"GM",name:"Gambia"},{id:276,code:"DE",name:"Germany"},{id:288,code:"GH",name:"Ghana"},{id:296,code:"KI",name:"Kiribati"},{id:300,code:"GR",name:"Greece"},{id:308,code:"GD",name:"Grenada"},{id:320,code:"GT",name:"Guatemala"},{id:324,code:"GN",name:"Guinea"},{id:328,code:"GY",name:"Guyana"},{id:332,code:"HT",name:"Haiti"},{id:336,code:"VA",name:"Holy See (Vatican City State)"},{id:340,code:"HN",name:"Honduras"},{id:344,code:"HK",name:"Hong Kong"},{id:348,code:"HU",name:"Hungary"},{id:352,code:"IS",name:"Iceland"},{id:356,code:"IN",name:"India"},{id:360,code:"ID",name:"Indonesia"},{id:364,code:"IR",name:"Iran"},{id:368,code:"IQ",name:"Iraq"},{id:372,code:"IE",name:"Ireland"},{id:376,code:"IL",name:"Israel"},{id:380,code:"IT",name:"Italy"},{id:384,code:"CI",name:"Cote D'ivoire"},{id:388,code:"JM",name:"Jamaica"},{id:392,code:"JP",name:"Japan"},{id:398,code:"KZ",name:"Kazakhstan"},{id:400,code:"JO",name:"Jordan"},{id:404,code:"KE",name:"Kenya"},{id:408,code:"KP",name:"North Korea"},{id:410,code:"KR",name:"South Korea"},{id:414,code:"KW",name:"Kuwait"},{id:417,code:"KG",name:"Kyrgyzstan"},{id:418,code:"LA",name:"Lao People's Democratic Republic"},{id:422,code:"LB",name:"Lebanon"},{id:426,code:"LS",name:"Lesotho"},{id:428,code:"LV",name:"Latvia"},{id:430,code:"LR",name:"Liberia"},{id:434,code:"LY",name:"Libya"},{id:438,code:"LI",name:"Liechtenstein"},{id:440,code:"LT",name:"Lithuania"},{id:442,code:"LU",name:"Luxembourg"},{id:450,code:"MG",name:"Madagascar"},{id:454,code:"MW",name:"Malawi"},{id:458,code:"MY",name:"Malaysia"},{id:462,code:"MV",name:"Maldives"},{id:466,code:"ML",name:"Mali"},{id:470,code:"MT",name:"Malta"},{id:478,code:"MR",name:"Mauritania"},{id:480,code:"MU",name:"Mauritius"},{id:484,code:"MX",name:"Mexico"},{id:492,code:"MC",name:"Monaco"},{id:496,code:"MN",name:"Mongolia"},{id:498,code:"MD",name:"Moldova"},{id:499,code:"ME",name:"Montenegro"},{id:504,code:"MA",name:"Morocco"},{id:508,code:"MZ",name:"Mozambique"},{id:512,code:"OM",name:"Oman"},{id:516,code:"NA",name:"Namibia"},{id:520,code:"NR",name:"Nauru"},{id:524,code:"NP",name:"Nepal"},{id:528,code:"NL",name:"Netherlands"},{id:540,code:"NC",name:"New Caledonia"},{id:548,code:"VU",name:"Vanuatu"},{id:554,code:"NZ",name:"New Zealand"},{id:558,code:"NI",name:"Nicaragua"},{id:562,code:"NE",name:"Niger"},{id:566,code:"NG",name:"Nigeria"},{id:578,code:"NO",name:"Norway"},{id:583,code:"FM",name:"Micronesia"},{id:584,code:"MH",name:"Marshall Islands"},{id:585,code:"PW",name:"Palau"},{id:586,code:"PK",name:"Pakistan"},{id:591,code:"PA",name:"Panama"},{id:598,code:"PG",name:"Papua New Guinea"},{id:600,code:"PY",name:"Paraguay"},{id:604,code:"PE",name:"Peru"},{id:608,code:"PH",name:"Philippines"},{id:616,code:"PL",name:"Poland"},{id:620,code:"PT",name:"Portugal"},{id:624,code:"GW",name:"Guinea-Bissau"},{id:626,code:"TL",name:"Timor-Leste"},{id:630,code:"PR",name:"Puerto Rico"},{id:634,code:"QA",name:"Qatar"},{id:642,code:"RO",name:"Romania"},{id:643,code:"RU",name:"Russian Federation"},{id:646,code:"RW",name:"Rwanda"},{id:659,code:"KN",name:"Saint Kitts and Nevis"},{id:662,code:"LC",name:"Saint Lucia"},{id:670,code:"VC",name:"Saint Vincent and the Grenadines"},{id:674,code:"SM",name:"San Marino"},{id:678,code:"ST",name:"Sao Tome and Principe"},{id:682,code:"SA",name:"Saudi Arabia"},{id:686,code:"SN",name:"Senegal"},{id:688,code:"RS",name:"Serbia"},{id:690,code:"SC",name:"Seychelles"},{id:694,code:"SL",name:"Sierra Leone"},{id:702,code:"SG",name:"Singapore"},{id:703,code:"SK",name:"Slovakia"},{id:704,code:"VN",name:"Viet Nam"},{id:705,code:"SI",name:"Slovenia"},{id:706,code:"SO",name:"Somalia"},{id:710,code:"ZA",name:"South Africa"},{id:716,code:"ZW",name:"Zimbabwe"},{id:724,code:"ES",name:"Spain"},{id:728,code:"SS",name:"South Sudan"},{id:729,code:"SD",name:"Sudan"},{id:732,code:"EH",name:"Western Sahara"},{id:740,code:"SR",name:"Suriname"},{id:748,code:"SZ",name:"Swaziland"},{id:752,code:"SE",name:"Sweden"},{id:756,code:"CH",name:"Switzerland"},{id:760,code:"SY",name:"Syrian Arab Republic"},{id:762,code:"TJ",name:"Tajikistan"},{id:764,code:"TH",name:"Thailand"},{id:768,code:"TG",name:"Togo"},{id:776,code:"TO",name:"Tonga"},{id:780,code:"TT",name:"Trinidad and Tobago"},{id:784,code:"AE",name:"United Arab Emirates"},{id:788,code:"TN",name:"Tunisia"},{id:792,code:"TR",name:"Turkey"},{id:795,code:"TM",name:"Turkmenistan"},{id:798,code:"TV",name:"Tuvalu"},{id:800,code:"UG",name:"Uganda"},{id:804,code:"UA",name:"Ukraine"},{id:807,code:"MK",name:"Macedonia"},{id:818,code:"EG",name:"Egypt"},{id:826,code:"GB",name:"United Kingdom"},{id:834,code:"TZ",name:"Tanzania"},{id:840,code:"US",name:"United States"},{id:854,code:"BF",name:"Burkina Faso"},{id:858,code:"UY",name:"Uruguay"},{id:860,code:"UZ",name:"Uzbekistan"},{id:862,code:"VE",name:"Venezuela"},{id:882,code:"WS",name:"Samoa"},{id:887,code:"YE",name:"Yemen"},{id:894,code:"ZM",name:"Zambia"}];return{getCountries:t}}angular.module("tg.common").service("DataService",e),e.$inject=["$q"]}(),angular.module("app").controller("DropdownController",["$scope",function(){"use strict"}]),function(){"use strict";function e(e,t,a,n,o){e.__typeahead={model1:null,model2:null,model3:[],model4:[],model5:null,model6:[]},e.suggestions=[{id:44,code:"BS",name:"Bahamas"},{id:450,code:"MG",name:"Madagascar"}],e.control={typeahead:{attributes:[{name:"tgTypeaheadId",type:"string",description:""},{name:"tgTypeaheadContext",type:"expression",description:""},{name:"tgTypeaheadPlaceholder",type:"string",description:""},{name:"tgTypeaheadTemplateUrl",type:"string",description:"Set custom typeahead template."},{name:"tgTypeaheadLoaderTemplateUrl",type:"string",description:"Set custom typeahead loader template."},{name:"tgTypeaheadPopupTemplateUrl",type:"string",description:"Set custom typeahead popup template."},{name:"tgTypeaheadPopupHeaderTemplateUrl",type:"string",description:"Set custom typeahead popup header template."},{name:"tgTypeaheadPopupFooterTemplateUrl",type:"string",description:"Set custom typeahead popup footer template."},{name:"tgTypeaheadDataSetsHeaderTemplateUrl",type:"string",description:"Set custom typeahead data set header template."},{name:"tgTypeaheadDataSetsItemTemplateUrl",type:"string",description:"Set custom typeahead data set item template."},{name:"tgTypeaheadDataSetsFooterTemplateUrl",type:"string",description:"Set custom typeahead data set footer template."},{name:"tgTypeaheadSuggestedPopupTemplateUrl",type:"string",description:"Set custom typeahead suggested popup template."},{name:"tgTypeaheadSuggestedPopupHeaderTemplateUrl",type:"string",description:"Set custom typeahead suggested popup header template."},{name:"tgTypeaheadSuggestedPopupFooterTemplateUrl",type:"string",description:"Set custom typeahead suggested popup footer template."},{name:"tgTypeaheadPopupAppendToBody",type:"boolean",description:"Should the typeahead popup be appended to $body instead of the parent element? (default: false)"},{name:"tgTypeaheadPopupStrictWidth",type:"boolean",description:""},{name:"tgTypeaheadWrapClass",type:"string",description:""},{name:"tgTypeaheadMinLength",type:"number",description:"The minimal number of characters that needs to be entered before the typeahead kicks in. The default value is set to 1. If set to 0, the typeahead will try to open on focus."},{name:"tgTypeaheadDelay",type:"number",description:"The minimum waiting time (after the last character was typed) before the typeahead kicks in."},{name:"tgTypeaheadSelected",type:"expression",description:"A callback executed when a match is selected."}]}},e.getResultsAsync=function(e,r){var i=t.defer();return n(function(){o.getCountries().then(function(t){t=a("filter")(t,{name:e}),0===t.length&&(r.dataSet.data.noResults=!0),i.resolve(t)})},2e3),i.promise},e.toJson=function(e){return angular.toJson(e,!0)}}angular.module("app").controller("TypeaheadController",e),e.$inject=["$scope","$q","$filter","$timeout","DataService"]}(),angular.module("app").controller("TabsetController",["$scope",function(){"use strict"}]),function(){"use strict";function e(e,t){return{restrict:"A",require:e,transclude:!0,scope:!1,compile:function(){function e(e,a,n,o,r){t&&o&&o.hasOwnProperty(t)&&o[t]({$attachTo:function(e,t){r(t,function(t){e.append(t)})}})}function a(e,t){t.remove()}return{pre:e,post:a}}}}angular.module("tg.components").run(["$templateCache",function(e){e.put("tg-dropdown.tpl.html",'<div class="btn-group tg-dropdown-wrap" data-ng-class="tgDropdownWrapClass">   <div class="tg-dropdown-button" data-ng-class="{ \'disabled\': tgDropdownDisabled }"        data-ng-click="toggleOpenState($event);">       <button class="tg-dropdown-label overflow">           <span style="font-style: italic" class="muted" data-ng-if="!$selectedItem" data-ng-bind-html="tgDropdownPlaceholder"></span>           <span data-tg-dropdown-render-template="$templates.selectedItem">No Template</span>       </button>       <button class="tg-dropdown-caret fa" data-ng-class="$stateHolder.opened ? \'fa-caret-up\' : \'fa-caret-down\'"></button>   </div>   <div data-tg-dropdown-render-template="$templates.popup"></div>'),e.put("tg-dropdown-popup.tpl.html",'<div class="tg-dropdown-menu" data-ng-class="{ \'tg-dropdown-menu-has-search\': !!tgDropdownSearch }" data-ng-show="$stateHolder.opened">   <input type="text" class="tg-dropdown-menu-search" placeholder="{{ tgDropdownSearchPlaceholder }}"        data-ng-model="$stateHolder.filter"        data-ng-change="applyFilter();">   <ul class="dropdown-menu" data-tg-when-scrolled="onPopupScrolled($event);">       <li data-ng-if="$templates.itemHeader">           <div data-tg-dropdown-render-template="$templates.itemHeader">               No Template           </div>       </li>       <li data-ng-repeat="$item in $dataHolder.filteredItems | limitTo:$stateHolder.limit">           <a href="" data-ng-click="selectItem($item);" data-tg-dropdown-render-template="$templates.item">               No Template           </a>       </li>       <li data-ng-if="$stateHolder.filter && $dataHolder.filteredItems == 0">           <a href="" class="overflow">               No match for "{{ $stateHolder.filter }}"           </a>       </li>   </ul></div>'),e.put("tg-dropdown-stage-popup.tpl.html",'<div class="tg-dropdown-menu" data-ng-show="$stateHolder.opened">   <ul class="tg-dropdown-stage-menu">       <li class="tg-dropdown-stage-menu__item-wrap" data-ng-if="$level > 0">           <button class="fa fa-caret-left tg-dropdown-stage-menu__back" data-ng-click="goBack($item)"></button>           <div class="tg-dropdown-stage-menu__item" data-ng-click="goBack($item);">Back</div>       </li>       <li class="tg-dropdown-stage-menu__item-wrap" data-ng-repeat="$item in $dataHolder.filteredItems">           <div class="fa fa-check tg-dropdown-stage-menu__check" style="visibility: hidden;"></div>           <button class="fa fa-caret-right tg-dropdown-stage-menu__forward" data-ng-click="goForward($item)" data-ng-if="hasChilds($item)"></button>           <div class="tg-dropdown-stage-menu__item" data-ng-click="goForward($item);" data-tg-dropdown-render-template="$templates.item" data-ng-class="{ \'m-selectable\': !hasChilds($item) }">No Template</div>       </li>   </ul></div>')}]).directive("tgDropdown",["$tgComponents","$http","$compile","$parse","$templateCache","$filter","$timeout","$document",function(e,t,a,n,o,r,i,d){return{restrict:"A",require:["tgDropdown","?ngModel"],scope:{tgDropdown:"@",tgDropdownPlaceholder:"@",tgDropdownId:"@",tgDropdownWrapClass:"@",tgDropdownTemplateUrl:"@",tgDropdownPopupTemplateUrl:"@",tgDropdownSearch:"=",tgDropdownSearchPlaceholder:"@",tgDropdownFilterBy:"@",tgDropdownOrderBy:"=",tgDropdownLimitStep:"@",tgDropdownSelected:"@",tgDropdownDisabled:"=",tgDropdownAddEmpty:"@",tgDropdownEmptyText:"@"},compile:function(e,s){function l(e,t){var a={};return g.modelMapper.assign(a,t),g.viewMapper.assign(a,e),a[g.itemName]}function p(e,t,a,o){function d(e){return m[g.itemName]=e,h=g.modelMapper(c,m),m[g.itemName]=null,h}var s=o[0],p=o[1],c=e.$parent,u=null,m={},h=null,$=null,f=e.tgDropdownFilterBy?n(e.tgDropdownFilterBy):null,v=parseInt(e.tgDropdownLimitStep)||9999,y=e.tgDropdownSelected?n(e.tgDropdownSelected):angular.noop;"true"===e.tgDropdownAddEmpty&&($=l(e.tgDropdownEmptyText||null,null)),e.$external=c,e.$templates={main:e.tgDropdownTemplateUrl||"tg-dropdown.tpl.html",popup:e.tgDropdownPopupTemplateUrl||"tg-dropdown-popup.tpl.html",selectedItem:null,itemHeader:null,item:null},e.$stateHolder={opened:!1,limit:v,filter:""},e.$dataHolder={filteredItems:[]},e.$selectedItem=$,e.openPopup=function(){e.$stateHolder.filter="",e.$dataHolder.filteredItems=e.getSource(),e.$dataHolder.filteredItems&&0!==e.$dataHolder.filteredItems.length&&(e.$stateHolder.opened=!0,e.$stateHolder.limit=v,i(function(){e.updateMenu()}))},e.closePopup=function(){e.$stateHolder.opened=!1,e.$stateHolder.limit=v},e.onPopupScrolled=function(){var t=e.$stateHolder.limit+v;t>e.$dataHolder.filteredItems.length&&(t=e.$dataHolder.filteredItems.length),v>t&&(t=v),e.$stateHolder.limit=t},e.toggleOpenState=function(t){e.tgDropdownDisabled||(e.$stateHolder.opened?e.closePopup():e.openPopup()),t.preventDefault()},e.getSource=function(){return u},e.applyFilter=function(){e.$stateHolder.limit=v,e.$dataHolder.filteredItems=r("filter")(u,f({$filter:e.$stateHolder.filter}))},e.refreshSource=function(){if(u=g.source(c),u&&(u&&u.length>0&&e.tgDropdownOrderBy&&(u=r("orderBy")(u,e.tgDropdownOrderBy)),$)){var t=!1;for(var a in u)if(null===d(u[a])){t=!0;break}t||u.unshift(angular.copy($))}},e.selectItem=function(t){var a=e.selectItemEventPrepare(t);s.trigger("onItemSelecting",a).then(function(){e.closePopup(),t&&(e.hasSelectedAnyItem=!0),e.$selectedItem=t,p&&(h=d(t),p.$setViewValue(h)),s.trigger("onItemSelected",a),y(c,a)})},e.selectItemEventPrepare=function(e){var t={$item:e};return t},e.updateMenu=function(){var a=t.find(".dropdown-menu");if(a.length>0){var n=t.find(".tg-dropdown-menu");n.css("width",a.get(0).offsetWidth),a.scrollTop(0),e.tgDropdownSearch&&n.find("input.tg-dropdown-menu-search").focus()}},e.updateSelectedItemFromModel=function(t,a){if(void 0===t&&null!==$&&(t=null),e.$selectedItem=null,void 0!==t&&a(e.$selectedItem)!==t)for(var n in u)if(angular.equals(a(u[n]),t)){e.$selectedItem=u[n];break}return null!==e.$selectedItem?t:null},p&&p.$formatters.push(function(t){return e.updateSelectedItemFromModel(t,d)}),e.refreshSource()}function c(e,n){t.get(e.$templates.main,{cache:o}).success(function(t){n.append(a(t.trim())(e))});var r=!1,s=function(){r||i(function(){e.closePopup()}),r=!1};d.on("click",s),n.on("click",function(){r=!0}),e.$on("$destroy",function(){d.off("click",s)})}var u=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/,m=s.tgDropdown.match(u);if(!m)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+s.tgDropdown+"'.");var g={itemName:m[3],source:n(m[4]),viewMapper:n(m[2]||m[1]),modelMapper:n(m[1])};return{pre:p,post:c}},controller:["$scope","$element","$attrs",function(t,a,n){var o=this;o.$type="tgDropdown",o.$name=t.tgDropdownId?t.tgDropdownId:o.$type+"_"+t.$id,o.$scope=t,o.$element=a,o.$attrs=n,o.$supportEvents=!0,this.$setSelectedItemTemplate=function(e){t.$templates.selectedItem=e},this.$setItemHeaderTemplate=function(e){t.$templates.itemHeader=e},this.$setItemTemplate=function(e){t.$templates.item=e},this.refreshSource=function(){t.refreshSource()},this.selectItem=function(e){t.selectItem(e)},this.$overrideFn=function(e,a){var n=t[e]||angular.noop;t[e]=function(){var e,t=this.$baseFn;return this.$baseFn=n,e=a.apply(this,arguments),this.$baseFn=t,e}},e.$addInstance(o),t.$on("$destroy",function(){e.$removeInstance(o)})}]}}]).directive("tgDropdownRenderTemplate",["$http","$compile","$parse","$templateCache",function(e,t,a,n){return{restrict:"A",scope:!1,compile:function(){function o(o,r,i){var d=a(i.tgDropdownRenderTemplate)(o);angular.isString(d)?(r.html(null),e.get(d,{cache:n}).success(function(e){r.append(t(e.trim())(o))})):angular.isObject(d)&&(r.html(null),d.$attachTo(r,o))}return{pre:null,post:o}}}}]).directive("tgDropdownSelectedItemTemplate",[function(){return e("^?tgDropdown","$setSelectedItemTemplate")}]).directive("tgDropdownItemHeaderTemplate",[function(){return e("^?tgDropdown","$setItemHeaderTemplate")}]).directive("tgDropdownItemTemplate",[function(){return e("^?tgDropdown","$setItemTemplate")}]).directive("tgDropdownStage",[function(){return{restrict:"A",require:"tgDropdown",scope:!1,compile:function(){function e(e,t,a,n){e=n.$scope,e.$templates.popup=e.tgDropdownPopupTemplateUrl||"tg-dropdown-stage-popup.tpl.html",e.$paths=[],e.$level=0,n.$overrideFn("openPopup",function(){if(this.$baseFn(),e.$selectedItem){var t=e.collectPaths(e.$selectedItem),a=t.length-1;a>=0?(e.$level=a+1,e.selectItem(t[a])):e.goRoot()}else e.$level=0}),n.$overrideFn("selectItem",function(t){e.hasChilds(t)?e.$dataHolder.filteredItems=t.childs:(e.$paths=e.collectPaths(t),this.$baseFn(t))}),n.$overrideFn("selectItemEventPrepare",function(t){var a=this.$baseFn(t);return a.$paths=e.$paths,a}),n.$overrideFn("updateSelectedItemFromModel",function(t,a){if(void 0!==t&&a(e.$selectedItem)!==t){var n,o=function(r){if(Array.isArray(r))for(var i=0,d=r.length;d>i;i++){if(n=r[i],a(n)===t)return n;if(e.hasChilds(n)&&(n=o(n.childs)))return n}};e.$selectedItem=o(e.getSource())||null,e.$selectedItem&&(e.$paths=e.collectPaths(e.$selectedItem))}return null!==e.$selectedItem?t:null}),e.hasChilds=function(e){return e.hasOwnProperty("childs")&&Array.isArray(e.childs)&&e.childs.length>0},e.goRoot=function(){e.$level=0,e.$dataHolder.filteredItems=e.getSource()},e.goForward=function(t){e.$level=e.getItemLevel(t)+1,e.$level>=0?e.selectItem(t):e.goRoot()},e.goBack=function(t){var a=e.collectPaths(t),n=a.length-2;n>=0?(e.$level=n+1,e.selectItem(a[n])):e.goRoot()},e.collectPaths=function(t){var a=[],n=null,o=function(r){var i,d;if(Array.isArray(r))for(i=0,d=r.length;d>i;i++){if(n=r[i],n===t)return n;if(e.hasChilds(n)&&(n=o(n.childs)))return a.unshift(r[i]),n}};return o(e.getSource()),a},e.getItemLevel=function(t){var a=-1,n=null,o=function(r){if(Array.isArray(r))for(var i=0,d=r.length;d>i;i++){if(n=r[i],n===t)return a++,n;if(e.hasChilds(n)&&(n=o(n.childs)))return a++,n}};return o(e.getSource()),a},n.getPaths=function(){return e.$paths}}return{pre:e,post:null}}}}])}(),function(){"use strict";function e(e){return e.replace(t,"\\$1")}var t=/([.?*+^$[\]\\(){}|-])/g;angular.module("tg.components").filter("tgHighlight",[function(){return function(t,a){if(a){var n=new RegExp(e(a),"gi");return t.replace(n,"<strong>$&</strong>")}return t}}]).directive("tgHighlightHtml",["$timeout","$compile",function(t,a){return{restrict:"A",scope:!1,compile:function(){return{pre:angular.noop,post:function(n,o,r){if(r.tgHighlightHtml){var i=e(r.tgHighlightHtml)+"(?!([^<]+)?>)",d=new RegExp(i,"gi");t(function(){o.html(function(e,t){return t=t.replace(d,"<strong>$&</strong>"),"true"===r.tgHighlightHtmlCompile?a("<span>"+t+"</span>")(n):t})})}}}}}}])}(),function(){"use strict";angular.module("tg.components").run(["$templateCache",function(e){e.put("tg-tabset.tmpl.html",'<div class="tabbable" data-ng-class="tgTabsetWrapClass">   <ul class="nav nav-tabs">       <li data-ng-repeat="$tab in $tabs"           data-ng-class="{ \'active\': isActiveTab($tab), \'disabled\': $tab.disabled }">           <a href="" data-ng-click="setActiveTab($tab);">               <span data-tg-tabset-render-template="$tab.template.header">{{ $tab.title || \'&nbsp;\' }}</span>           </a>       </li>   </ul>   <div class="tab-content" data-ng-repeat="$tab in $tabs">       <div class="tab-pane"            data-ng-if="$tab.initiated"            data-tg-tabset-render-template="$tab.template.content"            data-ng-class="{ \'active\': isActiveTab($tab) }"></div>   </div></div>')}]).directive("tgTabset",["$tgComponents","$http","$compile","$parse","$templateCache","$q",function(e,t,a,n,o,r){return{restrict:"A",scope:{tgTabset:"=?",tgTabsetId:"@",tgTabsetTemplateUrl:"@",tgTabsetWrapClass:"@",tgTabsetActiveTab:"@",tgTabsetContext:"@"},compile:function(){return function(e,r){var i=e.$parent,d=e.tgTabset;e.$tabs=d.$tabs,e.setActiveTab=function(e){d.setActiveTab(e)},e.isActiveTab=function(e){return e&&d.getActiveTab()===e};var s=n(e.tgTabsetTemplateUrl)(i)||"tg-tabset.tmpl.html";t.get(s,{cache:o}).success(function(t){var n=a(t.trim())(e);r.prepend(n)})}},controller:["$scope","$element","$attrs",function(t,a,o){function i(e){for(var t in s)if(s[t].name===e)return!1;return!0}this.$type="tgTabset",this.$name=t.tgTabsetId?t.tgTabsetId:this.$type+"_"+t.$id,this.$scope=t,this.$element=a,this.$attrs=o,this.$supportEvents=!0;var d=this,s=this.$tabs=[],l=null,p=t.tgTabsetActiveTab;t.tgTabset=d,this.context=n(t.tgTabsetContext)(t.$parent)||{},this.getActiveTab=function(){return l},this.setActiveTab=function(e){var t=r.defer();if(!e||-1===s.indexOf(e))throw t.reject(),new Error("Invalid tab.");if(e===l||e.disabled)t.reject();else{e.refreshContext(!1);var a=function(){var a={tab:e,activeTab:l};d.trigger("$onTabSelecting",a).then(function(){e.initiated=!0,e.autoRefresh&&e.refresh(),l&&(a={tab:l},d.trigger("$onTabDeselected",a)),l=e,a={tab:l},d.trigger("$onTabSelected",a),t.resolve()}).catch(function(){t.reject()})};if(l){var n={tab:l};d.trigger("$onTabDeselecting",n).then(function(){a()}).catch(function(){t.reject()})}else a()}return t.promise},this.addTab=function(e){if(!i(e.name))throw new Error("Tab with name `"+e.name+"` was already added to tabset.");var t={tab:e};d.trigger("$onTabAdding",t).then(function(){s.push(e),d.trigger("$onTabAdded",t),e.name===p&&d.setActiveTab(e)})},this.getTabByIndex=function(e,t){var a=s.length;if(e>=0||a>e)return s[e];if(t)throw new Error("Invalid tab index.");return null},this.getTabByName=function(e,t){for(var a in s)if(s[a].name===e)return s[a];if(t)throw new Error("Invalid tab name.");return null},this.setDefaultTab=function(e){p=e},e.$addInstance(this),t.$on("$destroy",function(){e.$removeInstance(d)})}]}}]).directive("tgTabsetRenderTemplate",["$http","$compile","$parse","$templateCache",function(e,t,a,n){return{restrict:"A",scope:!1,compile:function(){function o(o,r,i){var d=a(i.tgTabsetRenderTemplate)(o);d&&angular.isObject(d)&&(d.hasOwnProperty("templateUrl")?(r.html(null),e.get(d.templateUrl,{cache:n}).success(function(e){var a=t(e.trim());r.append(a(d.scope))})):d.hasOwnProperty("$attachTo")&&(r.html(null),d.$attachTo(r,o,null)))}return{pre:null,post:o}}}}]).directive("tgTab",["$parse",function(e){return{restrict:"A",require:"^tgTabset",transclude:!0,scope:{tgTab:"@",tgTabTitle:"@",tgTabContext:"@",tgTabInitiated:"@",tgTabDisabled:"@",tgTabAutoRefresh:"@",tgTabIsolated:"@",tgTabTemplateUrl:"@"},compile:function(){function e(e,t,a,n,o){var r=null,i=e.$tab;i.template.content.$attachTo=function(t,a){var d={tab:i};n.trigger("$onTabAttaching",d).then(function(){r=t;var s="true"===e.tgTabIsolated?a:e.$parent.$new();s.$external=e.$parent,s.$tabset=n,s.$tab=i,o(s,function(e){t.append(e)}),n.trigger("$onTabAttached",d)})},i.refresh=function(){if(i.initiated&&r){var e={tab:i};n.trigger("$onTabRefreshing",e).then(function(){r.html(null),i.$attachTo(r),n.trigger("$onTabRefreshed",e)})}},n.addTab(i),a.$observe("tgTabTitle",function(e){i.title=e}),t.remove()}return{pre:e,post:null}},controller:["$scope","$element","$attrs",function(t){var a=e(t.tgTabContext);t.$tab={name:t.tgTab,title:t.tgTabTitle,template:{header:t.tgTabTemplateUrl?{templateUrl:t.tgTabTemplateUrl,scope:t.$parent}:null,content:{}},context:null,initiated:"true"===t.tgTabInitiated,disabled:"true"===t.tgTabDisabled,autoRefresh:"true"===t.tgTabAutoRefresh,refreshContext:function(e){var n=a(t.$parent)||{};e===!1&&(n=angular.extend(n,this.context)),this.context=n}},t.$tab.refreshContext()}]}}])}(),function(){"use strict";function e(e,t){return{restrict:"A",require:e,transclude:!0,scope:!1,compile:function(){function e(e,a,n,o,r){t&&o&&o.hasOwnProperty(t)&&o[t](r)}function a(e,t){t.remove()}return{pre:e,post:a}}}}angular.module("tg.components").run(["$templateCache",function(e){e.put("tg-typeahead.tpl.html",'<div class="tg-typeahead"     ng-class="tgTypeaheadWrapClass">   <div tg-typeahead-render-template="$templates.main.header"></div>   <div tg-typeahead-render-template="$templates.main.container"></div>   <div tg-typeahead-render-template="$templates.main.footer"></div>   <div class="tg-typeahead__suggestions-wrap"        tg-typeahead-render-template="$templates.popup.wrapper"></div>   <div class="tg-typeahead__suggestions-wrap"        ng-if="$stateHolder.hasSuggestions"        tg-typeahead-render-template="$templates.suggestedPopup.wrapper"></div></div>'),e.put("tg-typeahead-container.tpl.html",'<div class="tg-typeahead__input-container" style="position: relative"     ng-show="$isVisibleInput()">   <a href="" class="tg-typeahead__clear-link"      ng-show="!$stateHolder.loader && $isVisibleClear()"      ng-click="$clear($event);">Remove All</a>   <div class="input-loader tg-typeahead__loader" ng-show="$stateHolder.loader"></div>   <div class="tg-typeahead__input-wrap">       <input type="text" class="tg-typeahead__input"              placeholder="{{ $getPlaceholder() }}"              ng-model="$term"              ng-disabled="$stateHolder.disabled">   </div></div>'),e.put("tg-typeahead-popup.tpl.html",'<ul class="tg-typeahead__suggestions"    ng-if="$stateHolder.popup.opened"    ng-style="$templates.popup.wrapper.style">    <li class="tg-typeahead__suggestions-header"        tg-typeahead-render-template="$templates.popup.header"></li>    <li class="tg-typeahead__suggestions-container"        tg-when-scrolled="$onPopupScrolled($event);">        <div ng-repeat="$dataSet in $dataSets | filter:{ queried: { active: true } }">            <div class="tg-typeahead__suggestions-group-header"                 tg-typeahead-render-template="$dataSet.templates.header || $templates.dataSet.header"></div>            <ul class="tg-typeahead__suggestions-group">                <li class="tg-typeahead__suggestions-group-item"                    ng-repeat="$match in $dataSet.queried.matches | limitTo:$dataSet.queried.limit"                    ng-class="{ active: $index === $dataSet.queried.activeIndex, selected: $match.selected, disabled: $match.disabled }">                    <div tg-typeahead-render-template="$dataSet.templates.item || $templates.dataSet.item"></div>                </li>            </ul>            <div class="tg-typeahead__suggestions-group-footer"                tg-typeahead-render-template="$dataSet.templates.footer || $templates.dataSet.footer"></div>        </div>    </li>    <li class="tg-typeahead__suggestions-footer"        tg-typeahead-render-template="$templates.popup.footer"></li></ul>'),e.put("tg-typeahead-dataSet-item.tpl.html",'<span ng-bind-html="$match.value | tgTrustedHtml"></span>'),e.put("tg-typeahead-suggested-popup.tpl.html",'<ul class="tg-typeahead__suggestions"    ng-if="$stateHolder.suggestedPopup.opened"    ng-style="$templates.suggestedPopup.wrapper.style">    <li class="tg-typeahead__suggestions-header"        tg-typeahead-render-template="$templates.suggestedPopup.header"></li>    <li class="tg-typeahead__suggestions-container"        tg-when-scrolled="$onPopupScrolled($event);">        <div ng-repeat="$dataSet in $dataSets | filter:{ suggested: { active: true } }">            <div class="tg-typeahead__suggestions-group-header"                 tg-typeahead-render-template="$dataSet.templates.header || $templates.dataSet.header"></div>            <ul class="tg-typeahead__suggestions-group">                <li class="tg-typeahead__suggestions-group-item"                    ng-repeat="$match in $dataSet.suggested.matches | limitTo:$dataSet.suggested.limit"                    ng-class="{ active: $index === $dataSet.suggested.activeIndex, selected: $match.selected, disabled: $match.disabled }">                    <div tg-typeahead-render-template="$dataSet.templates.item || $templates.dataSet.item"></div>                </li>            </ul>            <div class="tg-typeahead__suggestions-group-footer"                tg-typeahead-render-template="$dataSet.templates.footer || $templates.dataSet.footer"></div>        </div>    </li>    <li class="tg-typeahead__suggestions-footer"        tg-typeahead-render-template="$templates.suggestedPopup.footer"></li></ul>'),e.put("tg-typeahead-suggested-dataSet-item.tpl.html",'<span ng-bind-html="$match.value | tgTrustedHtml"></span>'),e.put("tg-typeahead-tag-manager.tpl.html",'<div class="tg-typeahead__tag-manager"     ng-class="$templates.tagManager.wrapper.class"     ng-style="$templates.tagManager.wrapper.style">   <div ng-repeat="$tag in $tags | orderBy:$tagsOrder">       <div tg-typeahead-render-template="$templates.tagManager.tag"></div>   </div></div>'),e.put("tg-typeahead-tag.tpl.html",'<div class="tg-typeahead__tag">    <span class="tg-typeahead__tag-remove fa fa-times" rel="tooltip"       tooltip-placement="right"       tooltip-html-unsafe="delete"       ng-click="$removeTag($tag)"></span>    <span class="tg-typeahead__tag-name" ng-bind-html="$tag.match.value | tgTrustedHtml"></span></div>')
}]).directive("tgTypeahead",["$tgComponents","$injector","$http","$compile","$parse","$q","$timeout","$document",function(e,t,a,n,o,r,i,d){return{restrict:"A",require:["tgTypeahead","?ngModel"],scope:{tgTypeahead:"@",tgTypeaheadId:"@",tgTypeaheadContext:"=",tgTypeaheadPlaceholder:"@",tgTypeaheadPopupAppendToBody:"@",tgTypeaheadPopupStrictWidth:"@",tgTypeaheadWrapClass:"@",tgTypeaheadDisplayClean:"@",tgTypeaheadMinLength:"@",tgTypeaheadDelay:"@",tgTypeaheadSelected:"@"},priority:4,transclude:!0,template:'<div tg-typeahead-render-template="$templates.main.wrapper" ng-transclude=""></div>',compile:function(e,a){function n(e){return e&&e.hasOwnProperty("then")&&angular.isFunction(e.then)}function s(e,t,a,d){function s(t){var a=e.$dataHolder.collectedPromises,o=e.$promisesHolder.regularCancelPromise;return o&&a.push(o.promise),e.$dataSets.forEach(function(i){i.data={};var d={$queried:!0,$viewValue:t,$internal:e,$context:angular.extend({dataSet:i},e.$prepareSourceContext()||{})},s=i.queried,l=s.source.sourceMapper,p=l(w,d),c=n(p)?p:r.when(p);c.then(function(a){if(e.$term===t){s.matches.length=0,s.$hideMore();var n=a;angular.forEach(n,function(t){var a=s.$getItem(t,w),n=new g(t,a.model,a.value);e.$prepareMatchModel(n,i),s.matches.push(n)})}}).finally(function(){o&&o.resolve()}),a.push(c)}),a}function l(){var t=e.$dataHolder.collectedPromises,a=e.$promisesHolder.suggestedCancelPromise;return a&&t.push(a.promise),e.$dataSets.forEach(function(o){if(o.suggested&&o.suggested.source){o.data={};var i={$suggested:!0,$internal:e,$context:angular.extend({dataSet:o},e.$prepareSourceContext()||{})},d=o.suggested,s=d.source.sourceMapper,l=s(w,i),p=n(l)?l:r.when(l);p.then(function(t){d.matches.length=0,d.$hideMore();var a=t;angular.forEach(a,function(t){var a=d.$getItem(t,w),n=new h(t,a.model,a.value);e.$prepareMatchModel(n,o),d.matches.push(n)})}).finally(function(){a&&a.resolve()}),t.push(p)}}),t}function $(){e.$dataHolder.collectedPromises.length=0}function f(){var t,a=e.$stateHolder.popup.opened,n=e.$stateHolder.suggestedPopup.opened;if(a?t=e.$templates.popup.wrapper:n&&(t=e.$templates.suggestedPopup.wrapper),t){var o=e.$$findElementInTemplate(t,".tg-typeahead__suggestions-container"),r=o.get(0);if(r&&r.clientHeight<r.scrollHeight){var i=e.$$findElementInTemplate(t,".tg-typeahead__suggestions-group-item.active"),d=i.get(0);if(d){var s=r.getBoundingClientRect(),l=d.getBoundingClientRect();l.top<s.top?r.scrollTop+=l.top-s.top:l.bottom>s.bottom&&(r.scrollTop+=l.bottom-s.bottom)}}}}function v(t){t.on("mouseenter mouseleave mousedown",".tg-typeahead__suggestions-group-item",function(t){if(t.target){var a=angular.element(t.target).scope();switch(t.type){case"mouseenter":e.$setActiveMatch(a.$dataSet,a.$index),a.$digest();break;case"mouseleave":var n=e.getDataSetSource(a.$dataSet);n&&(n.activeIndex=-1),a.$digest();break;case"mousedown":a.$match.disabled||e.$selectMatch(a.$dataSet,a.$index,a.$match,t),a.$apply()}}})}function y(e){switch(b.trigger("onTemplateInit",{template:e}),e.name){case"main.container":T(e);break;case"popup.wrapper":case"suggestedPopup.wrapper":v(e.element)}}function T(){var t=e.$$findElementInTemplate(e.$templates.main.wrapper,".tg-typeahead__input");t.on("click",function(){var t=e.$stateHolder.popup.opened;e.$closePopup(),e.$stateHolder.hasSuggestions&&!t&&e.$resolveSuggestedSources()});var a=t.controller("ngModel");a.$parsers.unshift(function(t){return t=t||"",S&&i.cancel(S),e.$closePopup(),e.$applyMatch(null,null),t.length>=P&&(S=i(function(){e.$term&&e.$resolveSources(t)},I)),t})}var S,w=e.$external=e.$parent,b=d[0],M=d[1],P=Math.abs(parseInt(e.tgTypeaheadMinLength)||0),I=Math.abs(parseInt(e.tgTypeaheadDelay)||500);e.selectedDataSet=null,e.$dataSets=[],e.$term=null,e.$templates={main:{wrapper:new m("main.wrapper",a.tgTypeaheadTemplateUrl||"tg-typeahead.tpl.html",y),header:new m("main.header",a.tgTypeaheadHeaderTemplateUrl,y),container:new m("main.container",a.tgTypeaheadContainerTemplateUrl||"tg-typeahead-container.tpl.html",y),footer:new m("main.footer",a.tgTypeaheadFooterTemplateUrl,y)},popup:{wrapper:new m("popup.wrapper",a.tgTypeaheadPopupTemplateUrl||"tg-typeahead-popup.tpl.html",y),header:new m("popup.header",a.tgTypeaheadPopupHeaderTemplateUrl,y),container:new m("popup.container",void 0,y),footer:new m("popup.footer",a.tgTypeaheadPopupFooterTemplateUrl,y)},suggestedPopup:{wrapper:new m("suggestedPopup.wrapper",a.tgTypeaheadSuggestedPopupTemplateUrl||"tg-typeahead-suggested-popup.tpl.html",y),header:new m("suggestedPopup.header",a.tgTypeaheadSuggestedPopupHeaderTemplateUrl,y),container:new m("suggestedPopup.container",void 0,y),footer:new m("suggestedPopup.footer",a.tgTypeaheadSuggestedPopupFooterTemplateUrl,y)},dataSet:{header:new m("dataSet.header",a.tgTypeaheadDataSetsHeaderTemplateUrl,y),item:new m("dataSet.item",a.tgTypeaheadDataSetsItemTemplateUrl||"tg-typeahead-dataSet-item.tpl.html",y),footer:new m("dataSet.footer",a.tgTypeaheadDataSetsFooterTemplateUrl,y)}},"true"===e.tgTypeaheadPopupAppendToBody&&(e.$templates.popup.wrapper.appendToBody=!0,e.$templates.suggestedPopup.wrapper.appendToBody=!0),"false"!==e.tgTypeaheadPopupStrictWidth&&(e.$templates.popup.wrapper.strictWidth=!0,e.$templates.suggestedPopup.wrapper.strictWidth=!0),e.$stateHolder={loader:!1,disabled:!1,popup:{opened:!1},hasSuggestions:!1,suggestedPopup:{opened:!1}},e.$dataHolder={collectedPromises:[],modelValue:null},e.$eventHolder={onMatchSelected:o(e.tgTypeaheadSelected)},e.$promisesHolder={regularCancelPromise:void 0,suggestedCancelPromise:void 0},e.getDataSetSource=function(t){if(t){if(e.$stateHolder.popup.opened)return t.queried;if(e.$stateHolder.suggestedPopup.opened)return t.suggested}},e.selectDataSet=function(t,a){var n;e.$dataSets.forEach(function(a){n=e.getDataSetSource(a),n&&(n.$hideMore(),n.active=!t)}),e.selectedDataSet=t,e.selectedDataSet&&(n=e.getDataSetSource(e.selectedDataSet),n&&(n.$showMore(),n.active=!0));var o=e.$$findElementInTemplate(e.$templates.main.wrapper,".tg-typeahead__suggestions-container");o&&o.scrollTop(),a&&a.stopPropagation()},e.refreshModel=function(t){return e.$clear(),t=e.$prepareModel(t),e.$setModel(t,!0),t},e.$$findElementInTemplate=function(e,t){return e&&e.element&&t?e.element.find(t):void 0},e.$openPopup=function(){e.$stateHolder.popup.opened||(e.$stateHolder.popup.opened=!0,e.selectDataSet(null),e.$setActiveMatch(null,-1),e.$updatePopupElement(e.$templates.popup.wrapper))},e.$openSuggestedPopup=function(){e.$stateHolder.suggestedPopup.opened||(e.$stateHolder.suggestedPopup.opened=!0,e.selectDataSet(null),e.$setActiveMatch(null,-1),e.$updatePopupElement(e.$templates.suggestedPopup.wrapper))},e.$closePopup=function(){e.$stateHolder.popup.opened&&(e.$stateHolder.popup.opened=!1),e.$stateHolder.suggestedPopup.opened&&(e.$stateHolder.suggestedPopup.opened=!1),e.$cancelAllRequests()},e.$updatePopupElement=function(e){var a=e.style||{};if(e.appendToBody){var n=t.offset(),o=t.outerHeight(!0);a.position="absolute",a.top=n.top+o+1,a.left=n.left}e.strictWidth&&(a.width=t.innerWidth(),a.boxSizing="border-box"),e.style=a},e.$isVisibleInput=function(){return!0},e.$isFocusedInput=function(){var t=e.$$findElementInTemplate(e.$templates.main.wrapper,".tg-typeahead__input");return t&&t.is(":focus")},e.$getPlaceholder=function(){return e.tgTypeaheadPlaceholder||""},e.$isVisibleClear=function(){return"true"===e.tgTypeaheadDisplayClean&&e.$term},e.$clear=function(){e.$clearTypeahead()},e.$updateInputElement=function(){},e.$prepareSourceContext=function(){},e.$resolveSources=function(t){e.$cancelAllRequests(),e.$stateHolder.loader=!0,e.$promisesHolder.regularCancelPromise=r.defer(),r.all(s(t)).then(function(){e.$dataHolder.collectedPromises.length>0&&($(),e.$openPopup())},function(){e.$cancelAllRequests()}).finally(function(){e.$stateHolder.loader=!1})},e.$resolveSuggestedSources=function(){e.$cancelAllRequests(),e.$stateHolder.loader=!0,e.$promisesHolder.suggestedCancelPromise=r.defer(),r.all(l()).then(function(){e.$dataHolder.collectedPromises.length>0&&($(),i(function(){e.$openSuggestedPopup()}))},function(){e.$cancelAllRequests()}).finally(function(){e.$stateHolder.loader=!1})},e.$cancelAllRequests=function(){e.$stateHolder.loader=!1;var t=e.$promisesHolder.regularCancelPromise,a=e.$promisesHolder.suggestedCancelPromise;t&&(t.reject(),e.$promisesHolder.regularCancelPromise=void 0),a&&(a.reject(),e.$promisesHolder.suggestedCancelPromise=void 0);var n=e.$dataHolder.collectedPromises;n.length>0&&(n.forEach(function(e){e.hasOwnProperty("cancelRequest")&&e.cancelRequest()}),$())},e.$clearTypeahead=function(){e.$term=null},e.$setActiveMatch=function(t,a){var n;e.$dataSets.forEach(function(o){n=e.getDataSetSource(o),n&&(n.activeIndex=o===t?a:-1)})},e.$selectMatch=function(t,a,n){var o={context:e.tgTypeaheadContext,dataSet:t,index:a,match:n};b.trigger("onMatchSelecting",o).then(function(){e.$term=o.match.value,e.$applyMatch(t,o.match.model),b.trigger("onMatchSelected",o),e.$eventHolder.onMatchSelected(w,o)}),e.$closePopup()},e.$selectUnknownMatch=function(t,a,n){e.$selectMatch(t,-1,a,n)},e.$applyMatch=function(t,a){var n=a;e.$dataSets.length>1&&(n=e.$getModel()||{},e.$dataSets.forEach(function(e){n[e.name]=e===t?a:null})),e.$setModel(n)},e.$prepareDefaultModel=function(){var t=e.$dataSets.length>1,a=null;return t&&(a={},e.$dataSets.forEach(function(e){a[e.name]=null})),a},e.$prepareModel=function(t){if(void 0===t)return e.$prepareDefaultModel();var a,n=1===e.$dataSets.length,o=e.$dataSets.length>1;if(n?a=e.$dataSets[0]:o&&(t&&!Array.isArray(t)&&angular.isObject(t)||(t={}),e.$dataSets.forEach(function(e){t.hasOwnProperty(e.name)||(t[e.name]=null),null!==t[e.name]&&void 0!==t[e.name]&&(a=e)})),a){var r=n?t:t[a.name];e.$term=a.queried.$getItem(r,e.$parent).value}return t},e.$prepareMatchModel=function(){},e.$getModel=function(){return c?c(w):void 0},e.$setModel=function(t,a){e.$dataHolder.modelValue=t,!a&&M&&M.$setViewValue(null),u&&u(w,t)},e.$waitTill=function(t){t&&t.hasOwnProperty("finally")&&(e.$closePopup(),e.$stateHolder.loader=!0,e.$stateHolder.disabled=!0,t.finally(function(){e.$stateHolder.loader=!1,e.$stateHolder.disabled=!1}))},e.$onPopupScrolled=function(){if(e.selectedDataSet){var t=e.getDataSetSource(e.selectedDataSet);t&&t.$showMore()}},e.$onOutsideClick=function(){null===e.$dataHolder.modelValue&&e.$clearTypeahead(),e.$closePopup()},e.$onKeyDown=function(t){var a=e.$stateHolder.popup.opened,n=e.$stateHolder.suggestedPopup.opened;if((a||n)&&-1!==p.indexOf(t.which)){var o,r,d,s;if(e.selectedDataSet?o=e.selectedDataSet:(e.$dataSets.forEach(function(t){s=e.getDataSetSource(t),s&&-1!==s.activeIndex?o=t:o?o&&!d&&(d=t):r=t}),o||(o=e.$dataSets[0])),t.preventDefault(),s=e.getDataSetSource(o))if(40===t.which){var l=Math.min(s.limit,s.matches.length);if(s.activeIndex+1<l)s.activeIndex++;else{if(!d)return;e.$setActiveMatch(d,0)}i(f),e.$digest()}else if(38===t.which){if(s.activeIndex>0)s.activeIndex--;else{if(!r)return;if(s=e.getDataSetSource(r)){var l=Math.min(s.limit,s.matches.length);e.$setActiveMatch(r,l-1)}}i(f),e.$digest()}else 13===t.which||32===t.which?o&&(e.$selectMatch(o,s.activeIndex,s.matches[s.activeIndex],t),e.$apply()):27===t.which&&(e.$clearTypeahead(),e.$closePopup(),e.$digest())}},e.$watchModel=function(){e.$watch(e.$getModel,function(t){e.refreshModel(t)})},e.$trigger=b.trigger.bind(b)}function l(e,t){var a=function(a){if(0===t.has(a.target).length){var n=e.$templates.popup.wrapper.element,o=e.$templates.suggestedPopup.wrapper.element;(n&&0===n.has(a.target).length||o&&0===o.has(a.target).length)&&(e.$onOutsideClick(),e.$digest())}},n=function(t){e.$onKeyDown(t)};d.on("click",a),d.on("keydown",n),e.$on("$destroy",function(){d.off("click",a),d.off("keydown",n)}),e.$watchModel()}var p=[9,13,27,32,38,40],c=o(a.ngModel),u=c.assign,m=t.get("tgTypeaheadRenderTemplateModel"),g=t.get("tgTypeaheadMatchModel"),h=t.get("tgTypeaheadSuggestedMatchModel");return{pre:s,post:l}},controller:["$scope","$element","$attrs",function(t,a,n){var o=this;o.$type="tgTypeahead",o.$name=t.tgTypeaheadId?t.tgTypeaheadId:o.$type+"_"+t.$id,o.$scope=t,o.$element=a,o.$attrs=n,o.$supportEvents=!0,this.$setHeaderTemplate=function(e){t.$templates.main.header.setTemplate(e)},this.$setFooterTemplate=function(e){t.$templates.main.footer.setTemplate(e)},this.$setPopupHeaderTemplate=function(e){t.$templates.popup.header.setTemplate(e)},this.$setPopupFooterTemplate=function(e){t.$templates.popup.footer.setTemplate(e)},this.$setSuggestedPopupHeaderTemplate=function(e){t.$templates.suggestedPopup.header.setTemplate(e)},this.$setSuggestedPopupFooterTemplate=function(e){t.$templates.suggestedPopup.footer.setTemplate(e)},this.$addDataSet=function(e){t.$dataSets.push(e),e.suggested&&(t.$stateHolder.hasSuggestions=!0)},this.$overrideFn=function(e,a){var n=t[e]||angular.noop;t[e]=function(){var e,t=this.$baseFn;return this.$baseFn=n,e=a.apply(this,arguments),this.$baseFn=t,e}},this.clear=function(){t.$clearTypeahead()},this.refreshModel=function(e){t.refreshModel(e)},e.$addInstance(o),t.$on("$destroy",function(){e.$removeInstance(o)})}]}}]).directive("tgTypeaheadDataSet",["$injector","$parse",function(e,t){return{restrict:"A",require:"^tgTypeahead",scope:{tgTypeaheadDataSet:"@",tgTypeaheadDataSetName:"@",tgTypeaheadDataSetLimitStep:"@",tgTypeaheadDataSetDisplayedItems:"@",tgTypeaheadDataSetSuggested:"@"},compile:function(){function a(e){var a=e.match(r);if(!a)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+e+"'.");return{itemName:a[3],sourceMapper:t(a[4]),viewMapper:t(a[2]||a[1]),modelMapper:t(a[1])}}function n(n,o,r,i){var d,s=parseInt(n.tgTypeaheadDataSetLimitStep)||9999,l=parseInt(n.tgTypeaheadDataSetDisplayedItems)||s,p=a(n.tgTypeaheadDataSet),c=e.get("tgTypeaheadRenderTemplateModel"),u=e.get("tgTypeaheadSourceModel");n.tgTypeaheadDataSetSuggested&&(d={itemName:p.itemName,sourceMapper:t(n.tgTypeaheadDataSetSuggested),viewMapper:p.viewMapper,modelMapper:p.modelMapper}),n.$dataSet={name:n.tgTypeaheadDataSetName||"dataSet_"+n.$id,data:void 0,templates:{header:new c("dataSet.header",r.tgTypeaheadDataSetHeaderTemplateUrl),item:new c("dataSet.item",r.tgTypeaheadDataSetItemTemplateUrl),footer:new c("dataSet.footer",r.tgTypeaheadDataSetFooterTemplateUrl)},queried:new u(p,l,s),suggested:d?new u(d,l,s):void 0},i.$addDataSet(n.$dataSet)}function o(e,t){e.$destroy(),t.remove()}var r=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{pre:n,post:o}},controller:["$scope",function(e){this.$setHeaderTemplate=function(t){e.$dataSet.templates.header.setTemplate(t)},this.$setItemTemplate=function(t){e.$dataSet.templates.item.setTemplate(t)},this.$setFooterTemplate=function(t){e.$dataSet.templates.footer.setTemplate(t)}}]}}]).directive("tgTypeaheadHeader",[function(){return e("^?tgTypeahead","$setHeaderTemplate")}]).directive("tgTypeaheadFooter",[function(){return e("^?tgTypeahead","$setFooterTemplate")}]).directive("tgTypeaheadPopupHeader",[function(){return e("^?tgTypeahead","$setPopupHeaderTemplate")}]).directive("tgTypeaheadPopupFooter",[function(){return e("^?tgTypeahead","$setPopupFooterTemplate")}]).directive("tgTypeaheadDataSetHeader",[function(){return e("^?tgTypeaheadDataSet","$setHeaderTemplate")}]).directive("tgTypeaheadDataSetItem",[function(){return e("^?tgTypeaheadDataSet","$setItemTemplate")}]).directive("tgTypeaheadDataSetFooter",[function(){return e("^?tgTypeaheadDataSet","$setFooterTemplate")}]).directive("tgTypeaheadSuggestedPopupHeader",[function(){return e("^?tgTypeahead","$setSuggestedPopupHeaderTemplate")}]).directive("tgTypeaheadSuggestedPopupFooter",[function(){return e("^?tgTypeahead","$setSuggestedPopupFooterTemplate")}]).directive("tgTypeaheadRenderTemplate",["$http","$compile","$parse","$templateCache",function(e,t,a,n){return{restrict:"A",scope:!1,compile:function(o,r){function i(a,o){o.empty();var r=d(a);r&&r.template?(r.template(a,function(e){o.append(e)}),r.appendToBody&&o.detach().appendTo("body"),r.render(o)):r&&r.templateUrl?e.get(r.templateUrl,{cache:n}).success(function(e){o.append(t(e.trim())(a)),r.appendToBody&&o.detach().appendTo("body"),r.render(o)}):o.remove()}var d=a(r.tgTypeaheadRenderTemplate);return{pre:void 0,post:i}}}}]).directive("tgTypeaheadTagManager",["$injector","$http","$compile","$parse","$templateCache","$q","$timeout",function(e,t,a,n,o,r,i){return{restrict:"A",require:["tgTypeahead","?ngModel"],scope:!1,priority:3,compile:function(t,a){function n(e,t,a,n){function g(){var a=e.$$findElementInTemplate(e.$templates.main.wrapper,".tg-typeahead__input-container"),n=e.$$findElementInTemplate(e.$templates.main.wrapper,".tg-typeahead__input");if(a&&n){if(1===e.$tags.length){var o=t.width(),r=function(){var t,a,n=0;return e.$$findElementInTemplate(e.$templates.tagManager.wrapper,".tg-typeahead__tag").each(function(){t=angular.element(this),a=t.outerWidth()+parseInt(t.css("margin-left"))+parseInt(t.css("margin-right")),n+=a,n>o&&(n=a)}),n}();if(r>0){var i=o-r,d=100>i?o:i;return d>=9&&(d-=9),void a.css("width",d+"px")}}a.css("width","100%")}}function h(){var t=e.$$findElementInTemplate(e.$templates.tagManager.wrapper,".tg-typeahead__tag-manager");if(t){var a=t.get(0);a&&t.scrollTop(a.scrollHeight)}}var $=n[0],f=n[1];e=$.$scope,e.$tags=[],e.$tagsOrder=function(){return 0},p&&(e.$tagsOrder=["match.value"]),e.$templates.tagManager={wrapper:new c("tagManager.wrapper",a.tgTypeaheadTagManagerTemplateUrl||"tg-typeahead-tag-manager.tpl.html"),tag:new c("tagManager.tag",a.tgTypeaheadTagTemplateUrl||"tg-typeahead-tag.tpl.html")},e.$templates.main.header=e.$templates.tagManager.wrapper,e.$canAddTag=function(){return 0===d||d>e.$tags.length},e.$addTag=function(t){if(t&&t.match&&e.$canAddTag()){var a={context:e.tgTypeaheadContext,tag:t};return $.events.emit("onTagAdding",a).then(function(){if(t.dataSet){var n=e.$getModel(),o=n;if(o){e.$dataSets.length>1&&(o=o[t.dataSet.name]);var r=-1;if(!s)for(var d=0,l=o.length;l>d;d++)if(angular.equals(o[d],t.match.model)){r=d;break}-1===r&&o.push(t.match.model)}}return e.$tags.push(t),i(function(){h()}),$.events.emit("onTagAdded",a),t})}return r.when(void 0)},e.$removeTag=function(t){var a=e.$tags.indexOf(t);if(-1!==a){var n={context:e.tgTypeaheadContext,index:a,tag:t};return $.events.emit("onTagRemoving",n).then(function(){if(t.dataSet){var a=e.$getModel(),o=a;if(e.$dataSets.length>1&&o&&(o=o[t.dataSet.name]),o){for(var r=-1,i=0,d=o.length;d>i;i++)if(angular.equals(o[i],t.match.model)){r=i;break}-1!==r&&o.splice(r,1)}}r=e.$tags.indexOf(t),-1!==r&&(e.$tags.splice(r,1),$.events.emit("onTagRemoved",n))})}return r.when(!1)},e.$findTag=function(t){for(var a=0,n=e.$tags.length;n>a;a++)if(angular.equals(e.$tags[a].match.model,t.model))return e.$tags[a]},e.$clearTags=function(){for(var t=e.$tags.length-1;t>=0;t--)e.$removeTag(e.$tags[t])},e.hasAllSelected=function(t){var a=e.getDataSetSource(t);if(a&&a.matches.length>0){for(var n=0,o=a.matches.length;o>n;n++)if(!a.matches[n].selected)return!1;return!0}return!1},e.selectAll=function(t,a){a&&(a.stopPropagation(),a.ctrlKey=!0);var n=e.getDataSetSource(t);n&&n.matches.forEach(function(n,o){n.selected||e.$selectMatch(t,o,n,a)})},e.deselectAll=function(t,a){a&&(a.stopPropagation(),a.ctrlKey=!0);var n=e.getDataSetSource(t);n&&n.matches.forEach(function(n,o){n.selected&&e.$selectMatch(t,o,n,a)})},e.applySelections=function(t){t.forEach(function(t){var a=e.getDataSetSource(t);a&&a.matches.forEach(function(a){var n=e.$findTag(a);if(a.selected)void 0===n&&(n=new m(a,{name:t.name}),e.$addTag(n));else{var n=e.$findTag(a);void 0!==n&&e.$removeTag(n)}})}),e.$closePopup()},$.$overrideFn("$applyMatch",function(e,t,a){a&&this.$baseFn(e,t)}),$.$overrideFn("$onOutsideClick",function(){e.$clearTypeahead(),this.$baseFn()}),$.$overrideFn("$onKeyDown",function(t){8===t.which&&null===e.$term?e.$isFocusedInput()&&e.$tags.length>0&&e.$removeTag(e.$tags[e.$tags.length-1]):this.$baseFn(t)}),$.$overrideFn("$getPlaceholder",function(){return this.$baseFn()}),$.$overrideFn("$isVisibleInput",function(){var t=this.$baseFn();return t&&d>0&&d<=e.$tags.length&&(t=!1),t&&e.$updateInputElement(),t}),$.$overrideFn("$isVisibleClear",function(){return"true"===a.tgTypeaheadDisplayClean&&e.$tags.length>1}),$.$overrideFn("$clear",function(t){this.$baseFn(t),e.$clearTags()}),$.$overrideFn("$selectMatch",function(t,a,n,o){var r={context:e.tgTypeaheadContext,dataSet:t,index:a,match:n};$.trigger("onMatchSelecting",r).then(function(){if(l)n.selected=!n.selected;else{var a=e.$findTag(n);void 0===a||s?(a=new m(n,{name:t.name}),e.$addTag(a),n.selected=!0):(e.$removeTag(a),n.selected=!1)}l||o&&o.ctrlKey|o.metaKey||e.$onOutsideClick()})}),$.$overrideFn("$watchModel",function(){e.$watchCollection(e.$getModel,function(t){e.refreshModel(t)})}),$.$overrideFn("$prepareDefaultModel",function(){var t=1===e.$dataSets.length,a=e.$dataSets.length>1,n=null;return t?n=[]:a&&(n={},e.$dataSets.forEach(function(e){n[e.name]=[]})),n}),$.$overrideFn("$prepareModel",function(t){if(void 0===t)return e.$prepareDefaultModel();var a=1===e.$dataSets.length,n=e.$dataSets.length>1,o=[];return a?Array.isArray(t)&&t.length>0&&o.push({dataSet:e.$dataSets[0],source:t}):n&&(t&&!Array.isArray(t)&&angular.isObject(t)||(t={}),e.$dataSets.forEach(function(e){t.hasOwnProperty(e.name)&&Array.isArray(t[e.name])||(t[e.name]=[]),t[e.name].length>0&&o.push({dataSet:e,source:t[e.name]})})),o.length>0&&o.forEach(function(t){var a=t.dataSet,n=a.queried;t.source.forEach(function(t){var o=n.$getItem(t,e.$parent),t=new u(t,o.model,o.value),r=new m(t,{name:a.name});e.$addTag(r)})}),t}),$.$overrideFn("$prepareMatchModel",function(t){if(!s&&e.$tags.length>0){var a=e.$findTag(t);void 0!==a&&(t.selected=!0)}}),$.$overrideFn("$updateInputElement",function(){g(),o>0&&(e.$tags.length>1?(e.$templates.tagManager.wrapper.class="clearfix",e.$templates.tagManager.wrapper.style={"max-height":22*o+"px","overflow-y":"auto"}):(e.$templates.tagManager.wrapper.class=void 0,e.$templates.tagManager.wrapper.style={}))}),$.getTags=function(){var t=[];return e.$tags.forEach(function(e){t.push(e)}),t},$.addTag=function(t,a){var n=new m(t,{name:a.name});return e.$addTag(n)},$.removeTag=function(t){return e.$removeTag(t)},$.clearTags=function(){e.$clearTags()},e.$watchCollection("$tags",function(e){a.required&&i(function(){f.$setValidity("tagsRequired",0!==e.length)})})}var o=Math.abs(parseInt(a.tgTypeaheadMaxLines)||0),d=Math.abs(parseInt(a.tgTypeaheadMaxSelectedTags)||0),s="true"===a.tgTypeaheadAllowDuplicates,l="true"===a.tgTypeaheadPostponedSelection,p="true"===a.tgTypeaheadTagAscendingOrder,c=e.get("tgTypeaheadRenderTemplateModel"),u=e.get("tgTypeaheadMatchModel"),m=e.get("tgTypeaheadTagModel");return{pre:n,post:void 0}}}}]).factory("tgTypeaheadRenderTemplateModel",[function(){function e(e,t,a){this.name=e,this.templateUrl=t,this.template=void 0,this.appendToBody=!1,this.strictWidth=!1,this.element=void 0,this.style=void 0,this.class=void 0,this.callback=a}return e.prototype.setTemplate=function(e){this.template=e},e.prototype.render=function(e){this.element=e,angular.isFunction(this.callback)&&this.callback(this)},e}]).factory("tgTypeaheadSourceModel",[function(){function e(e,t,a){this.source=e,this.matches=[],this.displayedItems=t,this.limitStep=a,this.limit=t,this.active=!0,this.activeIndex=-1}return e.prototype.$hasMore=function(){return this.limit<this.matches.length},e.prototype.$showAll=function(e){this.limit=this.matches.length,e&&e.stopPropagation()},e.prototype.$showMore=function(e){var t=this.limit+this.limitStep;t>this.matches.length&&(t=this.matches.length),t<this.limitStep&&(t=this.limitStep),this.limit=t,e&&e.stopPropagation()},e.prototype.$hideMore=function(e){this.limit=this.displayedItems,e&&e.stopPropagation()},e.prototype.$getItem=function(e,t){var a={},n=this.source.itemName,o=this.source.viewMapper,r=this.source.modelMapper;return a[n]=e,{model:r(t,a),value:o(t,a)}},e}]).factory("tgTypeaheadMatchModel",[function(){function e(e,t,a){this.data=e,this.model=t,this.value=a,this.selected=!1,this.disabled=!1}return e}]).factory("tgTypeaheadSuggestedMatchModel",[function(){function e(e,t,a){this.data=e,this.model=t,this.value=a,this.selected=!1,this.disabled=!1,this.suggested=!0}return e}]).factory("tgTypeaheadTagModel",[function(){function e(e,t){this.match=e,this.dataSet=t}return e}]).factory("tgTypeaheadFilterTagModel",[function(){function e(e){this.match=e,this.filter=void 0,this.filters=[]}return e}])}(),function(){"use strict";angular.module("tg.components").directive("tgWhenScrolled",["$parse",function(e){return{restrict:"A",link:function(t,a,n){var o=e(n.tgWhenScrolled);a.bind("scroll",function(e){this.scrollTop+this.offsetHeight>=this.scrollHeight&&(o(t,{$event:e}),t.$digest())})}}}])}(),angular.module("app").controller("ComponentsController",["$scope",function(){"use strict"}]),angular.module("tg.extensions").factory("$tgComponents",["tgEventsProcessor",function(e){"use strict";var t={},a=e.new();return{$addInstance:function(n){if(!n||!n.$name)throw new Error("Invalid instance or instance name.");if(t.hasOwnProperty(n.$name))throw new Error("Component with instance name `"+n.$name+"` already exist.");n.$supportEvents&&!n.hasOwnProperty("events")&&(n.events=e.new(),n.trigger=function(){var e=[];return Array.prototype.push.apply(e,arguments),e.push(n),n.events.emit.apply(n.events,e)}),t[n.$name]=n,a.emit("$onInstanceAdded",n)},$removeInstance:function(e){if(!e||!e.$name)throw new Error("Invalid instance or instance name.");if(!t.hasOwnProperty(e.$name))throw new Error("Component with instance name `"+e.$name+"` doesn't exist.");delete t[e.$name],a.emit("$onInstanceRemoved",e)},hasInstance:function(e){if(!e)throw new Error("Invalid instance name.");return t.hasOwnProperty(e)},getInstance:function(e){if(!this.hasInstance(e))throw new Error("Component with instance name `"+e+"` doesn't exist.");return t[e]||null},getInstances:function(){var e=[];for(var a in t)e.push(t[a]);return e},events:a}}]).factory("tgEventsProcessor",["$q",function(e){"use strict";function t(){this.handlers={},this.on=function(e,t){if(angular.isString(e)&&e.length>0&&angular.isFunction(t)){this.handlers.hasOwnProperty(e)||(this.handlers[e]=[]);var a=this.handlers[e];return a.push(t),function(){var e=a.indexOf(t);-1!==e&&a.splice(e,1)}}},this.emit=function(t){var a=[];if(angular.isString(t)&&t.length>0&&this.handlers.hasOwnProperty(t)){var n=[];Array.prototype.push.apply(n,arguments),n.shift(),angular.forEach(this.handlers[t],function(e){var t=e.apply(this,n);if(t){var o=t.hasOwnProperty("then")&&angular.isFunction(t.then);o&&a.push(t)}})}return e.all(a)},this.clear=function(e,t){if(void 0!==e){if(angular.isString(e)&&e.length>0)if(angular.isFunction(t)){var a=this.handlers[e].indexOf(t);-1!==a&&this.handlers[e].splice(a,1)}else delete this.handlers[e]}else this.handlers={}}}return{"new":function(){return new t}}}]),angular.module("app").controller("HomeController",["$scope",function(){"use strict"}]);